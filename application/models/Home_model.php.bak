<?php

class Home_model extends CI_Model {

    function __construct() {
        // Call the Model constructor
        parent::__construct();
    }

    function get_home_page_data() {
        return $this->db->get('home_page')->row_array();
    }

    function get_resource_page_data(){
        $this->db->select('*');
        $this->db->where('page_name', 'resources');
        $record_obj = $this->db->get('dynamic_pages');
        $record_arr = $record_obj->result_array();
        $record_obj->free_result();

        if(!empty($record_arr)){
            $record_arr = $record_arr[0];

            $dynamic_pages_sid = $record_arr['sid'];

            $this->db->where('dynamic_pages_sid', $dynamic_pages_sid);
            $this->db->where('status', 1);
            $sections_obj = $this->db->get('dynamic_pages_sections');

            $sections_arr = $sections_obj->result_array();
            $sections_obj->free_result();

            $record_arr['sections'] = $sections_arr;

            return $record_arr;

        } else {
            return array();
        }
    }
}
