function getDescriptionPreview(e,t=!1){let i="";return i=(i=(i=(i=(i=(i=i+`<div class="panel panel-default jsQuestionDescription" data-id="desc_${e.question_id}">`+'<div class="panel-heading">')+'   <div class="row">'+'       <div class="col-xs-9">')+`           <h1 class="panel-text-heading text-medium jsCollapseBtn" data-target="collapse${e.question_id}">`)+"               <strong>"+'               <i class="fa fa-align-left"></i>&nbsp;')+e.plainDescription+"               </strong>")+"           </h1>"+"       </div>",i=(i=(i=t?(i=(i=(i+='       <div class="col-xs-3 text-right panel-text-heading" style="margin-top: 5px;">               <button type="button" class="btn btn-warning jsTemplateEditEditDescription" title="Edit Description">')+'                   <i class="fa fa-edit"></i>               </button>')+'               <button type="button" class="btn btn-danger jsRemoveEditDescription" title="Remove Description">                   <i class="fa fa-trash"></i>')+"               </button>       </div>":(i=(i=(i+='       <div class="col-xs-3 text-right panel-text-heading" style="margin-top: 5px;">               <button type="button" class="btn btn-warning jsTemplateEditDescription" title="Edit Description">')+'                   <i class="fa fa-edit"></i>               </button>')+'               <button type="button" class="btn btn-danger jsRemoveDescription" title="Remove Description">                   <i class="fa fa-trash"></i>')+"               </button>       </div>")+"   </div>"+"</div>")+"   </div>"+"</div>"}function getQuestionPreview(t,e=0,i=!1){let s="";if(s=(s=(s=(s=(s=(s=s+`<div class="panel panel-default jsQuestionView" data-id="${t.question_id}">`+'<div class="panel-heading">')+'   <div class="row">'+'       <div class="col-xs-8">')+`           <h1 class="panel-text-heading text-medium jsCollapseBtn" data-target="collapse${t.question_id}">`+"               <strong>")+`               <i class="fa fa-${getIconFromQuestionType(t.question_type)}"></i>`)+`               ${30<t.question_title.length?t.question_title.substr(0,30):t.question_title}...`+"               </strong>")+"           </h1>"+"       </div>",s=(s=(s=(s=(s=(s=(s=(s=(s=i?(s=(s=(s=(s+='       <div class="col-xs-4 text-right panel-text-heading" style="margin-top: 5px;">               <button type="button" class="btn btn-warning jsEditEditQuestion" title="Edit Question">')+'                   <i class="fa fa-edit"></i>               </button>')+'               <button type="button" class="btn btn-danger jsRemoveEditQuestion" title="Remove Question">                   <i class="fa fa-trash"></i>')+"               </button>       </div>")+"   </div></div>":(s=(s=(s=(s+='       <div class="col-xs-4 text-right panel-text-heading" style="margin-top: 5px;">               <button type="button" class="btn btn-warning jsEditQuestion" title="Edit Question">')+'                   <i class="fa fa-edit"></i>               </button>')+'               <button type="button" class="btn btn-danger jsRemoveQuestion" title="Remove Question">                   <i class="fa fa-trash"></i>')+"               </button>       </div>")+"   </div></div>")+`   <div class="panel-body hidden" id="collapse${t.question_id}">`+'       <div class="row">')+`           <div class="col-sm-12 col-md-${t.video_file_name?"8":"12"}">`)+'               <h1 class="text-medium">'+"                   <strong>")+("                   "+t.question_title))+("                   "+(1==t.question_required?'<span class="text-danger">*</span>':""))+"                   </strong>")+"               </h1>"+'               <p class="text-medium">')+("                   "+t.question_content))+"               </p>"+"           </div>",s=(s=(s=t.video_file_name&&"none"!=t.video_file_name?(s+='           <div class="col-sm-12 col-md-4">')+getFileWithTag(t.video_file_name,{style:"width: 100%",controls:"true"})+"           </div>":s)+"       </div>"+"       <br/>")+'       <div class="row">'+'           <div class="col-sm-12 col-md-12">',"text"===t.question_type)s+=`<textarea type="text" name="textarea_${t.question_id}" class="form-control cs-text-answer" is_required="${1==t.question_required?1:0}" rows="5" style="resize: none;" placeholder="Write the answer here...."></textarea>`;else if("yes_no"===t.question_type)s=(s=(s=(s=(s=(s=(s+='<div class="row">')+`	<div class="col-sm-12">`+'       <label class="control control--radio">')+`           <input type="radio" name="yes_no_${t.question_id}" value="yes"> Yes`+`	        <div class="control__indicator"></div>`)+`	    </label> &nbsp;&nbsp;`+`		<label class="control control--radio">`)+`			<input type="radio" name="yes_no_${t.question_id}" value="no"> No`)+`			<div class="control__indicator"></div>`+`		</label>`)+`	</div>`+"</div>";else if("rating"===t.question_type){s=(s=s+'<div class="row">'+'   <div class="col-sm-12">')+'       <div class="rating-container" style="text-align: center; font-size: 2rem; display: flex; justify-content: center; width: 100%;">'+'           <div class="rating-stars" style="display: flex; justify-content: space-between; width: 100%;">';for(let e=1;e<=t.choice_list.rating;e++)s=(s=(s+='               <label class="control control--radio" style="cursor: pointer; flex: 1; text-align: center;">')+`                   <input type="radio" name="rating_${t.question_id}" value="${e}" style="display: none;">`)+'                   <span class="star" style="color: #ccc; font-size: 50px;">&#9733;</span>               </label>';s=(s=(s=(s=(s=(s=s+"           </div>"+"       </div>")+"   </div>"+'   <div class="col-xs-6 text-left">')+`           <span class="rating-text text-medium" style="margin-right: 10px;">${t.choice_list.min||"Poor"}</span>`)+"   </div>"+'   <div class="col-xs-6 text-right">')+`           <span class="rating-text text-medium" style="margin-left: 10px;">${t.choice_list.max||"Excellent"}</span>`)+"   </div>"+"</div>"}else{var n,o="multiple_choice"===t.question_type?"checkbox":"radio",l=("multiple_choice"===t.question_type?"multiple_choice":"single_choice")+"_"+t.question_id;for(n in t.choice_list){var a=t.choice_list[n];s+=`
            <label class="control control--${o}">
                <input type="${o}" name="${l}" value="${a.answer_choice}"> ${a.answer_choice}
                <div class="control__indicator"></div>
            </label> &nbsp;&nbsp;`}}return s=(s=s+"           </div>"+"       </div>")+"   </div>"+"</div>"}function getQuestionViewPreview(t,e=0){t.choices_json&&(t.choice_list=JSON.parse(t.choices_json));let i="";if(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=i+`<div class="panel panel-default jsQuestionView" data-id="${t.question_id}">`+'<div class="panel-heading">')+'   <div class="row">'+'       <div class="col-xs-8">')+`           <h1 class="panel-text-heading text-medium jsCollapseBtn" data-target="collapse${t.question_id}">`+"               <strong>")+`               <i class="fa fa-${getIconFromQuestionType(t.question_type)}"></i>`)+`               ${30<t.question_title.length?t.question_title.substr(0,30):t.question_title}...`+"               </strong>")+"           </h1>"+"       </div>")+'       <div class="col-xs-4 text-right panel-text-heading" style="margin-top: 5px;">'+'               <button type="button" class="btn btn-warning jsEditQuestion" title="Edit Question">')+'                   <i class="fa fa-edit"></i>'+"               </button>")+'               <button type="button" class="btn btn-danger jsRemoveQuestion" title="Remove Question">'+'                   <i class="fa fa-trash"></i>')+"               </button>"+"       </div>")+"   </div>"+"</div>")+`   <div class="panel-body hidden" id="collapse${t.question_id}">`+'       <div class="row">')+`           <div class="col-sm-12 col-md-${t.video_file_name?"8":"12"}">`)+'               <h1 class="text-medium">'+"                   <strong>")+("                   "+t.question_title))+("                   "+(1==t.question_required?'<span class="text-danger">*</span>':""))+"                   </strong>")+"               </h1>"+'               <p class="text-medium">')+("                   "+t.question_content))+"               </p>"+"           </div>",i=(i=(i=t.video_file_name&&"none"!=t.video_file_name?(i+='           <div class="col-sm-12 col-md-4">')+getFileWithTag(t.video_file_name,{style:"width: 100%",controls:"true"})+"           </div>":i)+"       </div>"+"       <br/>")+'       <div class="row">'+'           <div class="col-sm-12 col-md-12">',"text"===t.question_type)i+=`<textarea type="text" name="textarea_${t.question_id}" class="form-control cs-text-answer" is_required="${1==t.question_required?1:0}" rows="5" style="resize: none;" placeholder="Write the answer here...."></textarea>`;else if("yes_no"===t.question_type)i=(i=(i=(i=(i=(i=(i+='<div class="row">')+`	<div class="col-sm-12">`+'       <label class="control control--radio">')+`           <input type="radio" name="yes_no_${t.question_id}" value="yes"> Yes`+`	        <div class="control__indicator"></div>`)+`	    </label> &nbsp;&nbsp;`+`		<label class="control control--radio">`)+`			<input type="radio" name="yes_no_${t.question_id}" value="no"> No`)+`			<div class="control__indicator"></div>`+`		</label>`)+`	</div>`+"</div>";else if("rating"===t.question_type){i=(i=i+'<div class="row">'+'   <div class="col-sm-12">')+'       <div class="rating-container" style="text-align: center; font-size: 2rem; display: flex; justify-content: center; width: 100%;">'+'           <div class="rating-stars" style="display: flex; justify-content: space-between; width: 100%;">';for(let e=1;e<=t.choice_list.rating;e++)i=(i=(i+='               <label class="control control--radio" style="cursor: pointer; flex: 1; text-align: center;">')+`                   <input type="radio" name="rating_${t.question_id}" value="${e}" style="display: none;">`)+'                   <span class="star" style="color: #ccc; font-size: 50px;">&#9733;</span>               </label>';i=(i=(i=(i=(i=(i=i+"           </div>"+"       </div>")+"   </div>"+'   <div class="col-xs-6 text-left">')+`           <span class="rating-text text-medium" style="margin-right: 10px;">${t.choice_list.min||"Poor"}</span>`)+"   </div>"+'   <div class="col-xs-6 text-right">')+`           <span class="rating-text text-medium" style="margin-left: 10px;">${t.choice_list.max||"Excellent"}</span>`)+"   </div>"+"</div>"}else{var s,n="multiple_choice"===t.question_type?"checkbox":"radio",o=("multiple_choice"===t.question_type?"multiple_choice":"single_choice")+"_"+t.question_id;for(s in t.choice_list){var l=t.choice_list[s];i+=`
            <label class="control control--${n}">
                <input type="${n}" name="${o}" value="${l.answer_choice}"> ${l.answer_choice}
                <div class="control__indicator"></div>
            </label> &nbsp;&nbsp;`}}return i=(i=i+"           </div>"+"       </div>")+"   </div>"+"</div>"}function generateQuestionPreviewView(t){t.choices_json&&(t.choice_list=JSON.parse(t.choices_json));let i="";if(i+=`<div class="panel panel-default jsQuestionView" data-id="${t.question_id}">`,"tag"===t.question_type&&(i=(i=(i=(i=(i=(i=(i+='<div class="panel-heading">')+'   <div class="row">       <div class="col-xs-8">')+`           <h1 class="panel-text-heading text-medium jsCollapseBtn" data-target="collapse${t.question_id}">`+"               <strong>")+`               <i class="fa fa-${getIconFromQuestionType(t.question_type)}"></i>`)+"               "+t.question_title+"               </strong>")+"           </h1>       </div>")+"   </div></div>"),"tag"!=t.question_type)if(i=(i=(i=(i=(i=(i=(i=(i=(i=i+`   <div class="panel-body" id="collapse${t.question_id}">`+'       <div class="row">')+`           <div class="col-sm-12 col-md-${t.video_file_name?"8":"12"}">`)+'               <h1 class="text-medium">'+"                   <strong>")+`               <i class="fa fa-${getIconFromQuestionType(t.question_type)}"></i>`)+("                   "+t.question_title))+("                   "+(1==t.question_required?'<span class="text-danger">*</span>':""))+"                   </strong>")+"               </h1>"+'               <p class="text-medium">')+("                   "+t.question_content))+"               </p>"+"           </div>",i=(i=(i=t.video_file_name&&"none"!=t.video_file_name?(i+='           <div class="col-sm-12 col-md-4">')+getFileWithTag(t.video_file_name,{style:"width: 100%",controls:"true"})+"           </div>":i)+"       </div>"+"       <br/>")+'       <div class="row">'+'           <div class="col-sm-12 col-md-12">',"text"===t.question_type)i+=`<textarea type="text" name="textarea_${t.question_id}" class="form-control cs-text-answer" is_required="${1==t.question_required?1:0}" rows="5" style="resize: none;" placeholder="Write the answer here...."></textarea>`;else if("yes_no"===t.question_type)i=(i=(i=(i=(i=(i=(i+='<div class="row">')+`	<div class="col-sm-12">`+'       <label class="control control--radio">')+`           <input type="radio" name="yes_no_${t.question_id}" value="yes"> Yes`+`	        <div class="control__indicator"></div>`)+`	    </label> &nbsp;&nbsp;`+`		<label class="control control--radio">`)+`			<input type="radio" name="yes_no_${t.question_id}" value="no"> No`)+`			<div class="control__indicator"></div>`+`		</label>`)+`	</div>`+"</div>";else if("rating"===t.question_type){i=(i=i+'<div class="row">'+'   <div class="col-sm-12">')+'       <div class="rating-container" style="text-align: center; font-size: 2rem; display: flex; justify-content: center; width: 100%;">'+'           <div class="rating-stars" style="display: flex; justify-content: space-between; width: 100%;">';for(let e=1;e<=t.choice_list.rating;e++)i=(i=(i+='               <label class="control control--radio" style="cursor: pointer; flex: 1; text-align: center;">')+`                   <input type="radio" name="rating_${t.question_id}" value="${e}" style="display: none;">`)+'                   <span class="star" style="color: #ccc; font-size: 50px;">&#9733;</span>               </label>';i=(i=(i=(i=(i=(i=i+"           </div>"+"       </div>")+"   </div>"+'   <div class="col-xs-6 text-left">')+`           <span class="rating-text text-medium" style="margin-right: 10px;">${t.choice_list.min||"Poor"}</span>`)+"   </div>"+'   <div class="col-xs-6 text-right">')+`           <span class="rating-text text-medium" style="margin-left: 10px;">${t.choice_list.max||"Excellent"}</span>`)+"   </div>"+"</div>"}else{var e,s="multiple_choice"===t.question_type?"checkbox":"radio",n=("multiple_choice"===t.question_type?"multiple_choice":"single_choice")+"_"+t.question_id;for(e in t.choice_list){var o=t.choice_list[e];i+=`
            <label class="control control--${s}">
                <input type="${s}" name="${n}" value="${o.answer_choice}"> ${o.answer_choice}
                <div class="control__indicator"></div>
            </label> &nbsp;&nbsp;`}}return i=(i=i+"           </div>"+"       </div>")+"   </div>"+"</div>"}function getIconFromQuestionType(e){return"rating"===e?"star-o":"text"===e?"comment-o":"tag"===e?"align-left":"square-o"}function getFileWithTag(e,t={},i){let s="";if(Object.keys(t).length)for(var n in t)s+=`${n}="${t[n]}" `;return null!==e.match(/^(https?\:\/\/)?((www\.)?youtube\.com|youtu\.be)\/.+$/g)?`
		<div class="embed-responsive embed-responsive-16by9">
			<iframe class="embed-responsive-item" src="https://www.youtube.com/embed/${youtubeLinkParser(e)}" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
		</div>`:null!==e.match(/^(http|https)?:\/\/(www\.|player\.)?vimeo\.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|video\/|)(\d+)(?:|\/\?)$/gim)?`
		<div class="embed-responsive embed-responsive-16by9">
			<iframe class="embed-responsive-item" src="https://player.vimeo.com/video/${vimeoLinkParser(e)}"  frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
		</div>`:null!==e.match(/.zip/i)?`
		<a class="btn btn-black" 
			title="Download file"
			placement="top"
			href="${getFileWithUrl(e)}"
		><i class="fa fa-download" aria-hidden="true"></i>&nbsp;Download file</a>`:null!==e.match(/.ppt|.pptx/i)?`
		<iframe 
			${s}
			src="https://view.officeapps.live.com/op/embed.aspx?src=${getFileWithUrl(e)}"
			frameborder="0"
		></iframe>`:null!==e.match(/.jpg|.jpeg|.png|.gif/i)?`
		<img 
			${s}
			src="${getFileWithUrl(e)}"
		>`:null!==e.match(/.mp3|.wav/i)?`
		 <audio controls>
        	<source src="${getFileWithUrl(e)}" type="audio/mp3">
    	</audio>`:`
        <video ${s}>
            <source type="video/mp4" src="${getFileWithUrl(e)}" />
        </video>`}function youtubeLinkParser(e){e=e.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/);return!(!e||11!=e[7].length)&&e[7]}function getFileWithUrl(e){return"https://automotohrattachments.s3.amazonaws.com/"+e}function vimeoLinkParser(e){e=e.match(/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/);return!(!e||9!=e[5].length)&&e[5]}function getSlug(e){return $("<div>").html(e).text().trim().toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}function generateRandomAndUniqueId(){return Math.floor(1e6*Math.random())+1+"-"+Date.now()}$(function(){window.makeSecureCallToApiServer=async function(s,n){return new Promise(function(t,i){var e={url:""+apiURL+s,headers:{Authorization:"Bearer "+apiAccessToken},cache:!1},e=$.extend(!0,{},n,e);$.ajax(e).fail(function(e){i(e)}).done(function(e){t(e)})})},$(document).on("click",".rating-stars .control--radio",function(){$(this).siblings().find(".star").css("color","#fd7a2a"),$(this).prevAll().find(".star").css("color","#fd7a2a"),$(this).find(".star").css("color","#fd7a2a"),$(this).nextAll().find(".star").css("color","#ccc")}),$(document).on("click",".jsCollapseBtn",function(e){e.preventDefault(),$("#"+$(this).data("target")).toggleClass("hidden")})});
