!function(){let o,s=0;$(document).on("click",".jsModalCancel",t=>{t.preventDefault(),"yes"==$(t.target).data("ask")?alertify.confirm("Any unsaved changes will be lost.",()=>{$(t.target).closest(".csModal").fadeOut(300),$("body").css("overflow-y","auto"),$("#ui-datepicker-div").remove(),$(".jsMsModal").remove()}).set("labels",{ok:"LEAVE",cancel:"NO, I WILL STAY"}).set("title","Notice!"):($(t.target).closest(".csModal").fadeOut(300),$("body").css("overflow-y","auto"),$(".jsMsModal").remove(),$("#ui-datepicker-div").remove())}),window._ml=window.ml=function(t,e,a){e=void 0===e?".jsIPLoader":`.jsIPLoader[data-page="${e}"]`,void 0!==o&&document.getElementsByClassName("csModalBody").length&&(document.getElementsByClassName("csModalBody")[0].scrollTop=0),void 0!==o&&t&&$(".jsIPLoader").height($(`#${o}Body`).height()+s),void 0===t||!1===t?$(e).hide():$(e).show(),void 0!==a&&$(".jsIPLoaderText").html(a),t||$(".jsIPLoaderText").html("Please wait, while we are generating a preview.")},window.Model=window.Modal=function(t,e){var a=`
			<!-- Custom Modal -->
			<div class="csModal jsMsModal" id="${t.Id}">
				<div class="${t.Cl||"container"}">
					<div class="csModalHeader">
						<h3 class="csModalHeaderTitle">
							<span>${t.Title}</span>
							<span class="csModalButtonWrap">
							${void 0!==t.Buttons&&0!==t.Buttons.length?t.Buttons.join(""):""}
								<button class="btn btn-black btn-cancel csW jsModalCancel" ${void 0===t.Ask?"":'data-ask="no"'} title="Close this window">Cancel</button>
							</span>
							<div class="clearfix"></div>
						</h3>
					</div>
					<div class="csModalBody">
						<div class="csIPLoader jsIPLoader" data-page="${t.Loader}">
							<div class="csIPLoaderBox">
								<i class="fa fa-circle-o-notch fa-spin" aria-hidden="true"></i><br><br>
								<br>
								<span class="jsIPLoaderText">Please wait while we process your request.</span>
							</div>
						</div>
						${t.Body}
					</div>
					<div class="clearfix"></div>
				</div>
			</div>
			`;o=t.Id,s=$(`#${t.Id} .csModalHeader`).height()+50,$(".jsMsModal").remove(),$("#"+t.Id).remove(),$("body").append(a),$("#"+t.Id).fadeIn(300),$("body").css("overflow-y","hidden"),$(`#${t.Id} .csModalBody`).css("top",s),void 0!==e&&e()}}(),$(function(){let a,l,n=[],t=jsMapData;async function e(){$("#map").css("height","440px");var{}=await google.maps.importLibrary("marker");l=new google.maps.Map(document.getElementById("map"),{center:{lat:parseFloat(t[0].lat),lng:parseFloat(t[0].lng)},mapTypeId:"roadmap",mapId:"4504f8b37365c3d0"});const s=[];t.map(function(t,e){var a,o;t.lat&&t.lat&&(n.push({lat:parseFloat(t.lat),lng:parseFloat(t.lng)}),new google.maps.marker.AdvancedMarkerElement({map:l,content:function(t){var e=document.createElement("div");-1!=t.title.search("Clocked")?e.className="employee_clocked_activity":e.className="employee_break_activity";return e.textContent=t.title,e}(t),position:{lat:parseFloat(t.lat),lng:parseFloat(t.lng)},title:t.name}),t.constraint&&(a=new google.maps.Circle({map:l,center:{lat:parseFloat(t.constraint.lat),lng:parseFloat(t.constraint.lng)},radius:parseInt(5e4),strokeColor:"red",strokeOpacity:.8,strokeWeight:2,fillColor:"red",fillOpacity:.35}),o=new google.maps.InfoWindow({content:t.constraint.title}),google.maps.event.addListener(a,"click",function(t){o.setPosition(t.latLng),o.open(this.map)}),s.push(new google.maps.LatLng(parseFloat(t.constraint.lat),parseFloat(t.constraint.lng)))),s.push(new google.maps.LatLng(parseFloat(t.lat),parseFloat(t.lng))))}),new google.maps.Polyline({path:n,geodesic:!0,strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:2}).setMap(l);let e=new google.maps.LatLngBounds;s.forEach(t=>{e.extend(t)}),l.fitBounds(e)}t.length?function t(e){"undefined"==typeof google?a=setInterval(function(){t(e)},3e3):(clearInterval(a),e())}(e):$("#map").html('<p class="alert alert-info text-center">No footprints yet!</p>');{let a="";if(logs.length){let e=0;logs.forEach(function(t){e+=parseFloat(t.duration),a=(a=(a=(a=(a=(a+='<tr data-id="'+t.sid+'">')+'\t<td class="csVerticalAlignMiddle">\t\t<p>')+t.text)+"\t\t</p>\t</td>")+'\t<td class="csVerticalAlignMiddle text-right">\t\t<p>')+moment(t.startTime,"YYYY-MM-DD HH:mm:ss").format("hh:mm a")+"\t\t - ",t.endTime?a+=moment(t.endTime,"YYYY-MM-DD HH:mm:ss").format("hh:mm a"):a+="\t\tMissing",a+="\t\t</p>\t</td>",a=(a=(a=(a=t.location.onSiteFlag?(a=(a+='\t<td class="csVerticalAlignMiddle text-center ">')+'\t\t<p><i class="fa fa-check-circle text-success"></i>')+"\t\t</p>\t</td>":(a=(a=(a+='\t<td class="csVerticalAlignMiddle text-center">')+'\t\t<p><i class="fa fa-times-circle text-danger"></i><br />')+t.location.text)+"\t\t</p>\t</td>")+'\t<td class="csVerticalAlignMiddle text-right">\t\t<p>')+t.durationText+"\t\t</p>")+"\t</td></tr>"}),$(".jsTimeEntriesBox tbody").html(a),a=(a=(a=(a="<tr>")+'\t<th scope="col" colspan="4" class="csVerticalAlignMiddle text-right">\tTotal: ')+convertSecondsToTime(e))+"\t</th></tr>",$(".jsTimeEntriesBox tfoot").html(a)}else $(".jsTimeEntriesBox tbody").html('<tr><td colspan="4"><p class="alert alert-info text-center">No time entries yet!</p></td></tr>')}});
