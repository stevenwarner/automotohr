$(function(){let t=null;$(document).on("click",".jsCompanyBankAccountAddBtn",function(n){n.preventDefault();let o=callButtonHook($(this),!0);Modal({Title:"Add A Company Bank Account",Id:"jsCompanyBankAccount",Loader:"jsCompanyBankAccountLoader",Body:'<div id="jsCompanyBankAccountBody"></div>'},function(){var n=o;null!==t&&t.abort(),t=$.ajax({url:baseUrl("settings/company/accounts/add"),method:"GET"}).always(function(){t=null,callButtonHook(n,!1)}).fail(handleErrorResponse).done(function(n){$("#jsCompanyBankAccountBody").html(n.view),ml(!1,"jsCompanyBankAccountLoader"),$("#jsCompanyBankAccountForm").validate({rules:{jsBankName:{required:!0},jsRoutingNumber:{required:!0,minlength:9,maxlength:9,pattern:/\d/},jsAccountNumber:{required:!0,minlength:3,pattern:/\d/},jsAccountType:{required:!0}},submitHandler:function(n){!function o(a){if(null!==t)return!1;let n=callButtonHook($(".jsCompanyBankAccountFormBtn"),!0);t=$.ajax({url:baseUrl("settings/company/accounts/add"),method:"POST",data:a}).always(function(){t=null,callButtonHook(n,!1)}).fail(handleErrorResponse).done(function(n){if(n.required)return _confirm(n.message,function(){a.confirmed=!0,o(a)});_success(n.message,function(){$("#jsCompanyBankAccount .jsModalCancel").click(),window.location.refresh()})})}(formArrayToObj($(n).serializeArray(),!0))}})}),$("#jsCompanyBankAccount .jsModalCancel").click(function(){t=null,callButtonHook(o,!1)})})})});
