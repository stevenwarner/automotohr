$(function(){let a=null;$(document).on("click",".jsCompanyBankAccountAddBtn",function(n){n.preventDefault();let o=callButtonHook($(this),!0);Modal({Title:"Add A Company Bank Account",Id:"jsCompanyBankAccount",Loader:"jsCompanyBankAccountLoader",Body:'<div id="jsCompanyBankAccountBody"></div>'},function(){var n=o;null!==a&&a.abort(),a=$.ajax({url:baseUrl("settings/company/accounts/add"),method:"GET"}).always(function(){a=null,callButtonHook(n,!1)}).fail(handleErrorResponse).done(function(n){$("#jsCompanyBankAccountBody").html(n.view),ml(!1,"jsCompanyBankAccountLoader"),$("#jsCompanyBankAccountForm").validate({rules:{jsBankName:{required:!0},jsRoutingNumber:{required:!0,minlength:9,maxlength:9,pattern:/\d/},jsAccountNumber:{required:!0,minlength:3,pattern:/\d/},jsAccountType:{required:!0}},submitHandler:function(n){!function o(t){if(null!==a)return!1;let n=callButtonHook($(".jsCompanyBankAccountFormBtn"),!0);a=$.ajax({url:baseUrl("settings/company/accounts/add"),method:"POST",data:t}).always(function(){a=null,callButtonHook(n,!1)}).fail(handleErrorResponse).done(function(n){if(n.required)return _confirm(n.message,function(){t.confirmed=!0,o(t)});_success(n.message,function(){$("#jsCompanyBankAccount .jsModalCancel").click(),window.location.refresh()})})}(formArrayToObj($(n).serializeArray(),!0))}})}),$("#jsCompanyBankAccount .jsModalCancel").click(function(){a=null,callButtonHook(o,!1)})})}),$(document).on("click",".jsCompanyBankAccountDeleteBtn",function(n){n.preventDefault();let t=$(this).closest("tr").data("id"),a=$(this);return _confirm("Do you really want to delete this bank account?",function(){var n,o;n=t,o=callButtonHook(a,!0),$.ajax({url:baseUrl("settings/company/accounts/"+n),method:"DELETE"}).always(function(){callButtonHook(o,!1)}).fail(handleErrorResponse).done(function(n){_success(n.message,window.location.refresh)})})})});
