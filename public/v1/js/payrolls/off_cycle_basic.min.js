$(function(){let a=null,i=getSegment(1);function e(){$(".jsShowSchedule").text($('[name="payroll[withholding_pay_period]"] option:selected').val().toLowerCase())}$(".jsSelectAll").click(function(){$(".jsSelectSingle").prop("checked",$(this).prop("checked"))}),$(".jsSelectSingle").click(function(){$(".jsSelectAll").prop("checked",$(".jsSelectSingle").length===$(".jsSelectSingle:checked").length)}),$(".jsToggleTaxView").click(function(e){e.preventDefault(),$(".jsTaxView").toggleClass("hidden")}),$('[name="payroll[withholding_pay_period]"]').change(e),$('[name="payroll[fixed_withholding_rate]"]').click(function(){"true"==$(this).val()?($(".jsSelectNonSupplementBox").addClass("hidden"),$(".jsSelectSupplementBox").removeClass("hidden")):($(".jsSelectNonSupplementBox").removeClass("hidden"),$(".jsSelectSupplementBox").addClass("hidden"))}),$(".jsOffCycleSave").click(function(e){e.preventDefault();let l={off_cycle_reason:$('[name="payroll[off_cycle_reason]"]:checked').val()||"",start_date:$('[name="payroll[start_date]"]').val().trim()||"",end_date:$('[name="payroll[end_date]"]').val().trim()||"",check_date:$('[name="payroll[check_date]"]').val().trim()||"",skip_regular_deductions:$('[name="payroll[skip_regular_deductions]"]:checked').val()||"",withholding_pay_period:$('[name="payroll[withholding_pay_period]"] option:selected').val()||"",fixed_withholding_rate:$('[name="payroll[fixed_withholding_rate]"]:checked').val()||"",employees:[]};$('[name="payroll[employees]"]:checked').map(function(){l.employees.push($(this).val())});var e=[];if(l.off_cycle_reason||e.push('"Off cycle reason" is missing.'),l.start_date||e.push('"Start date" is missing.'),l.end_date||e.push('"End date" is missing.'),l.check_date||e.push('"Check date" is missing.'),""==l.skip_regular_deductions&&e.push('"Deductions and contributions" is missing.'),l.withholding_pay_period||e.push('"Withholding pay period" is missing.'),""==l.fixed_withholding_rate&&e.push('"Withholding pay period" is missing.'),l.employees.length||e.push("Please select at least one employee."),e.length)return _error(getErrorsStringFromArray(e));e=l,null===a&&(a=$.ajax({url:baseUrl("payrolls/off-cycle/basics"),method:"POST",data:e}).always(function(){a=null,ml(!1,"jsPageLoader")}).fail(handleErrorResponse).done(function(e){_success(e.msg,function(){window.location.href=baseUrl(`payrolls/${i}/${e.id}/hours_and_earnings`)})}))}),e(),$(".jsDatePicker").daterangepicker({showDropdowns:!0,singleDatePicker:!0,autoApply:!0,locale:{format:"MM/DD/YYYY"}}),ml(!1,"jsPageLoader")});
