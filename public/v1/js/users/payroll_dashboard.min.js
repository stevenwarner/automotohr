$(function(){let l=null;const r="jsModalPage",n=r+"Loader",s=r+"Body";function a(e,a,o){Modal({Id:r,Title:e,Body:'<div id="'+s+'"></div>',Loader:n},function(){var e=a,r=o;null!==l&&l.abort(),l=$.ajax({url:baseUrl("payrolls/page/"+e+"/"+profileUserInfo.userId+"/"+profileUserInfo.userType),method:"GET"}).always(function(){l=null}).fail(handleErrorResponse).done(function(e){$("#"+s).html(e.view),r(e)})})}function o(e,r){if(null===l){const a=callButtonHook(r,!0);l=$.ajax({url:baseUrl("payrolls/page/update"),method:"POST",data:e,processData:!1,contentType:!1}).always(function(){callButtonHook(a,!1),l=null}).fail(handleErrorResponse).done(function(e){return _success(e.msg,function(){window.location.href=baseUrl("payrolls/dashboard/"+profileUserInfo.userType+"/"+profileUserInfo.userId)})})}}$(".jsEditPaySchedule").click(function(e){e.preventDefault(),a(profileUserInfo.nameWithRole,"pay_schedule",function(){ml(!1,n),$("#jsPagePayScheduleForm").validate({rules:{pay_schedule:{required:!0}},messages:{pay_schedule:{required:"Please select a pay schedule."}},submitHandler:function(e){e=formArrayToObj($(e).serializeArray());return e.append("page","pay_schedule"),e.append("userId",profileUserInfo.userId),e.append("userType",profileUserInfo.userType),o(e,$(".jsPagePayScheduleBtn"))}})})}),$(".jsEditJobWage").click(function(e){e.preventDefault(),a(profileUserInfo.nameWithRole,"job_and_wage",function(){ml(!1,n),$(".jsMinimumWages").select2({closeOnSelect:!1}),$(".jsHireDate").daterangepicker({singleDatePicker:!0,showDropdowns:!0,autoApply:!0,locale:{format:"MM/DD/YYYY"}}),$("#jsPageJobWageForm").validate({rules:{employment_type:{required:!0},flsa_status:{required:!0},per:{required:!0},hire_date:{required:!0},rate:{required:!0},overtime_rule:{required:!0}},submitHandler:function(e){e=formArrayToObj($(e).serializeArray());return e.append("page","pay_schedule"),e.append("userId",profileUserInfo.userId),e.append("userType",profileUserInfo.userType),o(e,$(".jsPageJobWageBtn"))}})})})});
