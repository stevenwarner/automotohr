String.prototype.verifyEmail=function(){return null!==this.match(/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/g)},String.prototype.isValidYoutubeLink=function(){return null!==this.match(/^(https?\:\/\/)?((www\.)?youtube\.com|youtu\.be)\/.+$/g)},String.prototype.isValidVimeoLink=function(){return null!==this.match(/^(http|https)?:\/\/(www\.|player\.)?vimeo\.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|video\/|)(\d+)(?:|\/\?)$/gim)},String.prototype.isValidInteger=function(){return null!==this.match(/^[1-9]\d*$/g)},String.prototype.toSlug=function(){return this.replace(/[^a-z0-9]/gi,"-").replace(/-+/g,"-").replace(/-$/,"").toLowerCase()};{function ml(e,t,a){e?($(".jsIPLoader[data-page='"+t+"']").show(),$(".jsIPLoader[data-page='"+t+"']").find(".jsIPLoaderText").html(a||"Please wait, while we are processing your request.")):($(".jsIPLoader[data-page='"+t+"']").hide(),$(".jsIPLoader[data-page='"+t+"']").find(".jsIPLoaderText").html("Please wait, while we are processing your request."))}}{function CB(){}}{function getErrorsStringFromArray(e,t){return"<strong><p>"+(t||"Please, resolve the following errors")+"</p></strong><br >"+e.join("<br />")}}{function getBrowserVersion(){var e,t=navigator.userAgent,a=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(a[1])?"IE "+((e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""):"Chrome"===a[1]&&null!=(e=t.match(/\b(OPR|Edge)\/(\d+)/))?e.slice(1).join(" ").replace("OPR","Opera"):(a=a[2]?[a[1],a[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&a.splice(1,1,e[1]),a)}}{function generateBrowserAlert(){var e={chrome:55,edge:14,firefox:52,opera:42,safari:10.1,chromeandroid:55,firefoxandroid:52,operaandroid:42,safariios:10.3,samsumginternet:6},t=getBrowserVersion();if(e[t[0].toLowerCase()]&&t[1]<e[t[0].toLowerCase()])return alert("This module require '"+t[0]+"' with version greater or equal then '"+t[1]+"'.")}}{function uploadFile(a){return new Promise(function(t){var e=new FormData;e.append("file",a),$.ajax({url:window.location.origin+"uploader",method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:e}).success(function(e){t(e)}).fail(function(e){t(e.responseText)})})}}{function uploadStream(e){return new Promise(function(t){$.ajax({url:window.location.origin+"uploader/stream",method:"POST",timeout:0,contentType:"application/json",data:JSON.stringify({stream:e})}).success(function(e){t(e)}).fail(function(){t({})})})}}"undefined"!=typeof $&&($(".jsFilterPanel").height($(document).height()),$(document).on("click",".jsFilterSectionBtn",function(e){e.preventDefault();e=$(this).data("key");$(".jsFilterSection[data-key='"+e+"']").removeClass("hidden")}),$(document).on("click",".jsFilterSectionHideBtn",function(e){e.preventDefault();e=$(this).data("key");$(".jsFilterSection[data-key='"+e+"']").addClass("hidden")}),$(document).on("click",".jsExpandAdminView",function(e){e.preventDefault(),$(this).toggleClass("btn-success"),$(".jsExpandContent").toggleClass("col-sm-12 col-md-12 col-lg-12 col-xs-12 col-lg-9 col-md-9 col-sm-9"),$(".jsExpandSideBar").toggleClass("hidden")}));{function handleErrorResponse(e){return 0==e.status?alertify.alert("Errors!","The connection to the server has been lost. Kindly reach out to the system administrator for assistance.",CB):404==e.status?_error("The requested route doesn't exists."):(e=e.responseJSON||JSON.parse(e.responseText),alertify.closeAll(),alertify.alert("Errors!",e.errors.join("<br />"),CB).setting({autoReset:!0,frameless:!1}))}}{function getQuestionsFromArray(e,t){return"<strong><p>"+(t||"Please, provide the following question answer.")+"</p></strong><br >"+e.join("<br />")}}{function baseUrl(e=""){return e=e.replace(/^\//g,""),window.location.origin+"/"+e}}{function callButtonHook(e,t=!0,a=!1){if(t)return t={pointer:e,html:e.html()},e.html(a?'<i class="fa-solid fa-circle-notch fa-spin csW csF16" aria-hidden="true"></i>':'<i class="fa fa-circle-o-notch fa-spin csW csF16" aria-hidden="true"></i>'),e.off("click"),t;e.pointer.html(e.html)}}{function _error(e){alertify.alert("Error!",e,CB).setHeader("Error!").set("labels",{ok:"Ok",cancel:"cancel"}).setting({autoReset:!0,frameless:!1})}}{function _success(e,t=CB){alertify.alert("Success!",e,t).setHeader("Success!").set("labels",{ok:"Ok",cancel:"cancel"}).setting({autoReset:!0,frameless:!1})}}{function _confirm(e,t){alertify.confirm(e,t,CB).setHeader("Confirm").set("labels",{ok:"Yes",cancel:"No"}).setting({autoReset:!0,frameless:!1})}}{function _showNotification(e){return alertify.alert('<div class="row"> \t\t\t\t\t<div class="col-sm-12">\t\t\t\t\t\t<p class="csF16 text-center" style="margin-top: 25px;">'+e+"</p> \t\t\t\t\t<div> \t\t\t\t</div>").setting({closable:!1,frameless:!0,autoReset:!0})}}{function getSegment(e){let t=window.location.pathname.split("/");return(t=t?.filter(function(e){return e?.trim()}))[e]}}{function getRandomCode(){return(new Date).getTime()+Math.floor(5e6*Math.random())}}{function closeAlert(e){e.setting("closable",!0).close()}}{function formArrayToObj(e,t=!1){if(t){let t={};return e.map(function(e){t[e.name]=e.value}),t}let a=new FormData;return e.map(function(e){a.append(e.name,e.value)}),a}}{function nl2br(e,t){return null==e?"":((e=e.replace(/<br(.*?)>/gi,""))+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+(t||void 0===t?"<br />":"<br>")+"$2")}}{function isValidFile(e){return 0!==Object.keys(e).length&&!1===e.hasError}}void 0===window.location.refresh&&(window.location.refresh=function(){window.location.href=window.location.href}),void 0!==jQuery&&void 0!==jQuery.validator&&(jQuery.validator.addMethod("timeIn12Format",function(e){return e.match(/^\d{1,2}:\d{1,2}\s(pm|am)$/gi)},"The time format is invalid."),jQuery.validator.addMethod("greaterThanZero",function(e){return 0<e},"The value must be greater than zero."));{function getSearchParam(e){return new URLSearchParams(window.location.search).get(e)||!1}}{function convertSecondsToTime(e){var t=Math.floor(e/3600),e=Math.floor(e%3600/60);return t+"h"+(0<e?" "+e+"m":"")}}{function _cur(e,t=!1){return e&&(t?numberWithCommas(parseFloat(e).toFixed(2)):parseFloat(e).toFixed(2))}}{function numberWithCommas(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}}!function(){let n,o=0;$(document).on("click",".jsModalCancel",e=>{e.preventDefault(),"yes"==$(e.target).data("ask")?alertify.confirm("Any unsaved changes will be lost.",()=>{$(e.target).closest(".csModal").fadeOut(300),$("body").css("overflow-y","auto"),$("#ui-datepicker-div").remove(),$(".jsMsModal").remove()}).set("labels",{ok:"LEAVE",cancel:"NO, I WILL STAY"}).set("title","Notice!"):($(e.target).closest(".csModal").fadeOut(300),$("body").css("overflow-y","auto"),$(".jsMsModal").remove(),$("#ui-datepicker-div").remove())}),window._ml=window.ml=function(e,t,a){t=void 0===t?".jsIPLoader":`.jsIPLoader[data-page="${t}"]`,void 0!==n&&document.getElementsByClassName("csModalBody").length&&(document.getElementsByClassName("csModalBody")[0].scrollTop=0),void 0!==n&&e&&$(".jsIPLoader").height($(`#${n}Body`).height()+o),void 0===e||!1===e?$(t).hide():$(t).show(),void 0!==a&&$(".jsIPLoaderText").html(a),e||$(".jsIPLoaderText").html("Please wait, while we are generating a preview.")},window.Model=window.Modal=function(e,t){var a=`
			<!-- Custom Modal -->
			<div class="csModal jsMsModal" id="${e.Id}">
				<div class="${e.Cl||"container"}">
					<div class="csModalHeader">
						<h3 class="csModalHeaderTitle">
							<span>${e.Title}</span>
							<span class="csModalButtonWrap">
							${void 0!==e.Buttons&&0!==e.Buttons.length?e.Buttons.join(""):""}
								<button class="btn btn-black btn-cancel csW jsModalCancel" ${void 0===e.Ask?"":'data-ask="no"'} title="Close this window">Cancel</button>
							</span>
							<div class="clearfix"></div>
						</h3>
					</div>
					<div class="csModalBody">
						<div class="csIPLoader jsIPLoader" data-page="${e.Loader}">
							<div class="csIPLoaderBox">
								<i class="fa fa-circle-o-notch fa-spin" aria-hidden="true"></i><br><br>
								<br>
								<span class="jsIPLoaderText">Please wait while we process your request.</span>
							</div>
						</div>
						${e.Body}
					</div>
					<div class="clearfix"></div>
				</div>
			</div>
			`;n=e.Id,o=$(`#${e.Id} .csModalHeader`).height()+50,$(".jsMsModal").remove(),$("#"+e.Id).remove(),$("body").append(a),$("#"+e.Id).fadeIn(300),$("body").css("overflow-y","hidden"),$(`#${e.Id} .csModalBody`).css("top",o),void 0!==t&&t()}}(),$(function(){let a=0,n=[];function t(){$.ajax({url:baseUrl("payrolls/"+companyId+"/employees/get"),method:"GET"}).success(function(e){$("#jsPayrollAddEmployeesModalBody").html(e.view)}).fail(handleErrorResponse).always(function(){_ml(!1,"jsPayrollAddEmployeesModalLoader")})}$(document).on("click",".jsPayrollAddEmployees",function(e){e.preventDefault(),Modal({Id:"jsPayrollAddEmployeesModal",Loader:"jsPayrollAddEmployeesModalLoader",Title:"Employees List",Body:'<div id="jsPayrollAddEmployeesModalBody"></div>'},t)}),$(document).on("click",".jsPayrollOnboardEmployees",function(e){if(e.preventDefault(),n=[],$(".jsEmployeesList:checked").map(function(){n.push($(this).val())}),0===n.length)return _error("Please select at least one employee.");_ml(!0,"jsPayrollAddEmployeesModalLoader","Please wait, while we are processing your request."),a=0,function e(){if(void 0===n[a])return $("#jsPayrollAddEmployeesModal .jsModalCancel").trigger("click"),_success("Hurray! You have successfully onboard the employees.",function(){window.location.reload()});let t=$('.jsEmployeesList[value="'+n[a]+'"]').parent().text().trim();_ml(!0,"jsPayrollAddEmployeesModalLoader",'Please wait, while we are onboarding <strong>"'+t+'"</strong>. <br/> This might take several minutes.');$.ajax({url:baseUrl("payrolls/onboard/employee/"+n[a]),method:"POST",data:{}}).success(function(){a++,e()}).fail(handleErrorResponse).always(function(){XHR=null})}()}),$.ajaxSetup({cache:!1}),_ml(!1,"pageLoader")}),$(function(){let n=null,o=0;let t,r="jsEmployeeFlowModal";function s(t){_ml(!0,r+"Loader"),n=$.ajax({url:baseUrl("payrolls/flow/employee/"+o+"/"+t),method:"GET",caches:!1}).success(function(e){$(`#${r}Body`).html(e.view),"personal_details"===t&&($(".jsEmployeeFlowDateOfBirth").datepicker({format:"mm/dd/yyyy",changeYear:!0,changeMonth:!0,yearRange:"-100:+0"}),$(".jsEmployeeFlowStartDate").datepicker({format:"mm/dd/yyyy",changeYear:!0,changeMonth:!0,yearRange:"-100:+10"}))}).fail(handleErrorResponse).always(function(){n=null,_ml(!1,r+"Loader")})}$(".jsPayrollEmployeeEdit").click(function(e){e.preventDefault(),o=$(this).closest("tr").data("id"),t=$(this).closest("tr").data("employee"),0===o?alertify.alert("Error!","Please select an employee."):Modal({Title:"Onboard Flow for "+t,Id:r,Loader:r+"Loader",Body:`<div id="${r}Body"></div>`},function(){s("summary")})}),$(document).on("click",".jsMenuTrigger",function(e){e.preventDefault(),s($(this).data("step"))}),$(document).on("click",".package-info-box",function(e){$(".select-package:not(:checked)").parent().removeClass("selected-package"),$(".select-package:checked").parent().addClass("selected-package")}),$(document).on("click",".jsEmployeeFlowSavePersonalDetailsBtn",function(e){var t;return e.preventDefault(),null===n&&(e=[],(t={first_name:$(".jsEmployeeFlowFirstName").val().trim(),middle_initial:$(".jsEmployeeFlowMiddleInitial").val().trim(),last_name:$(".jsEmployeeFlowLastName").val().trim(),location_uuid:$(".jsEmployeeFlowWorkAddress option:selected").val(),start_date:$(".jsEmployeeFlowStartDate").val().trim(),email:$(".jsEmployeeFlowEmail").val().trim(),ssn:$(".jsEmployeeFlowSSN").val().trim(),date_of_birth:$(".jsEmployeeFlowDateOfBirth").val().trim()}).first_name||e.push('"First name" is missing.'),t.last_name||e.push('"Last name" is missing.'),t.location_uuid||e.push('"Work address" is missing.'),t.start_date||e.push('"Start date" is missing.'),t.email||e.push('"Email" is missing.'),t.email.verifyEmail()||e.push('"Email" is invalid.'),t.ssn||e.push('"Social Security number (SSN)" is missing.'),9===t.ssn.replace(/-/g,"").length&&null===t.ssn.match(/([^0-9#-])/gi)||e.push('"Social Security number (SSN)" must be 9 digits long.'),t.date_of_birth||e.push('"Date of birth" is missing.'),e.length?alertify.alert("Error!",getErrorsStringFromArray(e),CB):(ml(!0,r+"Loader","Please wait, while we are processing your request."),void(n=$.ajax({url:baseUrl("payrolls/flow/employee/"+o+"/personal_details"),method:"POST",data:t}).success(function(e){return alertify.alert("Success!",e.msg,CB)}).fail(handleErrorResponse).always(function(){n=null,ml(!1,r+"Loader")}))))}),$(document).on("click",".jsEmployeeFlowSaveCompensationBtn",function(e){var t;return e.preventDefault(),null===n&&(e=$(".select-package:checkbox:checked").map(function(){return this.value}).get(),t=[],(e={title:$(".jsEmployeeFlowJobTitle").val().trim(),amount:$(".jsEmployeeFlowAmount").val().trim(),classification:$(".jsEmployeeFlowEmployeeClassification option:selected").val(),per:$(".jsEmployeeFlowPer option:selected").val(),minimumWage:$(".jsEmployeeFlowMinimumWage option:selected").val(),wagesId:e}).title||t.push('"Job title" is missing.'),(!e.amount||e.amount<0)&&t.push('"Amount" is missing.'),t.length?alertify.alert("Error!",getErrorsStringFromArray(t),CB):(ml(!0,r+"Loader","Please wait, while we are processing your request."),void(n=$.ajax({url:baseUrl("payrolls/flow/employee/"+o+"/compensation"),method:"POST",data:e}).success(function(e){return alertify.alert("Success!",e.msg,CB)}).fail(handleErrorResponse).always(function(){n=null,ml(!1,r+"Loader")}))))}),$(document).on("click",".jsEmployeeFlowSaveHomeAddressBtn",function(e){var t;return e.preventDefault(),null===n&&(e=[],(t={street_1:$(".jsEmployeeFlowStreet1").val().trim(),street_2:$(".jsEmployeeFlowStreet2").val().trim(),city:$(".jsEmployeeFlowCity").val().trim(),state:$(".jsEmployeeFlowState").val().trim(),zip:$(".jsEmployeeFlowZip").val().trim()}).street_1||e.push('"street 1" is missing.'),t.city||e.push('"City" is missing.'),t.state||e.push('"State" is missing.'),t.zip||e.push('"Zip" is missing.'),e.length?alertify.alert("Error!",getErrorsStringFromArray(e),CB):(ml(!0,r+"Loader","Please wait, while we are processing your request."),void(n=$.ajax({url:baseUrl("payrolls/flow/employee/"+o+"/home_address"),method:"POST",data:t}).success(function(e){return alertify.alert("Success!",e.msg,CB)}).fail(handleErrorResponse).always(function(){n=null,ml(!1,r+"Loader")}))))}),$(document).on("click",".jsEmployeeFlowSaveFederalTaxBtn",function(e){var t;return e.preventDefault(),null===n&&(e=[],(t={filing_status:$(".jsEmployeeFlowFilingStatus option:selected").val(),two_jobs:$(".jsEmployeeFlowMultipleJobs:checked").val(),dependents_amount:$(".jsEmployeeFlowDependents").val().trim(),extra_withholding:$(".jsEmployeeFlowExtraWithholding").val().trim(),other_income:$(".jsEmployeeFlowOtherIncome").val().trim(),deductions:$(".jsEmployeeFlowDeductions").val().trim(),w4_data_type:"rev_2020_w4"}).filing_status||e.push('"Filing status" is missing.'),e.length?alertify.alert("Error!",getErrorsStringFromArray(e),CB):(ml(!0,r+"Loader","Please wait, while we are processing your request."),void(n=$.ajax({url:baseUrl("payrolls/flow/employee/"+o+"/federal_tax"),method:"POST",data:t}).success(function(e){return alertify.alert("Success!",e.msg,CB)}).fail(handleErrorResponse).always(function(){n=null,ml(!1,r+"Loader")}))))}),$(document).on("click",".jsEmployeeFlowSaveStateTaxBtn",function(e){if(e.preventDefault(),null!==n)return!1;let t={},a=[];if($(".jsEmployeeFlowStateTax").map(function(){"INPUT"===$(this).prop("tagName")&&"number"===$(this).prop("type")?(t[$(this).prop("name")]=$(this).val().trim(),$(this).val().trim()<0&&a.push('"'+$(this).prop("name").replace(/_/gi," ")+'" can not be less than 0.')):"SELECT"===$(this).prop("tagName")&&(t[$(this).prop("name")]=$('select[name="'+$(this).prop("name")+'"] option:selected').val(),$(this).val()||a.push('"'+$(this).prop("name").replace(/_/gi," ")+'" is missing.'))}),a.length)return alertify.alert("Error!",getErrorsStringFromArray(a),CB);ml(!0,r+"Loader","Please wait, while we are processing your request."),n=$.ajax({url:baseUrl("payrolls/flow/employee/"+o+"/state_tax"),method:"POST",data:t}).success(function(e){return alertify.alert("Success!",e.msg,CB)}).fail(handleErrorResponse).always(function(){n=null,ml(!1,r+"Loader")})}),$(document).on("click",".jsEmployeeFlowSaveBankAccountBtn",function(e){var t;return e.preventDefault(),null===n&&(e=[],(t={accountTitle:$(".jsEmployeeFlowBankAccountTitle").val().trim(),routingNumber:$(".jsEmployeeFlowBankAccountRoutingNumber").val().replace(/[^0-9]/gi,""),accountNumber:$(".jsEmployeeFlowBankAccountAccountNumber").val(),accountType:$(".jsEmployeeFlowBankAccountType option:selected").val()}).accountTitle||e.push('"Account title" is missing.'),t.routingNumber||e.push('"Routing number" is missing.'),9!=t.routingNumber.length&&e.push('"Routing number" must be 9 digits long.'),t.accountNumber||e.push('"Routing number" is missing.'),t.accountType||e.push('"Account type" is missing.'),e.length?alertify.alert("Error!",getErrorsStringFromArray(e),CB):(ml(!0,r+"Loader","Please wait, while we are processing your request."),void(n=$.ajax({url:baseUrl("payrolls/flow/employee/"+o+"/bank_account"),method:"POST",data:t}).success(function(e){return alertify.alert("Success!",e.msg,function(){s("payment_method")})}).fail(handleErrorResponse).always(function(){n=null,ml(!1,r+"Loader")}))))}),$(document).on("click",".jsEmployeeFlowPaymentMethodSaveBtn",function(e){var t;return e.preventDefault(),null===n&&(e=[],(t={paymentType:$(".jsEmployeeFlowPaymentMethodType:checked").val()}).paymentType||e.push('"Payment type" is missing.'),e.length?alertify.alert("Error!",getErrorsStringFromArray(e),CB):(ml(!0,r+"Loader","Please wait, while we are processing your request."),void(n=$.ajax({url:baseUrl("payrolls/flow/employee/"+o+"/payment_method"),method:"POST",data:t}).success(function(e){return alertify.alert("Success!",e.msg,function(){s("payment_method")})}).fail(handleErrorResponse).always(function(){n=null,ml(!1,r+"Loader")}))))}),$(document).on("click",".jsEmployeeFlowPaymentMethodAddBankAccountBtn",function(e){e.preventDefault(),s("bank_account_add")}),$(document).on("click",".jsEmployeeFlowPaymentMethodToBtn",function(e){e.preventDefault(),s("payment_method")}),$(document).on("click",".jsEmployeeFlowDeleteBankAccount",function(e){e.preventDefault();let t=$(this).closest(".jsEmployeeFlowDeleteBankAccountRow").data("id");return alertify.confirm("Do you really want to delete the bank account?",function(){var e;e=t,_ml(!0,r+"Loader"),n=$.ajax({url:baseUrl("payrolls/flow/employee/"+o+"/bank_account/"+e),method:"DELETE",caches:!1}).success(function(){s("payment_method")}).fail(handleErrorResponse).always(function(){n=null,_ml(!1,r+"Loader")})})}),$(document).on("click",".jsEmployeeFlowUseBankAccount",function(e){e.preventDefault();var e=$(this).closest(".jsEmployeeFlowDeleteBankAccountRow").data("id");e=e,_ml(!0,r+"Loader"),n=$.ajax({url:baseUrl("payrolls/flow/employee/"+o+"/bank_account/"+e),method:"PUT",caches:!1}).success(function(){s("payment_method")}).fail(handleErrorResponse).always(function(){n=null,_ml(!1,r+"Loader")})}),$(document).on("click",".jsEmployeeFlowPaymentMethodType",function(){"Check"===$(this).val()?$(".jsEmployeeFlowPaymentMethodAccountBox").addClass("hidden"):$(".jsEmployeeFlowPaymentMethodAccountBox").removeClass("hidden")}),$(document).on("click",".jsAssignDocument",function(e){e.preventDefault();let n=$(this).closest("tr").data();return alertify.confirm("Do you really want to assign this document?",function(){var e,t,a;"direct_deposit"===n.type?(e=n.type,t=n.did,_ml(!0,r+"Loader"),(a={action:"assign_document"}).documentType=e,a.companySid=companyId,a.companyName=window.company.Name,a.sid=t,a.userSid=o,a.userType="employee",$.post(baseUrl("hr_documents_management/handler"),a,e=>{_ml(!1,r+"Loader"),!1===e.Status?alertify.alert("WARNING!",e.Response,CB):alertify.alert("SUCCESS!",e.Response,function(){s("documents")})})):"w4"===n.type&&(_ml(!0,r+"Loader"),$.ajax({url:baseUrl("forms/w4/employee/"+o+"/assign"),method:"POST",data:{}}).success(function(e){!1===e.Status?alertify.alert("Error!",e.message,CB):alertify.alert("Success!",e.message,function(){s("documents")})}).fail(handleErrorResponse).always(function(){_ml(!1,r+"Loader")}))}).set("labels",{ok:"YES",cancel:"No"}).set("title","CONFIRM!")}),$(document).on("click",".jsRevokeDocument",function(e){e.preventDefault();let n=$(this).closest("tr").data();return alertify.confirm("Do you really want to revoke this document?",function(){var e,t,a;"direct_deposit"===n.type?(e=n.type,t=n.did,_ml(!0,r+"Loader"),(a={action:"revoke_document"}).documentType=e,a.companySid=companyId,a.companyName=window.company.Name,a.sid=t,a.userSid=o,a.userType="employee",$.post(baseUrl("hr_documents_management/handler"),a,e=>{_ml(!1,r+"Loader"),!1===e.Status?alertify.alert("WARNING!",e.Response,CB):alertify.alert("SUCCESS!",e.Response,function(){s("documents")})})):"w4"===n.type&&(_ml(!0,r+"Loader"),$.ajax({url:baseUrl("forms/w4/employee/"+o+"/revoke"),method:"DELETE",data:{}}).success(function(e){!1===e.Status?alertify.alert("Error!",e.message,CB):alertify.alert("Success!",e.message,function(){s("documents")})}).fail(handleErrorResponse).always(function(){_ml(!1,r+"Loader")}))}).set("labels",{ok:"YES",cancel:"No"}).set("title","CONFIRM!")}),$(document).on("click",".jsPayrollEmployeeFinishOnboard",function(e){e.preventDefault();let t=$(this).closest("tr").data("id");return alertify.confirm("Are you certain about proceeding with the completion of the selected employee's payroll onboarding? <br />Once an employee is onboarded, you will be unable to delete them, but you will still have the option to modify their details.",function(){var e;e=t,_ml(!0,"pageLoader"),$.ajax({url:baseUrl("payrolls/flow/employee/"+e+"/finish_onboard"),method:"POST",data:{}}).success(function(e){if(e.view)return Modal({Id:"jsSummaryModel",Loader:"jsSummaryModelLoader",Body:'<div id="jsSummaryModelBody">'+e.view+"</div>",Title:"Summary"},function(){_ml(!1,"jsSummaryModelLoader")});alertify.alert("Success!",e.msg,function(){window.location.reload()})}).fail(handleErrorResponse).always(function(){_ml(!1,"pageLoader")})}).setHeader("Confirm")}),$(document).on("click",".jsPayrollEmployeeDelete",function(e){e.preventDefault();let t=$(this).closest("tr").data("id");return _confirm("Do you really want to remove the selected employee from Payroll?<br /> This action is not-revertible. However, you can re-add the selected employee for payroll.",function(){var e;e=t,_ml(!0,"pageLoader"),$.ajax({url:baseUrl("payrolls/flow/employee/"+e+"/delete"),method:"DELETE"}).success(function(e){_success(e.msg,function(){window.location.reload()})}).fail(handleErrorResponse).always(function(){_ml(!1,"pageLoader")})})}),$.ajaxSetup({cache:!1}),_ml(!1,"pageLoader")}),$(function(){let n=null,o=0;function r(){null!==n&&n.abort(),n=$.ajax({url:baseUrl("payrolls/employees/"+o+"/garnishments"),method:"GET",cache:!1}).success(function(e){$("#jsGarnishmentModalBody").html(e.view),$("#jsGarnishmentModalSpan").text(" of "+e.employee.name)}).fail(handleErrorResponse).always(function(){n=null,ml(!1,"jsGarnishmentModalLoader")})}$(".jsPayrollEmployeeGarnishments").click(function(e){e.preventDefault(),o=$(this).data("key"),Modal({Id:"jsGarnishmentModal",Loader:"jsGarnishmentModalLoader",Title:'Garnishments<span id="jsGarnishmentModalSpan"></span>',Body:'<div id="jsGarnishmentModalBody"></div>'},function(){r()})}),$(document).on("click",".jsAddGarnishment",function(e){e.preventDefault(),null!==n&&n.abort(),$("#jsGarnishmentModalBody").html(""),ml(!1,"jsGarnishmentModalLoader","Please wait while we are generating a preview."),n=$.ajax({url:baseUrl("payrolls/employees/"+o+"/garnishments/add"),method:"GET",cache:!1}).success(function(e){$("#jsGarnishmentModalBody").html(e.view)}).fail(handleErrorResponse).always(function(){n=null,ml(!1,"jsGarnishmentModalLoader")})}),$(document).on("click",".jsViewGarnishment",function(e){e.preventDefault(),r()}),$(document).on("change",".jsGarnishmentDeductAsPercentage",function(){$(".jsGarnishmentAmountSymbol").text("yes"==$(this).val()?"%":"$")}),$(document).on("click",".jsSaveGarnishment",function(e){e.preventDefault();var e={active:$(".jsGarnishmentActive option:selected").val(),amount:$(".jsGarnishmentAmount").val().trim()||0,description:$(".jsGarnishmentDescription").val().trim(),court_ordered:$(".jsGarnishmentCourtOrdered option:selected").val(),times:$(".jsGarnishmentTimes").val().trim()||null,recurring:$(".jsGarnishmentRecurring option:selected").val(),annual_maximum:$(".jsGarnishmentAnnualMaximum").val().trim()||null,pay_period_maximum:$(".jsGarnishmentPayPeriodMaximum").val().trim()||null,deduct_as_percentage:$(".jsGarnishmentDeductAsPercentage option:selected").val(),beneficiaryName:$(".jsBeneficiaryName").val(),beneficiaryAddress:$(".jsBeneficiaryAddress").val(),beneficiaryPhone:$(".jsBeneficiaryPhone").val(),beneficiaryPaymentType:$('input[name="payment_type"]:checked').val()},t=[];if(e.amount||t.push('"Amount" is required.'),e.description||t.push('"Description" is required.'),e.court_ordered||t.push('"Court ordered" is required.'),e.beneficiaryName||t.push('"Contact name" is required.'),"bank"==e.beneficiaryPaymentType&&(e.bankAccountTitle=$(".jsBankAccountTitle").val(),e.bankAccountType=$('input[name="beneficiary_banking_type"]:checked').val(),e.bankName=$(".jsBankName").val(),e.bankRoutingNumber=$(".jsBankRoutingNumber").val().replace(/[^\d]/g,""),e.bankAccountNumber=$(".jsBankAccountNumber").val().replace(/[^\d]/g,""),e.bankAccountTitle||t.push('"Bank account title" is required.'),e.bankName||t.push('"Bank name" is required.'),e.bankRoutingNumber||t.push('"Routing number" is required.'),9!==e.bankRoutingNumber.length&&t.push("Routing number must be of 9 digits."),e.bankAccountNumber||t.push('"Account number" is required.'),9!==e.bankAccountNumber.length)&&t.push("Account number must be of 9 digits."),t.length)return _error(getErrorsStringFromArray(t));t=e,null===n&&(ml(!0,"jsGarnishmentModalLoader","Please wait while we are saving garnishment."),n=$.ajax({url:baseUrl("payrolls/employees/"+o+"/garnishment"),method:"POST",cache:!1,data:t}).success(function(e){return _success(e.msg,function(){r()})}).fail(handleErrorResponse).always(function(){n=null,ml(!1,"jsGarnishmentModalLoader")}))}),$(document).on("click",".jsEditGarnishment",function(e){e.preventDefault();e=$(this).closest("tr").data("id");null!==n&&n.abort(),$("#jsGarnishmentModalBody").html(""),ml(!1,"jsGarnishmentModalLoader","Please wait while we are generating a preview."),n=$.ajax({url:baseUrl("payrolls/employees/"+o+"/garnishments/"+e),method:"GET",cache:!1}).success(function(e){$("#jsGarnishmentModalBody").html(e.view)}).fail(handleErrorResponse).always(function(){n=null,ml(!1,"jsGarnishmentModalLoader")})}),$(document).on("click",".jsUpdateGarnishment",function(e){e.preventDefault();var e={active:$(".jsGarnishmentActive option:selected").val(),amount:$(".jsGarnishmentAmount").val().trim()||0,description:$(".jsGarnishmentDescription").val().trim(),court_ordered:$(".jsGarnishmentCourtOrdered option:selected").val(),times:$(".jsGarnishmentTimes").val().trim()||null,recurring:$(".jsGarnishmentRecurring option:selected").val(),annual_maximum:$(".jsGarnishmentAnnualMaximum").val().trim()||null,pay_period_maximum:$(".jsGarnishmentPayPeriodMaximum").val().trim()||null,deduct_as_percentage:$(".jsGarnishmentDeductAsPercentage option:selected").val(),beneficiaryName:$(".jsBeneficiaryName").val(),beneficiaryAddress:$(".jsBeneficiaryAddress").val(),beneficiaryPhone:$(".jsBeneficiaryPhone").val(),beneficiaryPaymentType:$('input[name="payment_type"]:checked').val()},t=$(".jsGarnishmentKey").val(),a=[];if(e.amount||a.push('"Amount" is required.'),e.description||a.push('"Description" is required.'),e.court_ordered||a.push('"Court ordered" is required.'),t||a.push('"Key" is required.'),e.beneficiaryName||a.push('"Contact name" is required.'),"bank"==e.beneficiaryPaymentType&&(e.bankAccountTitle=$(".jsBankAccountTitle").val(),e.bankAccountType=$('input[name="beneficiary_banking_type"]:checked').val(),e.bankName=$(".jsBankName").val(),e.bankRoutingNumber=$(".jsBankRoutingNumber").val().replace(/[^\d]/g,""),e.bankAccountNumber=$(".jsBankAccountNumber").val().replace(/[^\d]/g,""),e.bankAccountTitle||a.push('"Bank account title" is required.'),e.bankName||a.push('"Bank name" is required.'),e.bankRoutingNumber||a.push('"Routing number" is required.'),9!==e.bankRoutingNumber.length&&a.push("Routing number must be of 9 digits."),e.bankAccountNumber||a.push('"Account number" is required.'),9!==e.bankAccountNumber.length)&&a.push("Account number must be of 9 digits."),a.length)return _error(getErrorsStringFromArray(a));a=e,e=t,null===n&&(ml(!0,"jsGarnishmentModalLoader","Please wait while we are updating garnishment."),n=$.ajax({url:baseUrl("payrolls/employees/"+o+"/garnishments/"+e),method:"POST",cache:!1,data:a}).success(function(e){return _success(e.msg,function(){r()})}).fail(handleErrorResponse).always(function(){n=null,ml(!1,"jsGarnishmentModalLoader")}))}),$(document).on("change",".jsPaymentType",function(e){e.preventDefault();e=$('input[name="payment_type"]:checked').val();"bank"==e?$(".jsBankInfoSection").removeClass("dn"):"cheque"==e&&$(".jsBankInfoSection").addClass("dn")}),_ml(!1,"pageLoader")});
