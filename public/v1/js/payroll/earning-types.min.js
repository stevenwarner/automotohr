!function(){let n,r=0;$(document).on("click",".jsModalCancel",e=>{e.preventDefault(),"yes"==$(e.target).data("ask")?alertify.confirm("Any unsaved changes will be lost.",()=>{$(e.target).closest(".csModal").fadeOut(300),$("body").css("overflow-y","auto"),$("#ui-datepicker-div").remove(),$(".jsMsModal").remove()}).set("labels",{ok:"LEAVE",cancel:"NO, I WILL STAY"}).set("title","Notice!"):($(e.target).closest(".csModal").fadeOut(300),$("body").css("overflow-y","auto"),$(".jsMsModal").remove(),$("#ui-datepicker-div").remove())}),window._ml=window.ml=function(e,a,t){a=void 0===a?".jsIPLoader":`.jsIPLoader[data-page="${a}"]`,void 0!==n&&document.getElementsByClassName("csModalBody").length&&(document.getElementsByClassName("csModalBody")[0].scrollTop=0),void 0!==n&&e&&$(".jsIPLoader").height($(`#${n}Body`).height()+r),void 0===e||!1===e?$(a).hide():$(a).show(),void 0!==t&&$(".jsIPLoaderText").html(t),e||$(".jsIPLoaderText").html("Please wait, while we are generating a preview.")},window.Model=window.Modal=function(e,a){var t=`
			<!-- Custom Modal -->
			<div class="csModal jsMsModal" id="${e.Id}">
				<div class="${e.Cl||"container"}">
					<div class="csModalHeader">
						<h3 class="csModalHeaderTitle">
							<span>${e.Title}</span>
							<span class="csModalButtonWrap">
							${void 0!==e.Buttons&&0!==e.Buttons.length?e.Buttons.join(""):""}
								<button class="btn btn-black btn-cancel csW jsModalCancel" ${void 0===e.Ask?"":'data-ask="no"'} title="Close this window">Cancel</button>
							</span>
							<div class="clearfix"></div>
						</h3>
					</div>
					<div class="csModalBody">
						<div class="csIPLoader jsIPLoader" data-page="${e.Loader}">
							<div class="csIPLoaderBox">
								<i class="fa fa-circle-o-notch fa-spin" aria-hidden="true"></i><br><br>
								<br>
								<span class="jsIPLoaderText">Please wait while we process your request.</span>
							</div>
						</div>
						${e.Body}
					</div>
					<div class="clearfix"></div>
				</div>
			</div>
			`;n=e.Id,r=$(`#${e.Id} .csModalHeader`).height()+50,$(".jsMsModal").remove(),$("#"+e.Id).remove(),$("body").append(t),$("#"+e.Id).fadeIn(300),$("body").css("overflow-y","hidden"),$(`#${e.Id} .csModalBody`).css("top",r),void 0!==a&&a()}}(),String.prototype.verifyEmail=function(){return null!==this.match(/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/g)},String.prototype.isValidYoutubeLink=function(){return null!==this.match(/^(https?\:\/\/)?((www\.)?youtube\.com|youtu\.be)\/.+$/g)},String.prototype.isValidVimeoLink=function(){return null!==this.match(/^(http|https)?:\/\/(www\.|player\.)?vimeo\.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|video\/|)(\d+)(?:|\/\?)$/gim)},String.prototype.isValidInteger=function(){return null!==this.match(/^[1-9]\d*$/g)};{function ml(e,a){e?$(".jsIPLoader[data-page='"+a+"']").show():$(".jsIPLoader[data-page='"+a+"']").hide()}}{function CB(){}}{function getErrorsStringFromArray(e,a){return"<strong><p>"+(a||"Please, resolve the following errors")+"</p></strong><br >"+e.join("<br />")}}{function getBrowserVersion(){var e,a=navigator.userAgent,t=a.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(t[1])?"IE "+((e=/\brv[ :]+(\d+)/g.exec(a)||[])[1]||""):"Chrome"===t[1]&&null!=(e=a.match(/\b(OPR|Edge)\/(\d+)/))?e.slice(1).join(" ").replace("OPR","Opera"):(t=t[2]?[t[1],t[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=a.match(/version\/(\d+)/i))&&t.splice(1,1,e[1]),t)}}{function generateBrowserAlert(){var e={chrome:55,edge:14,firefox:52,opera:42,safari:10.1,chromeandroid:55,firefoxandroid:52,operaandroid:42,safariios:10.3,samsumginternet:6},a=getBrowserVersion();if(e[a[0].toLowerCase()]&&a[1]<e[a[0].toLowerCase()])return alert("This module require '"+a[0]+"' with version greater or equal then '"+a[1]+"'.")}}{function uploadFile(t){return new Promise(function(a){var e=new FormData;e.append("file",t),$.ajax({url:apiURL+"uploader",method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:e}).success(function(e){a(e)}).fail(function(e){a(e.responseText)})})}}{function uploadStream(e){return new Promise(function(a){$.ajax({url:apiURL+"uploader/stream",method:"POST",timeout:0,contentType:"application/json",data:JSON.stringify({stream:e})}).success(function(e){a(e)}).fail(function(){a({})})})}}"undefined"!=typeof $&&($(".jsFilterPanel").height($(document).height()),$(document).on("click",".jsFilterSectionBtn",function(e){e.preventDefault();e=$(this).data("key");$(".jsFilterSection[data-key='"+e+"']").removeClass("hidden")}),$(document).on("click",".jsFilterSectionHideBtn",function(e){e.preventDefault();e=$(this).data("key");$(".jsFilterSection[data-key='"+e+"']").addClass("hidden")}),$(document).on("click",".jsExpandAdminView",function(e){e.preventDefault(),$(this).toggleClass("btn-success"),$(".jsExpandContent").toggleClass("col-sm-12 col-md-12 col-lg-12 col-xs-12 col-lg-9 col-md-9 col-sm-9"),$(".jsExpandSideBar").toggleClass("hidden")}));{function handleErrorResponse(e){return 0==e.status?alertify.alert("Errors!","The connection to the server has been lost. Kindly reach out to the system administrator for assistance.",CB):404==e.status?_error("The requested route doesn't exists."):(e=e.responseJSON||JSON.parse(e.responseText),alertify.alert("Errors!",e.errors.join("<br />"),CB))}}{function getQuestionsFromArray(e,a){return"<strong><p>"+(a||"Please, provide the following question answer.")+"</p></strong><br >"+e.join("<br />")}}{function baseUrl(e=""){return window.location.origin+"/"+e}}{function callButtonHook(e,a=!0){if(a)return a={pointer:e,html:e.html()},e.html('<i class="fa fa-circle-o-notch fa-spin csW csF16" aria-hidden="true"></i>'),e.off("click"),a;e.pointer.html(e.html)}}{function _error(e){alertify.alert("Error!",e,CB).setHeader("Error!").set("labels",{ok:"Ok",cancel:"cancel"})}}{function _success(e,a=CB){alertify.alert("Success!",e,a).setHeader("Success!").set("labels",{ok:"Ok",cancel:"cancel"})}}{function _confirm(e,a){alertify.confirm(e,a,CB).setHeader("Confirm").set("labels",{ok:"Yes",cancel:"No"})}}$(function(){let t=null;let n=0,r="jsPageLoader";function a(e){_ml(!0,"jsEditEarningTypeLoader");e="payrolls/earnings/"+e+"/"+n;t=$.ajax({url:baseUrl(e),method:"GET",caches:!1}).success(function(e){$("#jsEditEarningTypeBody").html(e.view)}).fail(handleErrorResponse).always(function(){t=null,_ml(!1,"jsEditEarningTypeLoader")})}$(document).on("click",".jsMenuTrigger",function(e){e.preventDefault(),a($(this).data("step"))}),$(".jsDeactivateEarningType").click(function(e){e.preventDefault();const a=$(this).closest("tr").data("id");return alertify.confirm("Do you really want to deactivate this earning type?<br /> This action is not revertible.",function(){var e;e=a,ml(!0,r),t=$.ajax({url:baseUrl("payrolls/earnings/deactivate/"+e),method:"DELETE"}).success(function(){return alertify.alert("Success!","You have successfully deactivated the earning type.",function(){window.location.reload()})}).fail(handleErrorResponse).always(function(){t=null,ml(!1,r)})}).setHeader("Confirm!")}),$(".jsAddEarningType").click(function(e){e.preventDefault(),Modal({Id:"jsAddEarningType",Title:"Add an Earning Type",Loader:"jsAddEarningTypeLoader",Body:'<div id="jsAddEarningTypeBody"></div>'},function(){var e="add";_ml(!0,"jsAddEarningTypeLoader"),e="payrolls/earnings/"+e,t=$.ajax({url:baseUrl(e),method:"GET",caches:!1}).success(function(e){$("#jsAddEarningTypeBody").html(e.view)}).fail(handleErrorResponse).always(function(){t=null,_ml(!1,"jsAddEarningTypeLoader")})})}),$(".jsUpdateEarningType").click(function(e){e.preventDefault(),n=$(this).closest("tr").data("id"),Modal({Id:"jsEditEarningType",Title:"Edit an Earning Type",Loader:"jsEditEarningTypeLoader",Body:'<div id="jsEditEarningTypeBody"></div>'},function(){a("edit")})}),$(document).on("submit","#jsEarningForm",function(e){e.preventDefault();var e={name:$("#jsEarningName").val().trim()},a=[];if(e.name||a.push('"Name" is missing.'),a.length)return alertify.alert("Error!",getErrorsStringFromArray(a),CB);ml(!0,"jsAddEarningTypeLoader","Please wait, while we are creating earning type."),t=$.ajax({url:baseUrl("payrolls/earnings/add"),method:"POST",data:e}).success(function(e){return $(".jsModalCancel").trigger("click"),alertify.alert("Success!",e.msg,function(){window.location.reload()})}).fail(handleErrorResponse).always(function(){t=null,ml(!1,"jsAddEarningTypeLoader")})}),$(document).on("submit","#jsEarningEditForm",function(e){e.preventDefault();var e={name:$("#jsEarningName").val().trim()},a=[];if(e.name||a.push('"Name" is missing.'),a.length)return alertify.alert("Error!",getErrorsStringFromArray(a),CB);ml(!0,"jsEditEarningTypeLoader","Please wait, while we are updating earning type."),t=$.ajax({url:baseUrl("payrolls/earnings/edit/"+n),method:"POST",data:e}).success(function(e){return $(".jsModalCancel").trigger("click"),alertify.alert("Success!",e.msg,function(){window.location.reload()})}).fail(handleErrorResponse).always(function(){t=null,ml(!1,"jsEditEarningTypeLoader")})}),ml(!1,r)});
