$(function(){let s=null,a=null;const t="jsModalPage",n=t+"Loader",o=t+"Body";function r(e,r,a,i){Modal({Id:t,Title:e,Body:'<div id="'+o+'"></div>',Loader:n},function(){var e=r,t=a,n=i;null!==s&&s.abort(),s=$.ajax({url:baseUrl("settings/page/"+e+"/"+t),method:"GET"}).always(function(){s=null}).fail(handleErrorResponse).done(function(e){$("#"+o).html(e.view),n(e)})})}function i(e,t,n){if(null===s){const r=callButtonHook(t,!0);s=$.ajax({url:baseUrl(n),method:"POST",data:e,processData:!1,contentType:!1}).always(function(){callButtonHook(r,!1),s=null}).fail(handleErrorResponse).done(function(e){return a?.destroy(),_success(e.msg,function(){window.location.href=baseUrl("settings/shifts/breaks")})})}}$(".jsAddBreakBtn").click(function(e){e.preventDefault(),r("New Break","shifts",0,function(){ml(!1,n);$("#jsPageShiftBreakForm").validate({rules:{break_name:{required:!0},break_duration:{required:!0,number:!0},break_type:{required:!0}},submitHandler:function(e){return i(formArrayToObj($(e).serializeArray()),$(".jsPageShiftBreakBtn"),"settings/shifts/breaks")}})})}),$(".jsEditShiftBreakBtn").click(function(e){e.preventDefault();const t=$(this).closest(".jsBox").data("id");r("Edit Break","shifts",t,function(){ml(!1,n),a=$("#jsPageShiftBreakForm").validate({rules:{rule_name:{required:!0},overtime_multiplier:{required:!0},double_overtime_multiplier:{required:!0}},submitHandler:function(e){e=formArrayToObj($(e).serializeArray());return e.append("id",t),i(e,$(".jsPageShiftBreakBtn"),"settings/shifts/breaks")}})})}),$(".jsDeleteShiftBreakBtn").click(function(e){e.preventDefault();const r=$(this).closest(".jsBox"),a=r.data("id");return _confirm("Are you sure you want to delete it? This action cannot be undone.",function(){var e=r,t=a;if(null===s){const n=callButtonHook(e.find(".jsDeleteShiftBreakBtn"),!0);s=$.ajax({url:baseUrl("settings/shifts/breaks/"+t),method:"DELETE"}).always(function(){callButtonHook(n,!1),s=null}).fail(handleErrorResponse).done(function(e){return _success(e.msg,function(){window.location.href=baseUrl("settings/shifts/breaks")})})}})}),$(document).on("click",".jsAddChangeStatus",function(){var e=$(this).data("target");$('[name="'+e+'"]').prop("disabled",!$(this).prop("checked")),$('[name="'+e+'"]').rules("remove"),$(this).prop("checked")&&$('[name="'+e+'"]').rules("add",{required:!0,number:!0})})});
