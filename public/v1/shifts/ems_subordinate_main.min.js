$(function(){const n=getSearchParam("mode")||"month";function e(){let e="";var t;return e="month"===n?(t=getSearchParam("year")||moment().format("YYYY"),(getSearchParam("month")||moment().format("MM"))+"/01/"+t):getSearchParam("start_date")||moment().weekday(1).format("MM/DD/YYYY")}$('[data-toggle="cpopover"]').popover({trigger:"hover click",html:!0}),$(".jsWeekDaySelect").daterangepicker({opens:"center",singleDatePicker:!0,showDropdowns:!0,autoApply:!0,startDate:e(),locale:{format:"MM/DD/YYYY"},isInvalidDate:function(e){return"month"===n?"01"!==e.format("DD"):1!==e.day()}}),$(".jsWeekDaySelect").on("apply.daterangepicker",function(e,t){var a=("month"===n?t.startDate.clone().startOf("month"):t.startDate.clone()).format("MM/DD/YYYY");let r=0;r="week"===n?6:"two_week"===n?13:t.startDate.endOf("month").format("MM/DD/YYYY");var o=t.startDate.add(r,"days").format("MM/DD/YYYY");if("month"==n)return window.location.href=baseUrl("shifts/my/subordinates?mode="+n+"&year="+t.startDate.clone().format("YYYY")+"&month="+t.startDate.clone().format("MM")+"&departments="+selectedDepartments+"&teams="+selectedTeams);window.location.href=baseUrl("shifts/my/subordinates?mode="+n+"&start_date="+a+"&end_date="+o+"&departments="+selectedDepartments+"&teams="+selectedTeams)}),$(".schedule-employee-row").map(function(){$(".schedule-column-"+$(this).data("id")).height($(this).height())}),$("#shift_date_from").daterangepicker({opens:"center",singleDatePicker:!0,showDropdowns:!0,autoApply:!0,startDate:e(),locale:{format:"MM/DD/YYYY"}}),$("#shift_date_to").daterangepicker({opens:"center",singleDatePicker:!0,showDropdowns:!0,autoApply:!0,startDate:function(e){let t="";var a;return t="week"===n?getSearchParam("end_date")||moment(e,"MM/DD/YYYY").endOf("week").add(1,"day").format("MM/DD/YYYY"):"two_week"===n?getSearchParam("end_date")||moment(e,"MM/DD/YYYY").add(2,"week").subtract(1,"days").format("MM/DD/YYYY"):(e=getSearchParam("year")||moment().format("YYYY"),a=getSearchParam("month")||moment().format("MM"),moment(e+"-"+a+"-01").endOf("month").format("MM/DD/YYYY"))}(e()),locale:{format:"MM/DD/YYYY"}}),$(".jsSelect2").select2(),$(".jsNavigateRightMy").click(function(e){e.preventDefault();var e=$(".jsWeekDaySelect").data("daterangepicker").startDate;let t="",a=1;return t="week"===n?e.clone().add(1,"week"):"two_week"===n?(a=2,e.clone().add(2,"week")):e.clone().endOf("month"),"month"!==n?window.location.href=baseUrl("shifts/my/subordinates?mode="+n+"&start_date="+t.clone().format("MM/DD/YYYY")+"&end_date="+t.clone().add(a,"week").subtract(1,"day").format("MM/DD/YYYY")+"&departments="+selectedDepartments+"&teams="+selectedTeams):(e=t.clone().add(1,"month"),selectedDepartments,window.location.href=baseUrl("shifts/my/subordinates?mode="+n+"&year="+e.clone().format("YYYY")+"&month="+e.clone().format("MM")+"&departments="+selectedDepartments+"&teams="+selectedTeams))}),$(".jsNavigateLeftMy").click(function(e){e.preventDefault();var e=$(".jsWeekDaySelect").data("daterangepicker").startDate;return"month"!==n?window.location.href=baseUrl("shifts/my/subordinates?mode="+n+"&start_date="+e.clone().subtract("week"===n?1:2,"week").format("MM/DD/YYYY")+"&end_date="+e.clone().subtract(1,"day").format("MM/DD/YYYY")+"&departments="+selectedDepartments+"&teams="+selectedTeams):(e=e.clone().subtract(1,"month"),window.location.href=baseUrl("shifts/my/subordinates?mode="+n+"&year="+e.clone().format("YYYY")+"&month="+e.clone().format("MM")+"&departments="+selectedDepartments+"&teams="+selectedTeams))}),$(".jsFilterBtn").click(function(e){e.preventDefault(),$(".jsFilterRow").toggleClass("hidden")}),getSearchParam("start_date")&&$(".jsFilterBtn").trigger("click")});
