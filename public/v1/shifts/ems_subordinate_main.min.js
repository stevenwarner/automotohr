$(function(){const e="jsModalPage",r=(e,e,getSearchParam("mode")||"month");let s="";function t(){let e="";var t;return e="month"===r?(t=getSearchParam("year")||moment().format("YYYY"),(getSearchParam("month")||moment().format("MM"))+"/01/"+t):getSearchParam("start_date")||moment().weekday(1).format("MM/DD/YYYY")}$(".jsWeekDaySelect").daterangepicker({opens:"center",singleDatePicker:!0,showDropdowns:!0,autoApply:!0,startDate:t(),locale:{format:"MM/DD/YYYY"},isInvalidDate:function(e){return"month"===r?"01"!==e.format("DD"):1!==e.day()}}),$(".jsWeekDaySelect").on("apply.daterangepicker",function(e,t){var a=("month"===r?t.startDate.clone().startOf("month"):t.startDate.clone()).format("MM/DD/YYYY");let n=0;n="week"===r?6:"two_week"===r?13:t.startDate.endOf("month").format("MM/DD/YYYY");var s=t.startDate.add(n,"days").format("MM/DD/YYYY");if("month"==r)return window.location.href=baseUrl("settings/subordinateshifts/manage?mode="+r+"&year="+t.startDate.clone().format("YYYY")+"&month="+t.startDate.clone().format("MM")+"&departments="+selectedDepartments+"&teams="+selectedTeams);window.location.href=baseUrl("settings/subordinateshifts/manage?mode="+r+"&start_date="+a+"&end_date="+s+"&departments="+selectedDepartments+"&teams="+selectedTeams)}),$(".schedule-employee-row").map(function(){$(".schedule-column-"+$(this).data("id")).height($(this).height())}),$(".schedule-column-clickable").click(function(e){e.preventDefault(),callToCreateBox($(this).data("eid"),$(this).closest(".schedule-column-container").data("date"))}),$(".jsEmployeesShifts").click(function(e){e.preventDefault(),callToCreateBoxMultiShifts()}),$(".jsEmployeeShiftsDelete").click(function(e){e.preventDefault(),callToDeleteBoxMultiShifts()}),$(document).on("change",".jsBreakSelect",function(){var e=$(this).closest(".jsBreakRow").data("key");$('[name="breaks['+e+'][duration]"]').val($(this).find("option:selected").data("duration"))}),$("#shift_date_from").daterangepicker({opens:"center",singleDatePicker:!0,showDropdowns:!0,autoApply:!0,startDate:t(),locale:{format:"MM/DD/YYYY"}}),$("#shift_date_to").daterangepicker({opens:"center",singleDatePicker:!0,showDropdowns:!0,autoApply:!0,startDate:t(),locale:{format:"MM/DD/YYYY"}}),$("#shift_date_to").val(filterEndDate),$("#shift_date_from").val(filterStartDate),$(function(){$(".expander").on("click",function(){$("#TableData").toggle()})}),1==filterToggle&&$("#TableData").toggle(),$(".jsSelect2").select2(),$("#js-filter-department").select2("val",[selectedDepartments.split(",")]),$("#js-filter-team").select2("val",[selectedTeams.split(",")]),$(".js-reset-my-filter-btn").click(function(e){e.preventDefault();$(".jsWeekDaySelect").data("daterangepicker").startDate;return $("#shift_date_from").val(""),$("#shift_date_to").val(""),window.location.href=baseUrl("settings/subordinateshifts/manage?mode=month")}),$(".jsNavigateRightMy").click(function(e){e.preventDefault();var e=$(".jsWeekDaySelect").data("daterangepicker").startDate;let t="",a=1;return t="week"===r?e.clone().add(1,"week"):"two_week"===r?(a=2,e.clone().add(2,"week")):e.clone().endOf("month"),"month"!==r?window.location.href=baseUrl("settings/subordinateshifts/manage?mode="+r+"&start_date="+t.clone().format("MM/DD/YYYY")+"&end_date="+t.clone().add(a,"week").subtract(1,"day").format("MM/DD/YYYY")+"&departments="+selectedDepartments+"&teams="+selectedTeams):(e=t.clone().add(1,"month"),selectedDepartments,window.location.href=baseUrl("settings/subordinateshifts/manage?mode="+r+"&year="+e.clone().format("YYYY")+"&month="+e.clone().format("MM")+"&departments="+selectedDepartments+"&teams="+selectedTeams))}),$(".jsNavigateLeftMy").click(function(e){e.preventDefault();var e=$(".jsWeekDaySelect").data("daterangepicker").startDate;return"month"!==r?window.location.href=baseUrl("settings/subordinateshifts/manage?mode="+r+"&start_date="+e.clone().subtract("week"===r?1:2,"week").format("MM/DD/YYYY")+"&end_date="+e.clone().subtract(1,"day").format("MM/DD/YYYY")+"&departments="+selectedDepartments+"&teams="+selectedTeams):(e=e.clone().subtract(1,"month"),window.location.href=baseUrl("settings/subordinateshifts/manage?mode="+r+"&year="+e.clone().format("YYYY")+"&month="+e.clone().format("MM")+"&departments="+selectedDepartments+"&teams="+selectedTeams))}),$(".js-apply-my-filter-btn").click(function(e){e.preventDefault();$(".jsWeekDaySelect").data("daterangepicker").startDate;var e=$("#shift_date_from").val(),t=$("#shift_date_to").val(),a=$("#js-filter-department").val(),n=$("#js-filter-team").val(),e="settings/subordinateshifts/manage?mode=week"+(s=""!=e&&""!=t?"&start_date="+e+"&end_date="+t:s)+"&departments="+a+"&teams="+n;return window.location.href=baseUrl(e)})});
