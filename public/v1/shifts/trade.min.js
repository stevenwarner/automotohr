const modalId="jsModalPage",modalLoader=modalId+"Loader",modalBody=modalId+"Body";let shiftsIds=[];$(function(){let o=null,c=null;function s(t){var e,s,n,i;shiftsIds=t,e="Swap Shifts",s="trade_shift",n=0,i=function(){ml(!1,modalLoader),c=$("#jsPageTradeShiftForm").validate({rules:{employees:{required:!0}},errorPlacement:function(e,t){($(t).parent().hasClass("input-group")?$(t).parent():$(t)).after(e)},submitHandler:function(e){if($(e).serializeArray(),"0"==$("#employees :selected").val())return _error("Please select an employee.");employeeId=$("#employees :selected").val(),alertify.confirm("Are You Sure?","Are you sure want to shifts swap?",function(){var e=new FormData;e.append("employeeid",employeeId),e.append("shiftids",t),r(e,"","settings/shifts/tradeshifts",function(e){_success(e.msg,function(){window.location.reload()})})},function(){})}})},Modal({Id:modalId,Title:e,Body:'<div id="'+modalBody+'"></div>',Loader:modalLoader},function(){var e=s,t=n,a=i;params="params?shiftsIds="+shiftsIds,callUrl=""!=shiftsIds?baseUrl("settings/page/"+e+"/"+t+"/"+params):baseUrl("settings/page/"+e+"/"+t),null!==o&&o.abort(),o=$.ajax({url:callUrl,method:"GET"}).always(function(){o=null}).fail(handleErrorResponse).done(function(e){$("#"+modalBody).html(e.view),a(e)})})}function r(t,a,s,n){if(null===o){let e;a&&(e=callButtonHook(a,!0)),o=$.ajax({url:baseUrl(s),method:"POST",data:t,processData:!1,contentType:!1}).always(function(){a&&callButtonHook(e,!1),o=null}).fail(handleErrorResponse).done(function(e){return c?.destroy(),n(e)})}}$(".jsDateRangePicker").daterangepicker({showDropdowns:!0,autoApply:!0,locale:{format:"MM/DD/YYYY",separator:" - "}}),$("#check_all").click(function(){$("#check_all").is(":checked")?$(".my_checkbox:checkbox").each(function(){this.checked=!0}):$(".my_checkbox:checkbox").each(function(){this.checked=!1})}),$(".jsTradeShifts").click(function(e){e.preventDefault();let t=[];var a;$(".my_checkbox:checked").each(function(){""!=(a=$(this).data("status"))&&"rejected"!=a&&"canceled"!=a||t.push($(this).val())}),0<t.length?s(t):alertify.alert("Error! Not selected","Please Select at-least one shift ")}),$(".jsCancelTradeShifts").click(function(e){e.preventDefault();let t=[];$(".my_checkbox:checked").each(function(){"awaiting confirmation"==$(this).data("status")&&t.push($(this).val())}),0<t.length?alertify.confirm("Are You Sure?","Are you sure want to cancel shifts swap?",function(){var e=new FormData;e.append("shiftids",t),r(e,"","settings/shifts/tradeshiftscancel",function(e){_success(e.msg,function(){window.location.reload()})})},function(){}):alertify.alert("Error! Not selected","Please Select at-least one shift ")}),$(".jsTradeShift").click(function(e){e.preventDefault();e=[];e.push($(this).data("shiftid")),s(e)}),$(".jsCancelTradeShift").click(function(e){e.preventDefault();let t=[],a=$(this).data("shiftid");alertify.confirm("Are You Sure?","Are you sure want to cancel shifts swap?",function(){var e=new FormData;t.push(a),e.append("shiftids",t),r(e,"","settings/shifts/tradeshiftscancel",function(e){_success(e.msg,function(){window.location.reload()})})},function(){})}),$(".jsConfirmTradeShifts").click(function(e){e.preventDefault();let t=[];$(".my_checkbox:checked").each(function(){"awaiting confirmation"==$(this).data("status")&&t.push($(this).val())}),0<t.length?alertify.confirm("Are You Sure?","Are you sure want to Confirm shifts?",function(){var e=new FormData;e.append("shiftids",t),e.append("shiftstatus","confirmed"),r(e,"","settings/shifts/my_trade_change_status",function(e){_success(e.msg,function(){window.location.reload()})})},function(){}):alertify.alert("Error! Not selected","Please Select at-least one shift ")}),$(".jsRejectTradeShifts").click(function(e){e.preventDefault();let t=[];var a;$(".my_checkbox:checked").each(function(){"awaiting confirmation"!=(a=$(this).data("status"))&&"confirmed"!=a||t.push($(this).val())}),0<t.length?alertify.confirm("Are You Sure?","Are you sure want to Reject shifts?",function(){var e=new FormData;e.append("shiftids",t),e.append("shiftstatus","rejected"),r(e,"","settings/shifts/my_trade_change_status",function(e){_success(e.msg,function(){window.location.reload()})})},function(){}):alertify.alert("Error! Not selected","Please Select at-least one shift ")}),$(".jsRejectTradeShift").click(function(e){e.preventDefault();let t=[];t.push($(this).data("shiftid")),alertify.confirm("Are You Sure?","Are you sure want to Reject shifts?",function(){var e=new FormData;e.append("shiftids",t),e.append("shiftstatus","rejected"),r(e,"","settings/shifts/my_trade_change_status",function(e){_success(e.msg,function(){window.location.reload()})})},function(){})}),$(".jsConfirmTradeShift").click(function(e){e.preventDefault();let t=[];t.push($(this).data("shiftid")),alertify.confirm("Are You Sure?","Are you sure want to Confirm shifts?",function(){var e=new FormData;e.append("shiftids",t),e.append("shiftstatus","confirmed"),r(e,"","settings/shifts/my_trade_change_status",function(e){_success(e.msg,function(){window.location.reload()})})},function(){})})});
