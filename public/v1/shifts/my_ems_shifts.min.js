$(function(){const n=getSearchParam("mode")||"month";function e(){let e="";var t;return e="month"===n?(t=getSearchParam("year")||moment().format("YYYY"),(getSearchParam("month")||moment().format("MM"))+"/01/"+t):getSearchParam("start_date")||moment().weekday(1).format("MM/DD/YYYY")}function t(e){let t="";var a;return t="week"===n?getSearchParam("end_date")||moment(e,"MM/DD/YYYY").endOf("week").add(1,"day").format("MM/DD/YYYY"):"two_week"===n?getSearchParam("end_date")||moment(e,"MM/DD/YYYY").add(2,"week").subtract(1,"days").format("MM/DD/YYYY"):(e=getSearchParam("year")||moment().format("YYYY"),a=getSearchParam("month")||moment().format("MM"),moment(e+"-"+a+"-01").endOf("month").format("MM/DD/YYYY"))}$(".jsWeekDaySelect").daterangepicker({opens:"center",singleDatePicker:!0,showDropdowns:!0,autoApply:!0,startDate:e(),locale:{format:"MM/DD/YYYY"},isInvalidDate:function(e){return"month"===n?"01"!==e.format("DD"):1!==e.day()}}),$(".jsWeekDaySelect").on("apply.daterangepicker",function(e,t){var a=("month"===n?t.startDate.clone().startOf("month"):t.startDate.clone()).format("MM/DD/YYYY");let r=0;r="week"===n?6:"two_week"===n?13:t.startDate.endOf("month").format("MM/DD/YYYY");var o=t.startDate.add(r,"days").format("MM/DD/YYYY");if("month"==n)return window.location.href=baseUrl("shifts/my?mode="+n+"&year="+t.startDate.clone().format("YYYY")+"&month="+t.startDate.clone().format("MM"));window.location.href=baseUrl("shifts/my?mode="+n+"&start_date="+a+"&end_date="+o)}),$(".schedule-employee-row").map(function(){$(".schedule-column-"+$(this).data("id")).height($(this).height())}),$("#start_date").daterangepicker({opens:"center",singleDatePicker:!0,showDropdowns:!0,autoApply:!0,startDate:e(),locale:{format:"MM/DD/YYYY"}},function(e,t,a){$("#start_date").data("daterangepicker").setStartDate(e)}),$("#end_date").daterangepicker({opens:"center",singleDatePicker:!0,showDropdowns:!0,autoApply:!0,startDate:t(),locale:{format:"MM/DD/YYYY"}}),$(".jsNavigateRightMy").click(function(e){e.preventDefault();var e=$(".jsWeekDaySelect").data("daterangepicker").startDate;let t="",a=1;return t="week"===n?e.clone().add(1,"week"):"two_week"===n?(a=2,e.clone().add(2,"week")):e.clone().endOf("month"),"month"!==n?window.location.href=baseUrl("shifts/my?mode="+n+"&start_date="+t.clone().format("MM/DD/YYYY")+"&end_date="+t.clone().add(a,"week").subtract(1,"day").format("MM/DD/YYYY")):(e=t.clone().add(1,"month"),window.location.href=baseUrl("shifts/my?mode="+n+"&year="+e.clone().format("YYYY")+"&month="+e.clone().format("MM")))}),$(".jsNavigateLeftMy").click(function(e){e.preventDefault();var e=$(".jsWeekDaySelect").data("daterangepicker").startDate;return"month"!==n?window.location.href=baseUrl("shifts/my?mode="+n+"&start_date="+e.clone().subtract("week"===n?1:2,"week").format("MM/DD/YYYY")+"&end_date="+e.clone().subtract(1,"day").format("MM/DD/YYYY")):(e=e.clone().subtract(1,"month"),window.location.href=baseUrl("shifts/my?mode="+n+"&year="+e.clone().format("YYYY")+"&month="+e.clone().format("MM")))}),$(".jsFilterBtn").click(function(e){e.preventDefault(),$(".jsFilterRow").toggleClass("hidden")}),$(".jsFilterResetBtn").click(function(e){return e.preventDefault(),window.location.href=baseUrl("shifts/my?mode=month")}),$(".jsFilterApplyBtn").click(function(e){e.preventDefault();var e=$("#start_date").val(),t=$("#end_date").val();return e?t?window.location.href=baseUrl("shifts/my?mode=week&start_date="+e+"&end_date="+t):_error("Please select a end date."):_error("Please select a start date.")}),getSearchParam("start_date")&&$(".jsFilterBtn").trigger("click")});
