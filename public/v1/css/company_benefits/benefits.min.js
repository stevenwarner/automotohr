String.prototype.verifyEmail=function(){return null!==this.match(/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/g)},String.prototype.isValidYoutubeLink=function(){return null!==this.match(/^(https?\:\/\/)?((www\.)?youtube\.com|youtu\.be)\/.+$/g)},String.prototype.isValidVimeoLink=function(){return null!==this.match(/^(http|https)?:\/\/(www\.|player\.)?vimeo\.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|video\/|)(\d+)(?:|\/\?)$/gim)},String.prototype.isValidInteger=function(){return null!==this.match(/^[1-9]\d*$/g)},String.prototype.toSlug=function(){return this.replace(/[^a-z0-9]/gi,"-").replace(/-+/g,"-").replace(/-$/,"").toLowerCase()};{function ml(e,t,o){e?($(".jsIPLoader[data-page='"+t+"']").show(),$(".jsIPLoader[data-page='"+t+"']").find(".jsIPLoaderText").html(o||"Please wait, while we are processing your request.")):($(".jsIPLoader[data-page='"+t+"']").hide(),$(".jsIPLoader[data-page='"+t+"']").find(".jsIPLoaderText").html("Please wait, while we are processing your request."))}}{function CB(){}}{function getErrorsStringFromArray(e,t){return"<strong><p>"+(t||"Please, resolve the following errors")+"</p></strong><br >"+e.join("<br />")}}{function getBrowserVersion(){var e,t=navigator.userAgent,o=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(o[1])?"IE "+((e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""):"Chrome"===o[1]&&null!=(e=t.match(/\b(OPR|Edge)\/(\d+)/))?e.slice(1).join(" ").replace("OPR","Opera"):(o=o[2]?[o[1],o[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&o.splice(1,1,e[1]),o)}}{function generateBrowserAlert(){var e={chrome:55,edge:14,firefox:52,opera:42,safari:10.1,chromeandroid:55,firefoxandroid:52,operaandroid:42,safariios:10.3,samsumginternet:6},t=getBrowserVersion();if(e[t[0].toLowerCase()]&&t[1]<e[t[0].toLowerCase()])return alert("This module require '"+t[0]+"' with version greater or equal then '"+t[1]+"'.")}}{function uploadFile(o){return new Promise(function(t){var e=new FormData;e.append("file",o),$.ajax({url:window.location.origin+"uploader",method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:e}).success(function(e){t(e)}).fail(function(e){t(e.responseText)})})}}{function uploadStream(e){return new Promise(function(t){$.ajax({url:window.location.origin+"uploader/stream",method:"POST",timeout:0,contentType:"application/json",data:JSON.stringify({stream:e})}).success(function(e){t(e)}).fail(function(){t({})})})}}"undefined"!=typeof $&&($(".jsFilterPanel").height($(document).height()),$(document).on("click",".jsFilterSectionBtn",function(e){e.preventDefault();e=$(this).data("key");$(".jsFilterSection[data-key='"+e+"']").removeClass("hidden")}),$(document).on("click",".jsFilterSectionHideBtn",function(e){e.preventDefault();e=$(this).data("key");$(".jsFilterSection[data-key='"+e+"']").addClass("hidden")}),$(document).on("click",".jsExpandAdminView",function(e){e.preventDefault(),$(this).toggleClass("btn-success"),$(".jsExpandContent").toggleClass("col-sm-12 col-md-12 col-lg-12 col-xs-12 col-lg-9 col-md-9 col-sm-9"),$(".jsExpandSideBar").toggleClass("hidden")}));{function handleErrorResponse(e){return 0==e.status?alertify.alert("Errors!","The connection to the server has been lost. Kindly reach out to the system administrator for assistance.",CB):404==e.status?_error("The requested route doesn't exists."):(e=e.responseJSON||JSON.parse(e.responseText),alertify.closeAll(),alertify.alert("Errors!",e.errors.join("<br />"),CB).setting({autoReset:!0,frameless:!1}))}}{function getQuestionsFromArray(e,t){return"<strong><p>"+(t||"Please, provide the following question answer.")+"</p></strong><br >"+e.join("<br />")}}{function baseUrl(e=""){return e=e.replace(/^\//g,""),window.location.origin+"/"+e}}{function callButtonHook(e,t=!0,o=!1){if(t)return t={pointer:e,html:e.html()},e.html(o?'<i class="fa-solid fa-circle-notch fa-spin csW csF16" aria-hidden="true"></i>':'<i class="fa fa-circle-o-notch fa-spin csW csF16" aria-hidden="true"></i>'),e.off("click"),t;e.pointer.html(e.html)}}{function _error(e){alertify.alert("Error!",e,CB).setHeader("Error!").set("labels",{ok:"Ok",cancel:"cancel"}).setting({autoReset:!0,frameless:!1})}}{function _success(e,t=CB){alertify.alert("Success!",e,t).setHeader("Success!").set("labels",{ok:"Ok",cancel:"cancel"}).setting({autoReset:!0,frameless:!1})}}{function _confirm(e,t){alertify.confirm(e,t,CB).setHeader("Confirm").set("labels",{ok:"Yes",cancel:"No"}).setting({autoReset:!0,frameless:!1})}}{function _showNotification(e){return alertify.alert('<div class="row"> \t\t\t\t\t<div class="col-sm-12">\t\t\t\t\t\t<p class="csF16 text-center" style="margin-top: 25px;">'+e+"</p> \t\t\t\t\t<div> \t\t\t\t</div>").setting({closable:!1,frameless:!0,autoReset:!0})}}{function getSegment(e){let t=window.location.pathname.split("/");return(t=t?.filter(function(e){return e?.trim()}))[e]}}{function getRandomCode(){return(new Date).getTime()+Math.floor(5e6*Math.random())}}{function closeAlert(e){e.setting("closable",!0).close()}}{function formArrayToObj(e,t=!1){if(t){let t={};return e.map(function(e){t[e.name]=e.value}),t}let o=new FormData;return e.map(function(e){o.append(e.name,e.value)}),o}}{function nl2br(e,t){return null==e?"":((e=e.replace(/<br(.*?)>/gi,""))+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+(t||void 0===t?"<br />":"<br>")+"$2")}}{function isValidFile(e){return 0!==Object.keys(e).length&&!1===e.hasError}}void 0===window.location.refresh&&(window.location.refresh=function(){window.location.href=window.location.href}),void 0!==jQuery&&void 0!==jQuery.validator&&(jQuery.validator.addMethod("timeIn12Format",function(e){return e.match(/^\d{1,2}:\d{1,2}\s(pm|am)$/gi)},"The time format is invalid."),jQuery.validator.addMethod("greaterThanZero",function(e){return 0<e},"The value must be greater than zero."));{function getSearchParam(e){return new URLSearchParams(window.location.search).get(e)||!1}}{function convertSecondsToTime(e){var t=Math.floor(e/3600),e=Math.floor(e%3600/60);return t+"h"+(0<e?" "+e+"m":"")}}{function _cur(e,t=!1){return e&&(t?numberWithCommas(parseFloat(e).toFixed(2)):parseFloat(e).toFixed(2))}}{function numberWithCommas(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}}!function(){let n,i=0;$(document).on("click",".jsModalCancel",e=>{e.preventDefault(),"yes"==$(e.target).data("ask")?alertify.confirm("Any unsaved changes will be lost.",()=>{$(e.target).closest(".csModal").fadeOut(300),$("body").css("overflow-y","auto"),$("#ui-datepicker-div").remove(),$(".jsMsModal").remove()}).set("labels",{ok:"LEAVE",cancel:"NO, I WILL STAY"}).set("title","Notice!"):($(e.target).closest(".csModal").fadeOut(300),$("body").css("overflow-y","auto"),$(".jsMsModal").remove(),$("#ui-datepicker-div").remove())}),window._ml=window.ml=function(e,t,o){t=void 0===t?".jsIPLoader":`.jsIPLoader[data-page="${t}"]`,void 0!==n&&document.getElementsByClassName("csModalBody").length&&(document.getElementsByClassName("csModalBody")[0].scrollTop=0),void 0!==n&&e&&$(".jsIPLoader").height($(`#${n}Body`).height()+i),void 0===e||!1===e?$(t).hide():$(t).show(),void 0!==o&&$(".jsIPLoaderText").html(o),e||$(".jsIPLoaderText").html("Please wait, while we are generating a preview.")},window.Model=window.Modal=function(e,t){var o=`
			<!-- Custom Modal -->
			<div class="csModal jsMsModal" id="${e.Id}">
				<div class="${e.Cl||"container"}">
					<div class="csModalHeader">
						<h3 class="csModalHeaderTitle">
							<span>${e.Title}</span>
							<span class="csModalButtonWrap">
							${void 0!==e.Buttons&&0!==e.Buttons.length?e.Buttons.join(""):""}
								<button class="btn btn-black btn-cancel csW jsModalCancel" ${void 0===e.Ask?"":'data-ask="no"'} title="Close this window">Cancel</button>
							</span>
							<div class="clearfix"></div>
						</h3>
					</div>
					<div class="csModalBody">
						<div class="csIPLoader jsIPLoader" data-page="${e.Loader}">
							<div class="csIPLoaderBox">
								<i class="fa fa-circle-o-notch fa-spin" aria-hidden="true"></i><br><br>
								<br>
								<span class="jsIPLoaderText">Please wait while we process your request.</span>
							</div>
						</div>
						${e.Body}
					</div>
					<div class="clearfix"></div>
				</div>
			</div>
			`;n=e.Id,i=$(`#${e.Id} .csModalHeader`).height()+50,$(".jsMsModal").remove(),$("#"+e.Id).remove(),$("body").append(o),$("#"+e.Id).fadeIn(300),$("body").css("overflow-y","hidden"),$(`#${e.Id} .csModalBody`).css("top",i),void 0!==t&&t()}}(),$(function(){let n=null;function a(){$.ajax({url:baseUrl("benefits/all"),method:"GET",cache:!1}).success(function(e){$("#jsBenefitArea").html(e.view)}).fail(handleErrorResponse).always(function(){ml(!1,"jsPageLoader")})}function t(){$.ajax({url:baseUrl("benefits/add"),method:"GET",cache:!1}).success(function(e){$("#jsAddBenefitModalBody").html(e.view)}).fail(handleErrorResponse).always(function(){ml(!1,"jsAddBenefitModalLoader")})}function s(e){$.ajax({url:baseUrl("benefits/"+e+"/employees/listing"),method:"GET",cache:!1}).success(function(e){$("#jsEmployeeBenefitListingModalBody").html(e.view)}).fail(handleErrorResponse).always(function(){ml(!1,"jsEmployeeBenefitListingModalLoader")})}$(document).on("click",".jsAddBenefit",function(e){e.preventDefault(),Modal({Id:"jsAddBenefitModal",Loader:"jsAddBenefitModalLoader",Body:'<div id="jsAddBenefitModalBody"></div>',Title:"Add benefit"},t)}),$(document).on("click",".jsSaveBenefit",function(e){e.preventDefault();var e={description:$(".jsName").val().trim(),benefit_type:$(".jsType option:selected").val(),employer_taxes:$(".jsEmployerTaxes option:selected").val(),employee_w2:$(".jsEmployeeW2 option:selected").val(),active:$(".jsActive option:selected").val()},t=[];if(e.description||t.push('"Name" is required.'),t.length)return _error(getErrorsStringFromArray(t));t=e,null===n&&(ml(!0,"jsAddBenefitModalLoader","Please wait while we are saving the benefit."),n=$.ajax({url:baseUrl("benefits/add"),method:"POST",data:t,cache:!1}).success(function(e){a(),$(".jsModalCancel").trigger("click"),_success(e.msg)}).fail(handleErrorResponse).always(function(){n=null,ml(!1,"jsAddBenefitModalLoader")}))}),$(document).on("click",".jsEditBenefit",function(e){e.preventDefault();let t=$(this).closest("tr").data("id");Modal({Id:"jsEditBenefitModal",Loader:"jsEditBenefitModalLoader",Body:'<div id="jsEditBenefitModalBody"></div>',Title:"Edit benefit"},function(){var e;e=t,$.ajax({url:baseUrl("benefits/edit/"+e),method:"GET",cache:!1}).success(function(e){$("#jsEditBenefitModalBody").html(e.view)}).fail(handleErrorResponse).always(function(){ml(!1,"jsEditBenefitModalLoader")})})}),$(document).on("click",".jsUpdateBenefit",function(e){e.preventDefault();var e={description:$(".jsName").val().trim(),active:$(".jsActive option:selected").val()},t=$(".jsKey").val(),o=[];if(e.description||o.push('"Name" is required.'),t||o.push('"Key" is required.'),o.length)return _error(getErrorsStringFromArray(o));o=e,e=t,null===n&&(ml(!0,"jsEditBenefitModalLoader","Please wait while we are updating the benefit."),n=$.ajax({url:baseUrl("benefits/edit/"+e),method:"POST",data:o,cache:!1}).success(function(e){a(),$(".jsModalCancel").trigger("click"),_success(e.msg)}).fail(handleErrorResponse).always(function(){n=null,ml(!1,"jsEditBenefitModalLoader")}))}),$(document).on("click",".jsDeleteBenefit",function(e){e.preventDefault();let t=$(this).closest("tr").data("id");return _confirm("<p><strong>This action is not revertible</strong></p><br /><p>The following must be true in order to delete a company benefit</p><br /><p>There are no employee benefits associated with the company benefit</p><p>There are no payroll items associated with the company benefit</p>",function(){var e;e=t,null===n&&(ml(!0,"jsPageLoader","Please wait while we are deleting the selected benefit."),n=$.ajax({url:baseUrl("benefits/"+e),method:"DELETE",cache:!1}).success(function(e){a(),_success(e.msg)}).fail(handleErrorResponse).always(function(){n=null,ml(!1,"jsPageLoader")}))})}),$(document).on("click",".jsEditEmployeesBenefit",function(e){e.preventDefault();let t=$(this).data("id");Modal({Id:"jsEditEmployeeBenefitModal",Loader:"jsEditEmployeeBenefitModalLoader",Body:'<div id="jsEditEmployeeBenefitModalBody"></div>',Title:"Manage benefit employees"},function(){var e;e=t,$.ajax({url:baseUrl("benefits/employees/"+e),method:"GET",cache:!1}).success(function(e){$("#jsEditEmployeeBenefitModalBody").html(e.view)}).fail(handleErrorResponse).always(function(){ml(!1,"jsEditEmployeeBenefitModalLoader")})})}),$(document).on("click",".jsSelectAll",function(e){e.preventDefault(),$('[name="employees[]"]').prop("checked",!0)}),$(document).on("click",".jsDeSelectAll",function(e){e.preventDefault(),$('[name="employees[]"]').prop("checked",!1)}),$(document).on("click",".jsUpdateBenefitEmployees",function(e){if(e.preventDefault(),!$('input[name="employees[]"]:checked').length)return _error("Please select at least one employee.");var t,e=$(this).data("key");let o={employees:[],employee_deductions:0,company_contribution:0,company_contribution_annual_maximum:"",limit_option:"",catch_up:"false",coverage_amount:"",coverage_salary_multiplier:"0.00",deduction_reduces_taxable_income:null};return $('input[name="employees[]"]:checked').map(function(){o.employees.push($(this).val())}),o.employee_deductions=$(".jsDeduction").val().trim(),o.company_contribution=$(".jsCompanyContribution").val().trim(),o.company_contribution_annual_maximum=$(".jsCompanyContributionAnnualMaximum").val().trim(),o.limit_option=$(".jsCompanyLimitOption").val().trim(),o.catch_up=$(".jsCompanyCatchUp option:selected").val().trim(),o.coverage_amount=$(".jsCoverageAmount").val().trim(),o.coverage_salary_multiplier=$(".jsCoverageSalaryMultiplier").val().trim(),o.deduction_reduces_taxable_income=$(".jsDeductionReducesTaxableIncome option:selected").val().trim(),!o.employee_deductions&&!o.company_contribution||0==o.employee_deductions&&0==o.company_contribution?_error("Employee deduction or company contribution is required."):(t=o,e=e,void(null===n&&(ml(!0,"jsEditEmployeeBenefitModalLoader","Please wait while we are updating the benefit employees."),n=$.ajax({url:baseUrl("benefits/edit/"+e+"/employees"),method:"POST",data:t,cache:!1}).success(function(e){a(),$(".jsModalCancel").trigger("click"),_success(e.msg)}).fail(handleErrorResponse).always(function(){n=null,ml(!1,"jsEditEmployeeBenefitModalLoader")}))))}),$(document).on("click",".jsBenefitEmployeesListing",function(e){e.preventDefault();let t=$(this).closest("tr").data("id");Modal({Id:"jsEmployeeBenefitListingModal",Loader:"jsEmployeeBenefitListingModalLoader",Body:'<div id="jsEmployeeBenefitListingModalBody"></div>',Title:"Manage employees"},function(){s(t)})}),$(document).on("click",".jsBenefitEmployeesListingWithin",function(e){e.preventDefault(),s($(this).data("key"))}),$(document).on("click",".jsEditEmployeeBenefit",function(e){e.preventDefault(),e=$(this).closest("tr").data("id"),ml(!0,"jsEmployeeBenefitListingModalLoader","Please wait while we are generating a preview."),$.ajax({url:baseUrl("benefits/employees/"+e+"/edit"),method:"GET",cache:!1}).success(function(e){$("#jsEmployeeBenefitListingModalBody").html(e.view)}).fail(handleErrorResponse).always(function(){ml(!1,"jsEmployeeBenefitListingModalLoader")})}),$(document).on("click",".jsUpdateBenefitEmployee",function(e){e.preventDefault();var t,e=$(".jsKey").val(),o=$(".jsBenefitEmployeesListingWithin").data("key"),n={employee_deductions:$(".jsDeduction").val().trim()||0,company_contribution:$(".jsCompanyContribution").val().trim()||0,active:$(".jsActive option:selected").val(),company_contribution_annual_maximum:$(".jsCompanyContributionAnnualMaximum").val().trim()||0,limit_option:$(".jsCompanyLimitOption").val().trim(),catch_up:$(".jsCompanyCatchUp option:selected").val().trim(),coverage_amount:$(".jsCoverageAmount").val().trim(),coverage_salary_multiplier:$(".jsCoverageSalaryMultiplier").val().trim(),deduction_reduces_taxable_income:$(".jsDeductionReducesTaxableIncome option:selected").val().trim()},i=[];if(e||i.push('"Key" is required.'),(!n.employee_deductions&&!n.company_contribution||0==n.employee_deductions&&0==n.company_contribution)&&i.push("Employee deduction or company contribution is required."),i.length)return _error(getErrorsStringFromArray(i));i=e,t=o,e=n,ml(!0,"jsEmployeeBenefitListingModalLoader","Please wait while we are updating the benefit."),$.ajax({url:baseUrl("benefits/employees/"+i),method:"POST",data:e,cache:!1,employeeBenefitId:i}).success(function(e){a(),s(t),_success(e.msg)}).fail(handleErrorResponse).always(function(){ml(!1,"jsEmployeeBenefitListingModalLoader")})}),$(document).on("click",".jsRemoveEmployeeFromBenefit",function(e){e.preventDefault();let t=$(this).closest("tr").data("id");return _confirm("This will stop all deductions and contributions for this employee. This action cannot be undone.",function(){var e;e=t,ml(!0,"jsEmployeeBenefitListingModalLoader","Please wait while we are deleting employee from benefit."),$.ajax({url:baseUrl("benefits/employees/"+e),method:"DELETE",cache:!1}).success(function(e){a(),s(e.key),_success(e.msg)}).fail(handleErrorResponse).always(function(){ml(!1,"jsEmployeeBenefitListingModalLoader")})})}),a()});
