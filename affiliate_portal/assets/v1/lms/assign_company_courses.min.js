$((function(){let e=null,s={title:"",jobTitleIds:"all"},t=[],o=0,n=0,l=0;function r(){if(t.length>0&&void 0===t[l])return ml(!1,"jsPageLoader"),$("#js-loader-text").html(""),alertify.alert("Course Copy process is completed successfully!",(function(){t=[],o=0,n=0,l=0,c(),getLMSDefaultCourses()}));if(void 0===t[l])return ml(!1,"jsPageLoader"),void $("#js-loader-text").html("");var s=t[l];e=$.ajax({url:apiURL+"lms/course/assign",method:"POST",headers:{"content-type":"application/json"},data:JSON.stringify({courseID:s.course_sid})}).fail(handleErrorResponse).done((function(){l<=o?(l++,setTimeout((function(){r()}),1e3)):(ml(!1,"jsPageLoader"),alertify.alert("Course copy process is completed successfully!").set("onok",(function(e){t=[],o=0,n=0,l=0})))}))}function i(){let e="";return e+="title="+encodeURI(s.title),e+="&status="+encodeURI("active"),e+="&companyId="+encodeURI(companySid),e+="&job_titles="+("all"!=s.jobTitleIds?s.jobTitleIds.join(","):[]),e}function c(){null!==e&&e.abort(),ml(!0,"jsPageLoader"),e=$.ajax({url:apiURL+"lms/course/store/courses?"+i(),method:"GET",headers:{Authorization:"Bearer "+apiAccessTokenStore}}).success((function(s){e=null,$("#jsStoreCoursesView").html(s),ml(!1,"jsPageLoader")})).fail(handleErrorResponse).done((function(){e=null,ml(!1,"jsPageLoader")}))}$(".jsCourseJobTitleStoreCourse").select2(),$(".jsApplyFilterStoreCourse").click((function(e){e.preventDefault(),s.title=$(".jsCourseTitleStoreCourse").val()||"",s.jobTitleIds=$(".jsCourseJobTitleStoreCourse").select2("val"),c()})),$(document).on("click",".jsToggleViewAssignCompanyCourse",(function(e){e.preventDefault(),$('[data-key="jsView'+$(this).closest("tr").data("id")+'"]').toggleClass("hidden")})),$(document).on("click",".jsCheckAll",(function(){$(".jsStoreCourseRow").find('input[name="courses_ids[]"]').prop("checked",$(this).prop("checked"))})),$(document).on("click",".jsAssignCourses",(function(){$(".jsCheckAll").prop("checked",$(".jsAssignCourses").length==$(".jsAssignCourses:checked").length)})),$(document).on("click",".jsCopyCoursesBtn",(function(e){if(e.preventDefault(),t=function(){var e=[];return $.each($('input[name="courses_ids[]"]:checked'),(function(){var s={};s.course_sid=parseInt($(this).val()),s.course_name=$(this).closest("tr").find("td.js-course-name").text(),e.push(s)})),e}(),0===t.length)return alertify.alert("ERROR!","Please select at least one course to start the process.");ml(!0,"jsPageLoader"),$("#js-loader-text").html("Please wait, we are copying employee"),r()})),c()}));