$((function(){let e=null;$("#jsSubordinateDepartments").select2({closeOnSelect:!1}),departments&&$("#jsSubordinateDepartments").select2("val",departments.split(",")),$("#jsSubordinateTeams").select2({closeOnSelect:!1}),teams&&$("#jsSubordinateTeams").select2("val",teams.split(",")),$("#jsSubordinateEmployees").select2({closeOnSelect:!1}),employees&&$("#jsSubordinateEmployees").select2("val",employees.split(",")),$(document).on("click",".jsSearchEmployees",(function(s){s.preventDefault();var t=$("#jsSubordinateDepartments").val(),a=$("#jsSubordinateTeams").val(),l=$("#jsSubordinateEmployees").val();null!==e&&e.abort(),ml(!0,"jsPageLoader"),e=$.ajax({url:baseURL+"lms/courses/report",method:"GET",data:{departments:t,teams:a,employees:l}}).success((function(s){e=null;var t="";$.each(s,(function(e,s){s.team_sid,s.department_sid;var a=s.assign_courses?s.assign_courses.split(","):[],l=a?a.length:0,n=l>1?l+" courses assign":l+" course assign";t+='<tr class="js-tr">',t+=`<td><input type="checkbox" name="employees_ids[]" value="${s.employee_sid}" /></td>`,t+=`<td class="_csVm"><b>${s.full_name}</b></td>`,t+=`<td class="_csVm">${s.department_name}</td>`,t+=`<td class="_csVm">${s.team_name}</td>`,t+=`<td class="_csVm">${n}</td>`,t+=`<td class="_csVm"><a href="${baseURL}lms/subordinate/courses/${s.employee_sid}" class="btn btn-info btn-block csRadius5">View</a></td>`,t+="</tr>"})),$("#jsSubordinateList").html(t),ml(!1,"jsPageLoader")})).fail(handleErrorResponse).always((function(){e=null,ml(!1,"jsPageLoader")}))})),$(document).on("click",".js-check-all",(function(){$(".js-tr").find('input[name="employees_ids[]"]').prop("checked",$(this).prop("checked"))})),$(document).on("click",".js-tr",(function(){$(this).find('input[name="employees_ids[]"]').prop("checked",!$(this).find('input[name="employees_ids[]"]').prop("checked"))})),$(document).on("click",".jsSendReminderEmail",(function(s){var t;s.preventDefault(),senderList=(t=[],$.each($('input[name="employees_ids[]"]:checked'),(function(){var e={};e.employee_sid=parseInt($(this).val()),e.employee_name=$(this).closest("tr").find("td.js-employee-name").text(),t.push(e)})),t),0!==senderList.length?alertify.confirm("Do you really want to send email reminders to the selected employees?",(function(){!function(s){null!==e&&e.abort();ml(!0,"jsPageLoader"),e=$.ajax({url:baseURI+"lms/courses/emailReminder/bulk",method:"POST",data:{employeeList:s}}).success((function(s){return e=null,ml(!1,"jsPageLoader"),alertify.alert("SUCCESS!","You have successfully sent an email reminder to selected employees.")})).fail(handleErrorResponse).done((function(s){e=null}))}(senderList)})):alertify.alert("ERROR!","Please select at least one employee to start the process.")})),ml(!1,"jsPageLoader")}));