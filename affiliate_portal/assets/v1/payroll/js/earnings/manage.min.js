$((function(){let e=null,n=0,a="jsPageLoader";function r(a){_ml(!0,"jsEditEarningTypeLoader");let r="payrolls/earnings/"+a+"/"+n;e=$.ajax({url:baseUrl(r),method:"GET",caches:!1}).success((function(e){$("#jsEditEarningTypeBody").html(e.view)})).fail(handleErrorResponse).always((function(){e=null,_ml(!1,"jsEditEarningTypeLoader")}))}$(document).on("click",".jsMenuTrigger",(function(e){e.preventDefault(),r($(this).data("step"))})),$(".jsDeactivateEarningType").click((function(n){n.preventDefault();const r=$(this).closest("tr").data("id");return alertify.confirm("Do you really want to deactivate this earning type?<br /> This action is not revertible.",(function(){!function(n){ml(!0,a),e=$.ajax({url:baseUrl("payrolls/earnings/deactivate/"+n),method:"DELETE"}).success((function(){return alertify.alert("Success!","You have successfully deactivated the earning type.",(function(){window.location.reload()}))})).fail(handleErrorResponse).always((function(){e=null,ml(!1,a)}))}(r)})).setHeader("Confirm!")})),$(".jsAddEarningType").click((function(n){n.preventDefault(),Modal({Id:"jsAddEarningType",Title:"Add an Earning Type",Loader:"jsAddEarningTypeLoader",Body:'<div id="jsAddEarningTypeBody"></div>'},(function(){!function(n){_ml(!0,"jsAddEarningTypeLoader");let a="payrolls/earnings/"+n;e=$.ajax({url:baseUrl(a),method:"GET",caches:!1}).success((function(e){$("#jsAddEarningTypeBody").html(e.view)})).fail(handleErrorResponse).always((function(){e=null,_ml(!1,"jsAddEarningTypeLoader")}))}("add")}))})),$(".jsUpdateEarningType").click((function(e){e.preventDefault(),n=$(this).closest("tr").data("id"),Modal({Id:"jsEditEarningType",Title:"Edit an Earning Type",Loader:"jsEditEarningTypeLoader",Body:'<div id="jsEditEarningTypeBody"></div>'},(function(){r("edit")}))})),$(document).on("submit","#jsEarningForm",(function(n){n.preventDefault();const a={name:$("#jsEarningName").val().trim()};let r=[];if(a.name||r.push('"Name" is missing.'),r.length)return alertify.alert("Error!",getErrorsStringFromArray(r),CB);ml(!0,"jsAddEarningTypeLoader","Please wait, while we are creating earning type."),e=$.ajax({url:baseUrl("payrolls/earnings/add"),method:"POST",data:a}).success((function(e){return $(".jsModalCancel").trigger("click"),alertify.alert("Success!",e.msg,(function(){window.location.reload()}))})).fail(handleErrorResponse).always((function(){e=null,ml(!1,"jsAddEarningTypeLoader")}))})),$(document).on("submit","#jsEarningEditForm",(function(a){a.preventDefault();const r={name:$("#jsEarningName").val().trim()};let i=[];if(r.name||i.push('"Name" is missing.'),i.length)return alertify.alert("Error!",getErrorsStringFromArray(i),CB);ml(!0,"jsEditEarningTypeLoader","Please wait, while we are updating earning type."),e=$.ajax({url:baseUrl("payrolls/earnings/edit/"+n),method:"POST",data:r}).success((function(e){return $(".jsModalCancel").trigger("click"),alertify.alert("Success!",e.msg,(function(){window.location.reload()}))})).fail(handleErrorResponse).always((function(){e=null,ml(!1,"jsEditEarningTypeLoader")}))})),ml(!1,a)}));