$((function () { let e = 0, a = null; $("#report_status").select2({ minimumResultsForSearch: -1 }), $("#report_date").datetimepicker({ format: "m/d/Y", datepicker: !0, timepicker: !1, changeYear: !0, changeMonth: !0 }), $(".start_date").datetimepicker({ format: "m/d/Y", datepicker: !0, timepicker: !1, changeYear: !0, changeMonth: !0 }), $("#report_completion_date").datetimepicker({ format: "m/d/Y", datepicker: !0, timepicker: !1, changeYear: !0, changeMonth: !0 }), $("#jsDepartments").select2({ closeOnSelect: !1 }), $("#jsAddReportForm").validate({ rules: { report_title: { required: !0 }, report_type: { required: !0 }, report_date: { required: !0 } }, messages: { report_title: { required: "Please enter report title" }, report_date: { required: "Please select report date" } }, submitHandler: function (e) { !function (e) { null === a && (ml(!0, "jsPageLoader"), a = $.ajax({ url: baseUrl("compliance_safety_reporting/add/" + getSegment(2)), method: "POST", data: $(e).serializeArray() }).always((function () { a = null, ml(!1, "jsPageLoader") })).fail(handleErrorResponse).done((function (e) { _success(e.message, (function () { window.location.href = baseUrl("compliance_safety_reporting/edit/" + e.id + "?tab=issues") })) }))) }(e) } }), $(".jsAddExternalEmployee").click((function (a) { a.preventDefault(), $(".jsAddExternalBody .alert").remove(), function () { let a = `\n        <div class="row" data-external="${e}">\n            <div class="col-md-5">\n                <div class="form-group">\n                    <label for="external_employee_name">Name</label>\n                    <input type="text" name="external_employees_names[${e}]['name']" class="form-control" required>\n                </div>\n            </div>\n            <div class="col-md-5">\n                <div class="form-group">\n                    <label for="external_employee_email">Email</label>\n                    <input type="email" name="external_employees_emails[${e}]['email']" class="form-control" required>\n                </div>\n            </div>\n            <div class="col-md-1">\n                <div class="form-group">\n                    <label>&nbsp;</label>\n                    <button type="button" class="btn btn-red btn-block jsRemoveExternalEmployee">\n                        <i class="fa fa-trash"></i>\n                    </button>\n                </div>\n            </div>\n        </div>\n        `; e++, $(".jsAddExternalBody").append(a), $(`input[name="external_employees[${e - 1}]['name']"]`).rules("add", { required: !0, messages: { required: "Please enter the name" } }), $(`input[name="external_employees[${e - 1}]['email']"]`).rules("add", { required: !0, email: !0, messages: { required: "Please enter the email", email: "Please enter a valid email address" } }) }() })), $(document).on("click", ".jsRemoveExternalEmployee", (function () { const a = $(this).closest(".row"); alertify.confirm("Are you sure you want to remove this external employee?", (function () { $(`input[name="external_employees[${a.data("external")}]['name']"]`).rules("remove"), $(`input[name="external_employees[${a.data("external")}]['email']"]`).rules("remove"), a.remove(), e--, 0 == e && $(".jsAddExternalBody").html(' <div class="alert alert-info text-center">No External employees found</div>') })) })), ml(!1, "jsPageLoader") }));