$(function(){function e(){$(".js-tr").find('input[name="issues_ids[]"]').prop("checked",$(this).prop("checked"))}function t(){$(this).find('input[name="issues_ids[]"]').prop("checked",!$(this).find('input[name="issues_ids[]"]').prop("checked"))}function n(){null===o&&(ml(!0,"jsPageLoader"),o=$.ajax({url:baseUrl("compliance_safety_reporting/send_issue_reminder_email"),method:"POST",data:{issuesIds:i}}).always(function(){o=null,ml(!1,"jsPageLoader")}).fail(handleErrorResponse).done(function(e){_success(e.message,function(){window.location.reload()})}))}function s(){var e=$("#severityLevel").val(),t=$("#incidentType").val(),n=$("#status").val(),s=$("#applicant_status").val(),o=$("#jsDateRangePicker").val();e=""!=e&&null!=e&&null!=e&&0!=e?encodeURIComponent(e):"-1",t=""!=t&&null!=t&&null!=t&&0!=t?encodeURIComponent(t):"-1",n=""!=n&&null!=n&&null!=n&&0!=n?encodeURIComponent(n):"-1",s=""!=s&&null!=s&&null!=s&&0!=s?encodeURIComponent(s):"-1",o=""!=o&&null!=o&&null!=o&&0!=o?encodeURIComponent(o):"";var i=baseUrl("compliance_safety_reporting/export_csv?")+"/"+e+"/"+t+"/"+n+"/"+s+"/"+o;$("#jsCSVButton").attr("href",i)}let o=null,i=[];Highcharts.chart("jsProgressGraph",{chart:{type:"pie"},title:{text:"Compliance Progress",style:{fontSize:"14px"}},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},accessibility:{point:{valueSuffix:"%"}},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %",style:{fontSize:"14px"}}}},legend:{itemStyle:{fontSize:"14px"}},series:[{name:"Tasks",colorByPoint:!0,data:JSON.parse(progressGraphData).map((e,t)=>({...e,color:JSON.parse(progressGraphColors)[t]}))}]}),Highcharts.chart("jsSeverityGraph",{chart:{type:"column"},title:{text:"Compliance Progress by Severity Levels",style:{fontSize:"14px"}},xAxis:{categories:JSON.parse(severityLevelGraph).categories,title:{text:"Severity Level",style:{fontSize:"14px"}},labels:{style:{fontSize:"14px"}}},yAxis:{min:0,title:{text:"Number of Issues",style:{fontSize:"14px"}},labels:{style:{fontSize:"14px"}}},tooltip:{pointFormat:"<b>{point.y}</b> issues at Severity Level {point.category}"},plotOptions:{column:{colorByPoint:!0,dataLabels:{enabled:!0,format:"{point.y}",style:{fontSize:"14px"}}}},legend:{itemStyle:{fontSize:"14px"}},series:[{name:"Issues",data:JSON.parse(severityLevelGraph).data,colors:JSON.parse(severityLevelGraph).colors}]}),$("#jsDateRangePicker").daterangepicker({showDropdowns:!0,autoApply:!0,locale:{format:"MM/DD/YYYY",separator:" - "}}),$(document).on("click",".js-check-all",e),$(document).on("click",".js-tr",t),$(".jsSendReminderEmails").click(function(e){if(e.preventDefault(),$.each($('input[name="issues_ids[]"]:checked'),function(){i.push(parseInt($(this).val()))}),!i.length)return alertify.alert("Please select an issue to send reminder email."),!1;_confirm("Are you sure you want to send emails to the selected employees and external recipients?",n)}),$("#jsCSVButton").on("click",function(e){e.preventDefault(),s(),window.location=$(this).attr("href").toString()})});