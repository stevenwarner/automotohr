!function($){let instances={},ADF=0;$.fn.mFileUploader=function(opt){let _this=this.length>1?this[0]:this;if("string"==typeof opt){switch(opt){case"get":return instances[_this.selector];case"clear":return delete instances[_this.selector]}return}let oFile={},randKey=Math.ceil(1e3*Math.random()),options={};instances[_this.selector]=oFile,options.s3=void 0!==opt&&opt.s3||"https://automotohrattachments.s3.amazonaws.com/",options.path=void 0!==opt&&opt.path||!0,options.placeholderImage=void 0!==opt&&opt.placeholderImage||"",options.fileLimit=-1===$.inArray("mp4",opt.allowedTypes)?-1:opt.fileLimit,options.allowedTypes=void 0!==opt&&opt.allowedTypes||["jpg","jpeg","png","gif","pdf","doc","docx","rtf","ppt","xls","xlsx","csv"],options.text=void 0!==opt&&opt.text||"Click / Drag to upload",options.onSuccess=void 0!==opt&&opt.onSuccess||function(){},options.onError=void 0!==opt&&opt.onError||function(){},options.onClear=void 0!==opt&&opt.onClear||function(){},options.mainDivName=`jsUploadArea${randKey}`,options.mainImageViewer=`jsUploadedImageArea${randKey}`,options.errorMSG=`jsUploadedAreaError${randKey}`,options.jsMFUPreviewFile=`jsMFUPreviewFile${randKey}`,options.jsMFUClearFile=`jsMFUClearFile${randKey}`,options.jsMFUModal=`jsMFUModal${randKey}`,options.jsMFUD=`jsMFUD${randKey}`;let errorCodes={size:`File size exceeded from ${options.fileLimit}`,type:"Invalid file type."};const destroyView=()=>{$(_this.selector).siblings("div.jsMainUploadAreaWrapper").remove(),$.fn.mFileUploader.__proto__.instances[_this.selector]={}};destroyView();const distroyOldInstance=()=>{$(_this.selector).siblings("div.csUploadArea").remove(),$.fn.mFileUploader.__proto__.instances[_this.selector]={}};void 0!==$.fn.mFileUploader.instances[_this.selector]&&distroyOldInstance();const setMainView=()=>{$(_this).before(getWrapper())},callLogger=m=>{console.log(m)},generateModalHTML=(tag,filename)=>`\n            \x3c!-- Modal --\x3e\n            <div class="modal fade" id="${options.jsMFUModal}" tabindex="-1" role="dialog" aria-labelledby="modelTitleId" aria-hidden="true">\n                <div class="modal-dialog modal-lg" role="document">\n                    <div class="modal-content">\n                        <div class="modal-header" style="background-color: #81b431; color: #ffffff;">\n                            <h5 class="modal-title">${filename}</h5>\n                        </div>\n                        <div class="modal-body" style="min-height: 300px;">\n                            <div class="csMFULoader jsMFULoader"><i class="fa fa-circle-o-notch fa-spin"></i></div>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-success ${options.jsMFUD}">Download</button>\n                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            `,getWrapper=()=>`\n            <div class="jsMainUploadAreaWrapper">\n                <div class="csUploadArea" id="${options.mainDivName}">\n                    <div class="csUploadInnerArea">\n                        <p>${options.text}</p>\n                        ${-1!=options.fileLimit?`<em style="color:rgb(255, 155, 0);"><i class="fa fa-warning"></i> Maximum allowed file size is ${options.fileLimit}</em><br />`:""}\n                        <span>(${options.allowedTypes})</span> <br /><br />\n                        <span style="color: red; font-weight: bold; display: none;" id="${options.errorMSG}"></span>\n                        <div style="${options.placeholderImage?"":"display: none;"}">\n                            <button class="btn btn-success" id="${options.jsMFUPreviewFile}" data-key="${options.placeholderImage}">Preview File</button>\n                            <button class="btn btn-default" id="${options.jsMFUClearFile}" style="display: none;">Clear File</button>\n                        </div>\n                    </div>\n                    \x3c!-- Image --\x3e\n                </div>\n                <div class="clearfix"></div>\n                \x3c!-- <div style="${options.placeholderImage?"":"display: none;"}">\n                <br /> \n                    <label><strong>FileName:</strong> <span>${options.placeholderImage?options.placeholderImage[0]:""}</span></label>\n                    <img src="${options.placeholderImage?options.placeholderImage[1]:""}" class="csUploadAreaImage" id="${options.mainImageViewer}" />\n                </div> --\x3e\n            </div>\n            `,getFileExtension=filename=>{let t=void 0===filename?oFile.name.split("."):filename.split(".");return t[t.length-1].toLowerCase()},getLimit=()=>{let sp=options.fileLimit.replace(/\s+/,"").toUpperCase().split(/([0-9]+)([A-Za-z]+)/);return sp=[sp[1],sp[2]],"MB"==sp[1]?1e6*sp[0]:"GB"==sp[1]?1e3*sp[0]*1e6:"KB"==sp[1]?1e3*sp[0]:0},readURL=input=>{if(input){let reader=new FileReader;reader.onload=e=>{$(`#${options.jsMFUPreviewFile}`).data("key",e.target.result),$(`#${options.jsMFUPreviewFile}`).parent().show(),$(`#${options.jsMFUClearFile}`).show()},reader.readAsDataURL(input)}},validateFile=e=>($(`#${options.jsMFUPreviewFile}`).parent().hide(0),$(`#${options.jsMFUClearFile}`).hide(0),$(`#${options.errorMSG}`).hide(),$(`#${options.mainImageViewer}`).parent().hide(),$(`#${options.mainImageViewer}`).attr("src",null),$(`#${options.mainImageViewer}`).parent().find("label span").text(""),oFile.hasOwnProperty("hasError")&&(oFile.hasError=!1),-1===$.inArray(getFileExtension(),options.allowedTypes)?($(`#${options.errorMSG}`).text(errorCodes.type).show(),options.onError(errorCodes.type,e),oFile.hasError=!0,oFile.errorCode=errorCodes.type,instances[_this.selector]=oFile,void(oFile={})):-1!==options.fileLimit&&oFile.size>getLimit()?($(`#${options.errorMSG}`).text(errorCodes.size).show(),options.onError(errorCodes.size,e),oFile.hasError=!0,oFile.errorCode=errorCodes.size,instances[_this.selector]=oFile,void(oFile={})):(readURL(oFile),oFile.hasError=!1,instances[_this.selector]=oFile,void options.onSuccess(oFile,e)));return this.getValue=()=>oFile,$(document).on("drop",`#${options.mainDivName}`,(function(e){e.preventDefault(),oFile=e.originalEvent.dataTransfer.files[0],validateFile(e)})),$(document).on("dragenter",`#${options.mainDivName}`,(function(e){e.preventDefault(),$(this).css("opacity",".8")})),$(document).on("dragover",`#${options.mainDivName}`,(function(e){e.preventDefault(),$(this).css("opacity","1")})),$(document).on("click",`#${options.mainDivName}`,(function(e){e.preventDefault(),$(_this).trigger("click")})),$(document).on("change",_this.selector,(function(e){oFile=e.target.files[0],validateFile(e)})),$(document).on("click",`.${options.jsMFUD}`,(function(e){e.preventDefault(),e.stopPropagation();let filename="",fullFileName="";alert("sadasd"),null===$(`#${options.jsMFUPreviewFile}`).data("key").match(/data:/)?(filename=$(`#${options.jsMFUPreviewFile}`).data("key"),fullFileName=options.path?options.s3+filename:filename,console.log(fullFileName)):(filename=oFile.name,fullFileName=$(`#${options.jsMFUPreviewFile}`).data("key"));let link=document.createElement("a");link.target="_blank",link.href=fullFileName,link.download=filename,link.dispatchEvent(new MouseEvent("click"))})),$(document).on("click",`#${options.jsMFUClearFile}`,(function(e){e.preventDefault(),e.stopPropagation(),$(`#${options.jsMFUPreviewFile}`).parent().hide(0),$(`#${options.jsMFUClearFile}`).hide(0),oFile={},instances[_this.selector]=oFile,""!=options.placeholderImage&&($(`#${options.jsMFUPreviewFile}`).data("key",options.placeholderImage),$(`#${options.jsMFUPreviewFile}`).parent().show(0)),options.onClear()})),$(document).on("click",`#${options.jsMFUPreviewFile}`,(function(e){e.preventDefault(),e.stopPropagation();let filename="",extension="",fullFileName="",tag="";null===$(this).data("key").match(/data:/)?(filename=$(this).data("key"),extension=getFileExtension(filename),fullFileName=options.s3+filename,tag=-1!==$.inArray(extension,["xls","xlsx","ppt","pptx","doc","docx","rtf","csv"])?`<iframe frameborder="0" width="100%" height="600" class="jsMFUIframe" src="https://view.officeapps.live.com/op/embed.aspx?src=${encodeURI(fullFileName)}"></iframe>`:-1!==$.inArray(extension,["png","jpg","jpeg","gif","svg"])?`<img class="img-responsive" src="${fullFileName}" />`:-1!==$.inArray(extension,["mp4"])?`<video class="img-responsive" src="${fullFileName}" controls></video>`:`<iframe frameborder="0" width="100%" height="600" class="jsMFUIframe" src="https://docs.google.com/gview?url=${fullFileName}&embedded=true"></iframe>`):(filename=oFile.name,extension=getFileExtension(),fullFileName=$(this).data("key"),tag=-1!==$.inArray(extension,["png","jpg","jpeg","gif","svg"])?`<img class="img-responsive" src="${fullFileName}" />`:-1!==$.inArray(extension,["mp4"])?`<video class="img-responsive" src="${fullFileName}" controls></video>`:`<iframe frameborder="0" width="100%" height="600" class="jsMFUIframe" src="${fullFileName}"></iframe>`);const modalHTML=generateModalHTML(tag,filename);$(`#${options.jsMFUModal}`).remove(),$("body").append(modalHTML),$(`#${options.jsMFUModal}`).modal("show"),tag.match(/img/),$(`#${options.jsMFUModal} .modal-body`).html(tag)})),setMainView(),this},$.fn.mFileUploader.__proto__.instances=instances}(jQuery||$);