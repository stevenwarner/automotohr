$((function ComplyNetManageJobRoles(){let loaderRef="#jsMainLoader",jobRoleId=0,xhr=null;function startAddJobRoleProcess(){null!==xhr&&xhr.abort(),Modal({Id:"jsAddJobRoleModal",Loader:"jsAddJobRoleModalLoader",Title:"Link System Job Role To ComplyNet",Body:'<div class="container"><div id="jsAddJobRoleModalBody"></div></div>'},(function(){xhr=$.get(baseURI+"cn/job_role_view/"+jobRoleId).success((function(resp){xhr=null,$("#jsAddJobRoleModalBody").html(resp.view),$(".jsSelect2").select2(),$(".jsSelect2Tags").select2({tags:!0,closeOnSelect:!1}),ml(!1,"jsAddJobRoleModalLoader")})).fail(handleFailure)}))}function startShowJobRoleProcess(){null!==xhr&&xhr.abort(),Modal({Id:"jsViewJobRoleModal",Loader:"jsViewJobRoleModalLoader",Title:"View job roles",Body:'<div class="container"><div id="jsViewJobRoleModalBody"></div></div>'},(function(){xhr=$.get(baseURI+"cn/job_role_view_details/"+jobRoleId).success((function(resp){xhr=null,$("#jsViewJobRoleModalBody").html(resp.view),ml(!1,"jsViewJobRoleModalLoader")})).fail(handleFailure)}))}function deleteJobRole(recordId){ml(!0,"jsViewJobRoleModalLoader"),$.ajax({url:baseURI+"cn/manage/job_role/"+recordId,method:"DELETE"}).success((function(){$("#jsViewJobRoleModal .jsModalCancel").trigger("click"),startShowJobRoleProcess()})).fail(handleFailure)}function loader(cond,msg=""){cond?($(loaderRef).show(),$(loaderRef+" .jsLoaderText").html(msg||"Please wait, while we process your request.")):($(loaderRef).hide(),$(loaderRef+" .jsLoaderText").html("Please wait, while we process your request."))}function handleFailure(resp){if(xhr=null,401===resp.status)return alertify.alert("Error","Your login session expired. Please log in!",(function(){window.location.reload()}))}function CB(){}$(".jsAddJobRole").click((function(event){event.preventDefault(),jobRoleId=$(this).closest("tr").data("id"),startAddJobRoleProcess()})),$(".jsShowLinkedJobs").click((function(event){event.preventDefault(),jobRoleId=$(this).closest("tr").data("id"),startShowJobRoleProcess()})),$(document).on("click",".jsDeleteJobRole",(function(event){event.preventDefault();var roleId=$(this).closest("tr").data("id");return alertify.confirm("<p><em><strong>This action is not revertible.</strong></em></p><p>This action will delete ComplyNet job title against all employees matching the selected job title.</p>",(function(){deleteJobRole(roleId)}))})),$(document).on("click",".jsLinkJobRoleBtn",(function(event){event.preventDefault();var obj={id:jobRoleId,job_roles:$(".jsSelect2Tags").val()};if(null==obj.job_roles)return alertify.alert("Warning!","Please select at least one job role.",CB);ml(!0,"jsAddJobRoleModalLoader"),xhr=$.post(baseURI+"cn/manage/job_role/"+jobRoleId+"/link",obj).success((function(){return xhr=null,$("#jsAddJobRoleModal .jsModalCancel").trigger("click"),alertify.alert("Success","You have successfully linked the job roles.",windlow.location.reload)})).fail(handleFailure)}))}));