$((function(){let e,a;function t(t){t.preventDefault(),e=$(this).data("id"),a=$(this).data("name"),Model({Id:"jsEmployeeProfileHistoryModel",Loader:"jsEmployeeProfileHistoryLoader",Body:'<div class="container"><div id="jsEmployeeProfileHistoryBody"></div></div>',Title:"Profile History of "+a},o)}function o(){let a="";a+="<div>",a+="  \x3c!-- Nav tabs --\x3e",a+='  <ul class="nav nav-tabs" role="tablist">',a+='    <li role="presentation" class="active"><a href="#profile" id="profileHead" aria-controls="profile" role="tab" data-toggle="tab">Profile <span></span></a></li>',a+='    <li role="presentation"><a href="#directDeposit" id="directDepositHead" aria-controls="directDeposit" role="tab" data-toggle="tab">Direct Deposit <span></span></a></li>',a+='    <li role="presentation"><a href="#driversLicense" id="driversLicenseHead" aria-controls="driversLicense" role="tab" data-toggle="tab">Drivers License <span></span></a></li>',a+='    <li role="presentation"><a href="#occupationalLicense" id="occupationalLicenseHead" aria-controls="occupationalLicense" role="tab" data-toggle="tab">Occupational License <span></span></a></li>',a+='    <li role="presentation"><a href="#dependent" id="dependentHead" aria-controls="dependent" role="tab" data-toggle="tab">Dependents <span></span></a></li>',a+='    <li role="presentation"><a href="#emergencyContact" id="emergencyContactHead" aria-controls="emergencyContact" role="tab" data-toggle="tab">Emergency Contacts <span></span></a></li>',a+='    <li role="presentation"><a href="#w4" id="w4Head" aria-controls="w4" role="tab" data-toggle="tab">W4 <span></span></a></li>',a+="  </ul>",a+="  \x3c!-- Tab panes --\x3e",a+='  <div class="tab-content">',a+='    <div role="tabpanel" class="tab-pane active" id="profile"></div>',a+='    <div role="tabpanel" class="tab-pane" id="directDeposit"></div>',a+='    <div role="tabpanel" class="tab-pane" id="driversLicense"></div>',a+='    <div role="tabpanel" class="tab-pane" id="occupationalLicense"></div>',a+='    <div role="tabpanel" class="tab-pane" id="dependent"></div>',a+='    <div role="tabpanel" class="tab-pane" id="emergencyContact"></div>',a+='    <div role="tabpanel" class="tab-pane" id="w4"></div>',a+="  </div>",a+="</div>",$("#jsEmployeeProfileHistoryBody").html('<div>  \x3c!-- Nav tabs --\x3e  <ul class="nav nav-tabs" role="tablist">    <li role="presentation" class="active"><a href="#profile" id="profileHead" aria-controls="profile" role="tab" data-toggle="tab">Profile <span></span></a></li>    <li role="presentation"><a href="#directDeposit" id="directDepositHead" aria-controls="directDeposit" role="tab" data-toggle="tab">Direct Deposit <span></span></a></li>    <li role="presentation"><a href="#driversLicense" id="driversLicenseHead" aria-controls="driversLicense" role="tab" data-toggle="tab">Drivers License <span></span></a></li>    <li role="presentation"><a href="#occupationalLicense" id="occupationalLicenseHead" aria-controls="occupationalLicense" role="tab" data-toggle="tab">Occupational License <span></span></a></li>    <li role="presentation"><a href="#dependent" id="dependentHead" aria-controls="dependent" role="tab" data-toggle="tab">Dependents <span></span></a></li>    <li role="presentation"><a href="#emergencyContact" id="emergencyContactHead" aria-controls="emergencyContact" role="tab" data-toggle="tab">Emergency Contacts <span></span></a></li>    <li role="presentation"><a href="#w4" id="w4Head" aria-controls="w4" role="tab" data-toggle="tab">W4 <span></span></a></li>  </ul>  \x3c!-- Tab panes --\x3e  <div class="tab-content">    <div role="tabpanel" class="tab-pane active" id="profile"></div>    <div role="tabpanel" class="tab-pane" id="directDeposit"></div>    <div role="tabpanel" class="tab-pane" id="driversLicense"></div>    <div role="tabpanel" class="tab-pane" id="occupationalLicense"></div>    <div role="tabpanel" class="tab-pane" id="dependent"></div>    <div role="tabpanel" class="tab-pane" id="emergencyContact"></div>    <div role="tabpanel" class="tab-pane" id="w4"></div>  </div></div>'),$.get(baseURI+"get_employee_profile_history/"+e).success(i).fail(s)}function i(e){let a={profile:"",directDeposit:"",driversLicense:"",occupationalLicense:"",dependent:"",emergencyContact:"",w4:""};e.history.map((function(t){let o="",i=JSON.parse(t.profile_data);o+="<br />",o+='<table class="table table-bordered">',o+="   <thead>",o+='       <tr class="bg-primary">',o+='           <th colspan="3">',o+='<span class="pull-right"> '+moment(t.created_at).format("DD MMMM Y, dddd HH:mm:ss")+"</span>",0!=t.employer_sid?o+=" "+t.full_name:o+="Self",o+="           </th>",o+="       </tr>",o+="   </thead>",o+="   <tbody>",o+="   {{innerRows}}",o+="   </tbody>",o+="</table>",o+="<hr />";let s="";for(let a in i){let t=i[a].new||"-",o=i[a].old||"-";"location_state"==a.toLowerCase()&&(t=e.states[t]||"-",o=e.states[o]||"-"),"dob"!=a.toLowerCase()&&"rehire_date"!=a.toLowerCase()&&"joined_at"!=a.toLowerCase()&&"birth_date"!=a.toLowerCase()&&"license_issue_date"!=a.toLowerCase()&&"license_expiration_date"!=a.toLowerCase()&&"consent_date"!=a.toLowerCase()||(t="-"!=t?moment(t,"Y-MM-DD").format("DD MMMM Y, dddd"):t,o="-"!=o?moment(o,"Y-MM-DD").format("DD MMMM Y, dddd"):o),"profile_picture"!=a.toLowerCase()&&"license_file"!=a.toLowerCase()&&"voided_cheque"!=a.toLowerCase()&&"user_signature"!=a.toLowerCase()||(t="-"!=t?'<img src="'+("user_signature"==a.toLowerCase()?"":"https://automotohrattachments.s3.amazonaws.com/")+t+'" width="60" />':t,o="-"!=o?'<img src="'+("user_signature"==a.toLowerCase()?"":"https://automotohrattachments.s3.amazonaws.com/")+o+'" width="60" />':o),s+="   <tr>","union_member"!=a&&(s+="PhoneNumber"==a?"<td><strong> PRIMARY NUMBER </strong></td>":"       <td><strong>"+a.replace(/[^a-z]/gi," ").toUpperCase()+"</strong></td>"),"action"==a?s+='       <td class="danger text-center" colspan="2">Deleted</td>':"union_member"==a||("union_name"==a?(s+='       <td class="bg-danger">'+("-"==o?"No":"Yes <br>"+o)+"</td>",s+='       <td class="bg-success">'+("-"==t?"No":"Yes <br>"+t)+"</td>"):(s+='       <td class="bg-danger">'+o+"</td>",s+='       <td class="bg-success">'+t+"</td>")),s+="   </tr>"}s.length>0&&(a[t.history_type]+=o.replace(/{{innerRows}}/i,s))}));for(let e in a)0===a[e].length&&$("#"+e+"Head").parent().remove(),$("#"+e).html(a[e]);ml(!1,"jsEmployeeProfileHistoryLoader")}function s(){let e="";e+='<div class="alert alert-danger text-center">',e+="   <p>Oops! Something went wrong</p>",e+="</div>",$("#jsEmployeeProfileHistoryBody").html('<div class="alert alert-danger text-center">   <p>Oops! Something went wrong</p></div>'),ml(!1,"jsEmployeeProfileHistoryLoader")}$("#jsProfileHistory").click(t),$(".jsProfileHistory").click(t)}));