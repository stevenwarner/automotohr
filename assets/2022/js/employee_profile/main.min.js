$(function(){function e(e){e.preventDefault(),s=$(this).data("id"),i=$(this).data("name"),Model({Id:"jsEmployeeProfileHistoryModel",Loader:"jsEmployeeProfileHistoryLoader",Body:'<div class="container"><div id="jsEmployeeProfileHistoryBody"></div></div>',Title:"Profile History of "+i},t)}function t(){let e="";e+="<div>",e+="  <!-- Nav tabs -->",e+='  <ul class="nav nav-tabs" role="tablist">',e+='    <li role="presentation" class="active"><a href="#profile" id="profileHead" aria-controls="profile" role="tab" data-toggle="tab">Profile <span></span></a></li>',e+='    <li role="presentation"><a href="#directDeposit" id="directDepositHead" aria-controls="directDeposit" role="tab" data-toggle="tab">Direct Deposit <span></span></a></li>',e+='    <li role="presentation"><a href="#driversLicense" id="driversLicenseHead" aria-controls="driversLicense" role="tab" data-toggle="tab">Drivers License <span></span></a></li>',e+='    <li role="presentation"><a href="#occupationalLicense" id="occupationalLicenseHead" aria-controls="occupationalLicense" role="tab" data-toggle="tab">Occupational License <span></span></a></li>',e+='    <li role="presentation"><a href="#dependent" id="dependentHead" aria-controls="dependent" role="tab" data-toggle="tab">Dependents <span></span></a></li>',e+='    <li role="presentation"><a href="#emergencyContact" id="emergencyContactHead" aria-controls="emergencyContact" role="tab" data-toggle="tab">Emergency Contacts <span></span></a></li>',e+="  </ul>",e+="  <!-- Tab panes -->",e+='  <div class="tab-content">',e+='    <div role="tabpanel" class="tab-pane active" id="profile"></div>',e+='    <div role="tabpanel" class="tab-pane" id="directDeposit"></div>',e+='    <div role="tabpanel" class="tab-pane" id="driversLicense"></div>',e+='    <div role="tabpanel" class="tab-pane" id="occupationalLicense"></div>',e+='    <div role="tabpanel" class="tab-pane" id="dependent"></div>',e+='    <div role="tabpanel" class="tab-pane" id="emergencyContact"></div>',e+="  </div>",e+="</div>",$("#jsEmployeeProfileHistoryBody").html(e),$.get(baseURI+"get_employee_profile_history/"+s).success(a).fail(o)}function a(e){let t={profile:"",directDeposit:"",driversLicense:"",occupationalLicense:"",dependent:"",emergencyContact:""};e.history.map(function(a){let o="",s=JSON.parse(a.profile_data);o+="<br />",o+='<table class="table table-bordered">',o+="   <thead>",o+='       <tr class="bg-primary">',o+='           <th colspan="3">',o+='<span class="pull-right"> '+moment(a.created_at).format("DD MMMM Y, dddd HH:mm:ss")+"</span>",0!=a.employer_sid?o+=" "+a.full_name:o+="Self",o+="           </th>",o+="       </tr>",o+="   </thead>",o+="   <tbody>",o+="   {{innerRows}}",o+="   </tbody>",o+="</table>",o+="<hr />";let i="";for(let t in s){let a=s[t].new||"-",o=s[t].old||"-";"location_state"==t.toLowerCase()&&(a=e.states[a]||"-",o=e.states[o]||"-"),"dob"!=t.toLowerCase()&&"rehire_date"!=t.toLowerCase()&&"joined_at"!=t.toLowerCase()&&"birth_date"!=t.toLowerCase()&&"license_issue_date"!=t.toLowerCase()&&"license_expiration_date"!=t.toLowerCase()&&"consent_date"!=t.toLowerCase()||(a="-"!=a?moment(a,"Y-MM-DD").format("DD MMMM Y, dddd"):a,o="-"!=o?moment(o,"Y-MM-DD").format("DD MMMM Y, dddd"):o),"profile_picture"!=t.toLowerCase()&&"license_file"!=t.toLowerCase()&&"voided_cheque"!=t.toLowerCase()&&"user_signature"!=t.toLowerCase()||(a="-"!=a?'<img src="'+("user_signature"==t.toLowerCase()?"":"https://automotohrattachments.s3.amazonaws.com/")+a+'" width="60" />':a,o="-"!=o?'<img src="'+("user_signature"==t.toLowerCase()?"":"https://automotohrattachments.s3.amazonaws.com/")+o+'" width="60" />':o),i+="   <tr>","union_member"!=t&&(i+="PhoneNumber"==t?"<td><strong> PRIMARY NUMBER </strong></td>":"       <td><strong>"+t.replace(/[^a-z]/gi," ").toUpperCase()+"dd</strong></td>"),"action"==t?i+='       <td class="danger text-center" colspan="2">Deleted</td>':"union_member"==t||("union_name"==t?(i+='       <td class="bg-danger">'+("-"==o?"No":"Yes <br>"+o)+"</td>",i+='       <td class="bg-success">'+("-"==a?"No":"Yes <br>"+a)+"</td>"):(i+='       <td class="bg-danger">'+o+"</td>",i+='       <td class="bg-success">'+a+"</td>")),i+="   </tr>"}i.length>0&&(t[a.history_type]+=o.replace(/{{innerRows}}/i,i))});for(let e in t)0===t[e].length&&$("#"+e+"Head").parent().remove(),$("#"+e).html(t[e]);ml(!1,"jsEmployeeProfileHistoryLoader")}function o(){let e="";e+='<div class="alert alert-danger text-center">',e+="   <p>Oops! Something went wrong</p>",e+="</div>",$("#jsEmployeeProfileHistoryBody").html(e),ml(!1,"jsEmployeeProfileHistoryLoader")}let s,i;$("#jsProfileHistory").click(e),$(".jsProfileHistory").click(e)});