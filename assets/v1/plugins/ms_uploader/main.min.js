!function(e){let t={};e.fn.msFileUploader=function(i){let o=this.length>1?this[0]:this;if("string"==typeof i){switch(i){case"get":return t[o.selector];case"clear":return delete t[o.selector]}return}let s={},a=Math.ceil(1e3*Math.random()),r={};t[o.selector]=s,r.s3=void 0!==i&&i.s3||"https://automotohrattachments.s3.amazonaws.com/",r.path=void 0===i||void 0===i.path||i.path,r.placeholderImage=void 0!==i&&i.placeholderImage||"",r.fileLimit=void 0===i?-1:i.fileLimit,r.allowedTypes=void 0!==i&&i.allowedTypes||["jpg","jpeg","png","gif","pdf","doc","docx","rtf","ppt","xls","xlsx","csv","zip","mov","mp4"],r.text=void 0!==i&&i.text||"Click / Drag to upload",r.onSuccess=void 0!==i&&i.onSuccess||function(){},r.onError=void 0!==i&&i.onError||function(){},r.onClear=void 0!==i&&i.onClear||function(){},r.mainDivName=`jsUploadArea${a}`,r.mainImageViewer=`jsUploadedImageArea${a}`,r.errorMSG=`jsUploadedAreaError${a}`,r.jsMFUPreviewFile=`jsMFUPreviewFile${a}`,r.jsMFUClearFile=`jsMFUClearFile${a}`,r.jsMFUModal=`jsMFUModal${a}`,r.jsMFUD=`jsMFUD${a}`,r.allowLinks=i.allowLinks||!1,r.activeLink=i.activeLink||"upload";let l={size:`File size exceeded from ${r.fileLimit}`,type:"Invalid file type."};e(o.selector).siblings("div.jsMainUploadAreaWrapper").remove(),e.fn.msFileUploader.__proto__.instances[o.selector]={};void 0!==e.fn.msFileUploader.instances[o.selector]&&(e(o.selector).siblings("div.csUploadArea").remove(),e.fn.msFileUploader.__proto__.instances[o.selector]={});const n=()=>`\n            <div class="jsMainUploadAreaWrapper">\n\t\t\t\t${r.allowLinks?(()=>{let e="";return e+='<div class="row">',e+='\t<div class="col-sm-2 col-xs-12">',e+='<label class="control control--radio">     \t\t\t\t\t<input type="radio" name="jsSourceType'+a+'" value="upload" /> Upload     \t\t\t\t\t<div class="control__indicator"></div> \t\t\t\t\t</label>',e+="\t</div>",e+='\t<div class="col-sm-2 col-xs-12">',e+='<label class="control control--radio">     \t\t\t\t\t<input type="radio" name="jsSourceType'+a+'" value="youtube" /> YouTube     \t\t\t\t\t<div class="control__indicator"></div> \t\t\t\t\t</label>',e+="\t</div>",e+='\t<div class="col-sm-2 col-xs-12">',e+='<label class="control control--radio">     \t\t\t\t\t<input type="radio" name="jsSourceType'+a+'" value="vimeo" /> Vimeo     \t\t\t\t\t<div class="control__indicator"></div> \t\t\t\t\t</label>',e+="\t</div>",e+="</div><br />",e+='<div class="row hidden">',e+='\t<div class="col-sm-12">',e+='<div class="input-group">     \t\t\t\t\t<div class="input-group-addon">YouTube</div>     \t\t\t\t\t<input type="text" class="form-control" id="jsYoutubeLink'+a+'" placeholder="https://www.youtube.com/watch?v=g4BsAB3PliY" value="'+r.placeholderImage+'" /> \t\t\t\t\t</div>',e+="\t</div>",e+="<br /></div>",e+='<div class="row hidden">',e+='\t<div class="col-sm-12">',e+='<div class="input-group">     \t\t\t\t\t<div class="input-group-addon">Vimeo</div>     \t\t\t\t\t<input type="text" class="form-control" id="jsVimeoLink'+a+'" placeholder="https://vimeo.com/XXXXXXXXX"  value="'+r.placeholderImage+'"/> \t\t\t\t\t</div>',e+="\t</div>",e+="<br /></div>",e})():""}\n                <div class="csUploadArea hidden" id="${r.mainDivName}">\n                    <div class="csUploadInnerArea">\n                        <p>${r.text}</p>\n                        ${-1!=r.fileLimit?`<em style="color:rgb(255, 155, 0);"><i class="fa fa-warning"></i> Maximum allowed file size is ${r.fileLimit}</em><br />`:""}\n                        <span>(${r.allowedTypes})</span> <br /><br />\n                        <span style="color: red; font-weight: bold; display: none;" id="${r.errorMSG}"></span>\n                        <div style="${"upload"===r.activeLink&&r.placeholderImage?"":"display: none;"}">\n                            <button class="btn btn-success" id="${r.jsMFUPreviewFile}" data-key="${r.placeholderImage}">Preview File</button>\n                            <button class="btn btn-default" id="${r.jsMFUClearFile}" style="display: none;">Clear File</button>\n                        </div>\n                    </div>\n                    \x3c!-- Image --\x3e\n                </div>\n                <div class="clearfix"></div>\n            </div>\n            `,d=e=>{let t=void 0===e?s.name.split("."):e.split(".");return t[t.length-1].toLowerCase().trim()},c=i=>(e(`#${r.jsMFUPreviewFile}`).parent().hide(0),e(`#${r.jsMFUClearFile}`).hide(0),e(`#${r.errorMSG}`).hide(),e(`#${r.mainImageViewer}`).parent().hide(),e(`#${r.mainImageViewer}`).attr("src",null),e(`#${r.mainImageViewer}`).parent().find("label span").text(""),s.hasOwnProperty("hasError")&&(s.hasError=!1),-1===e.inArray(d(),r.allowedTypes)?(e(`#${r.errorMSG}`).text(l.type).show(),r.onError(l.type,i),s.hasError=!0,s.errorCode=l.type,t[o.selector]=s,void(s={})):-1!==r.fileLimit&&s.size>(()=>{let e=r.fileLimit.replace(/\s+/,"").toUpperCase().split(/([0-9]+)([A-Za-z]+)/);return e=[e[1],e[2]],"MB"==e[1]?1e6*e[0]:"GB"==e[1]?1e3*e[0]*1e6:"KB"==e[1]?1e3*e[0]:0})()?(e(`#${r.errorMSG}`).text(l.size).show(),r.onError(l.size,i),s.hasError=!0,s.errorCode=l.size,t[o.selector]=s,void(s={})):((t=>{if(t){let i=new FileReader;i.onload=t=>{e(`#${r.jsMFUPreviewFile}`).data("key",t.target.result),e(`#${r.jsMFUPreviewFile}`).parent().show(),e(`#${r.jsMFUClearFile}`).show()},i.readAsDataURL(t)}})(s),s.hasError=!1,t[o.selector]=s,void r.onSuccess(s,i)));return this.getValue=()=>s,e(document).on("drop",`#${r.mainDivName}`,(function(e){e.preventDefault(),s=e.originalEvent.dataTransfer.files[0],c(e)})),e(document).on("dragenter",`#${r.mainDivName}`,(function(t){t.preventDefault(),e(this).css("opacity",".8")})),e(document).on("dragover",`#${r.mainDivName}`,(function(t){t.preventDefault(),e(this).css("opacity","1")})),e(document).on("click",`#${r.mainDivName}`,(function(t){t.preventDefault(),e(o).trigger("click")})),e(document).on("change",o.selector,(function(e){s=e.target.files[0],c(e)})),e(document).on("click",`.${r.jsMFUD}`,(function(t){t.preventDefault(),t.stopPropagation();let i="",o="";null===e(`#${r.jsMFUPreviewFile}`).data("key").match(/data:/)?(i=e(`#${r.jsMFUPreviewFile}`).data("key"),o=r.path?r.s3+i:i):(i=s.name,o=e(`#${r.jsMFUPreviewFile}`).data("key"));let a=document.createElement("a");a.target="_blank",a.href=o,a.download=i,a.dispatchEvent(new MouseEvent("click"))})),e(document).on("click",`#${r.jsMFUClearFile}`,(function(i){i.preventDefault(),i.stopPropagation(),e(`#${r.jsMFUPreviewFile}`).parent().hide(0),e(`#${r.jsMFUClearFile}`).hide(0),s={},t[o.selector]=s,""!=r.placeholderImage&&"upload"===r.activeLink&&(e(`#${r.jsMFUPreviewFile}`).data("key",r.placeholderImage),e(`#${r.jsMFUPreviewFile}`).parent().show(0)),r.onClear()})),e(document).on("click",`#${r.jsMFUPreviewFile}`,(function(t){t.preventDefault(),t.stopPropagation();let i="",o="",a="",l="";null===e(this).data("key").match(/data:/)?(i=e(this).data("key"),o=d(i),a=r.path?r.s3+i:i,l=-1!==e.inArray(o,["xls","xlsx","ppt","pptx","doc","docx","rtf","csv"])?`<iframe frameborder="0" width="100%" height="600" class="jsMFUIframe" src="https://view.officeapps.live.com/op/embed.aspx?src=${encodeURI(a)}"></iframe>`:-1!==e.inArray(o,["png","jpg","jpeg","gif","webp","svg"])?`<img class="img-responsive" src="${a}" />`:-1!==e.inArray(o,["mp4"])?`<video style="width: 100%;" class="img-responsive" src="${a}" controls></video>`:-1!==e.inArray(o,["zip"])?`<iframe frameborder="0" style="width: 100%; height: 600px;" class="jsMFUIframe" src="${a}"></iframe>`:`<iframe frameborder="0" style="width: 100%; height: 600px;" class="jsMFUIframe" src="https://docs.google.com/gview?url=${a}&embedded=true"></iframe>`):(i=s.name,o=d(),a=e(this).data("key"),l=-1!==e.inArray(o,["png","jpg","jpeg","gif","svg"])?`<img class="img-responsive" src="${a}" />`:-1!==e.inArray(o,["mp4"])?`<video class="img-responsive" src="${a}" controls></video>`:`<iframe frameborder="0" style="width: 100%; height: 600px;" class="jsMFUIframe" src="${a}"></iframe>`);const n=((e,t)=>`\n            \x3c!-- Modal --\x3e\n            <div class="modal fade" id="${r.jsMFUModal}" tabindex="-1" role="dialog" aria-labelledby="modelTitleId" aria-hidden="true">\n                <div class="modal-dialog modal-lg" role="document">\n                    <div class="modal-content">\n                        <div class="modal-header" style="background-color: #81b431; color: #ffffff;">\n                            <h5 class="modal-title">${t}</h5>\n                        </div>\n                        <div class="modal-body" style="min-height: 300px;">\n                            <div class="csMFULoader jsMFULoader"><i class="fa fa-circle-o-notch fa-spin"></i></div>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-success ${r.jsMFUD}">Download</button>\n                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            `)(0,i);e(`#${r.jsMFUModal}`).remove(),e("body").append(n),e(`#${r.jsMFUModal}`).modal("show"),l.match(/img/),e(`#${r.jsMFUModal} .modal-body`).html(l)})),e(document).on("click",`[name="jsSourceType${a}"]`,(function(){e(`#${r.mainDivName}`).addClass("hidden"),e(`#jsYoutubeLink${a}`).closest(".row").addClass("hidden"),e(`#jsVimeoLink${a}`).closest(".row").addClass("hidden"),e(`#${r.jsMFUClearFile}`).trigger("click"),e(`#jsYoutubeLink${a}`).val(""),e(`#jsVimeoLink${a}`).val(""),"upload"===e(this).val()?(e(`#${r.mainDivName}`).removeClass("hidden"),t[o.selector]={}):"youtube"===e(this).val()?(e(`#jsYoutubeLink${a}`).closest(".row").removeClass("hidden"),t[o.selector]={type:"youtube",link:"",hasError:!0}):"vimeo"===e(this).val()&&(e(`#jsVimeoLink${a}`).closest(".row").removeClass("hidden"),t[o.selector]={type:"vimeo",link:"",hasError:!0})})),e(document).on("keyup",`#jsYoutubeLink${a}`,(function(){e(`.jsErrorRow${a}`).remove();const i=e(this).val().trim();!function(e){if(null!=e||""!=e){var t=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=|\?v=)([^#\&\?]*).*/,i=e.match(t);return!(!i||11!=i[2].length)}}(i)?(t[o.selector].hasError=!0,t[o.selector].link="",e(this).closest(".input-group").after('<p class="jsErrorRow'+a+' text-danger"><strong>YouTube url is not valid.</strong></p>')):(t[o.selector].hasError=!1,t[o.selector].link=i)})),e(document).on("keyup",`#jsVimeoLink${a}`,(function(){e(`.jsErrorRow${a}`).remove();const i=e(this).val().trim();!function(e){if(null!=e||""!=e){var t=/^(http|https)?:\/\/(www\.|player\.)?vimeo\.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|video\/|)(\d+)(?:|\/\?)$/gim;return e.match(t)}}(i)?(t[o.selector].hasError=!0,t[o.selector].link="",e(this).closest(".input-group").after('<p class="jsErrorRow'+a+' text-danger"><strong>Vimeo url is not valid.</strong></p>')):(t[o.selector].hasError=!1,t[o.selector].link=i)})),e(o).before(n()),e(`[name="jsSourceType${a}"][value="${r.activeLink}"]`).prop("checked",!0),"upload"===r.activeLink?e(`#${r.mainDivName}`).removeClass("hidden"):"youtube"===r.activeLink?e(`#jsYoutubeLink${a}`).closest(".row").removeClass("hidden"):"vimeo"===r.activeLink&&e(`#jsVimeoLink${a}`).closest(".row").removeClass("hidden"),""!=r.placeholderImage&&(t[o.selector].type=r.activeLink,t[o.selector].link=r.placeholderImage,t[o.selector].hasError=!1),this},e.fn.msFileUploader.__proto__.instances=t}(jQuery||$);