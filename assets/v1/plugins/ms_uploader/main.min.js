!function(e){let t={};e.fn.msFileUploader=function(o){let i=this.length>1?this[0]:this;if("string"==typeof o){switch(o){case"get":return t[i.selector];case"clear":return delete t[i.selector]}return}let a={},r=Math.ceil(1e3*Math.random()),s={};t[i.selector]=a,s.s3=void 0!==o&&o.s3||"https://automotohrattachments.s3.amazonaws.com/",s.path=void 0===o||void 0===o.path||o.path,s.placeholderImage=void 0!==o&&o.placeholderImage||"",s.fileLimit=void 0===o||-1===e.inArray("mp4",o.allowedTypes)?-1:o.fileLimit,s.allowedTypes=void 0!==o&&o.allowedTypes||["jpg","jpeg","png","gif","pdf","doc","docx","rtf","ppt","xls","xlsx","csv","zip","mov","mp4"],s.text=void 0!==o&&o.text||"Click / Drag to upload",s.onSuccess=void 0!==o&&o.onSuccess||function(){},s.onError=void 0!==o&&o.onError||function(){},s.onClear=void 0!==o&&o.onClear||function(){},s.mainDivName=`jsUploadArea${r}`,s.mainImageViewer=`jsUploadedImageArea${r}`,s.errorMSG=`jsUploadedAreaError${r}`,s.jsMFUPreviewFile=`jsMFUPreviewFile${r}`,s.jsMFUClearFile=`jsMFUClearFile${r}`,s.jsMFUModal=`jsMFUModal${r}`,s.jsMFUD=`jsMFUD${r}`,s.allowLinks=o.allowLinks||!1,s.activeLink=o.activeLink||"upload",s.allowCapture=o.allowCapture||!1;let l={size:`File size exceeded from ${s.fileLimit}`,type:"Invalid file type."};e(i.selector).siblings("div.jsMainUploadAreaWrapper").remove(),e.fn.msFileUploader.__proto__.instances[i.selector]={};void 0!==e.fn.msFileUploader.instances[i.selector]&&(e(i.selector).siblings("div.csUploadArea").remove(),e.fn.msFileUploader.__proto__.instances[i.selector]={});const n=()=>{let e="";return e+='<div class="row">',e+='\t<div class="col-sm-2 col-xs-12">',e+='<label class="control control--radio">     \t\t\t\t\t<input type="radio" name="jsSourceType'+r+'" value="upload" /> Upload     \t\t\t\t\t<div class="control__indicator"></div> \t\t\t\t\t</label>',e+="\t</div>",e+='\t<div class="col-sm-2 col-xs-12">',e+='<label class="control control--radio">     \t\t\t\t\t<input type="radio" name="jsSourceType'+r+'" value="youtube" /> YouTube     \t\t\t\t\t<div class="control__indicator"></div> \t\t\t\t\t</label>',e+="\t</div>",e+='\t<div class="col-sm-2 col-xs-12">',e+='<label class="control control--radio">     \t\t\t\t\t<input type="radio" name="jsSourceType'+r+'" value="vimeo" /> Vimeo     \t\t\t\t\t<div class="control__indicator"></div> \t\t\t\t\t</label>',e+="\t</div>",function(){const e=navigator.userAgent||navigator.vendor||window.opera;return/android|ipad|iphone|ipod|tablet|mobile/i.test(e)}()&&s.allowCapture&&(e+='\t<div class="col-sm-2 col-xs-12">',e+='<label class="control control--radio"> \t\t\t\t\t\t\t<input type="radio" name="jsSourceType'+r+'" value="capture_photo" /> Capture Photo \t\t\t\t\t\t\t<div class="control__indicator"></div> \t\t\t\t\t\t</label>',e+="\t</div>",e+='\t<div class="col-sm-2 col-xs-12">',e+='<label class="control control--radio"> \t\t\t\t\t\t\t<input type="radio" name="jsSourceType'+r+'" value="record_video" /> Record Video \t\t\t\t\t\t\t<div class="control__indicator"></div> \t\t\t\t\t\t</label>',e+="\t</div>"),e+="</div><br />",e+='<div class="row hidden">',e+='\t<div class="col-sm-12">',e+='<div class="input-group">     \t\t\t\t\t<div class="input-group-addon">YouTube</div>     \t\t\t\t\t<input type="text" class="form-control" id="jsYoutubeLink'+r+'" placeholder="https://www.youtube.com/watch?v=g4BsAB3PliY" value="'+s.placeholderImage+'" /> \t\t\t\t\t</div>',e+="\t</div>",e+="<br /></div>",e+='<div class="row hidden">',e+='\t<div class="col-sm-12">',e+='<div class="input-group">     \t\t\t\t\t<div class="input-group-addon">Vimeo</div>     \t\t\t\t\t<input type="text" class="form-control" id="jsVimeoLink'+r+'" placeholder="https://vimeo.com/XXXXXXXXX"  value="'+s.placeholderImage+'"/> \t\t\t\t\t</div>',e+="\t</div>",e+="<br /></div>",s.allowCapture&&(e+=`\n\t\t\t\t\t<input type="file" id="cameraInput${r}" accept="image/*" capture="environment" style="display: none;" />\n\t\t\t\t`,e+=`\n\t\t\t\t\t<input type="file" id="videoInput${r}" accept="video/*" capture="environment" style="display: none;" />\n\t\t\t\t`),e},d=()=>`\n            <div class="jsMainUploadAreaWrapper">\n\t\t\t\t${s.allowLinks||s.allowCapture?n():""}\n                <div class="csUploadArea hidden" id="${s.mainDivName}">\n                    <div class="csUploadInnerArea">\n                        <p>${s.text}</p>\n                        ${-1!=s.fileLimit?`<em style="color:rgb(255, 155, 0);"><i class="fa fa-warning"></i> Maximum allowed file size is ${s.fileLimit}</em><br />`:""}\n                        <span style="word-break: break-all;">(${s.allowedTypes})</span> <br /><br />\n                        <span style="color: red; font-weight: bold; display: none;  word-break: break-all;" id="${s.errorMSG}"></span>\n                        <div style="${"upload"===s.activeLink&&s.placeholderImage?"":"display: none;"}">\n                            <button class="btn btn-success" id="${s.jsMFUPreviewFile}" data-key="${s.placeholderImage}">Preview File</button>\n                            <button class="btn btn-default" id="${s.jsMFUClearFile}" style="display: none;">Clear File</button>\n                        </div>\n                    </div>\n                    \x3c!-- Image --\x3e\n                </div>\n                <div class="clearfix"></div>\n            </div>\n            `,c=e=>{let t=void 0===e?a.name.split("."):e.split(".");return t[t.length-1].toLowerCase().trim()},p=o=>(e(`#${s.jsMFUPreviewFile}`).parent().hide(0),e(`#${s.jsMFUClearFile}`).hide(0),e(`#${s.errorMSG}`).hide(),e(`#${s.mainImageViewer}`).parent().hide(),e(`#${s.mainImageViewer}`).attr("src",null),e(`#${s.mainImageViewer}`).parent().find("label span").text(""),a.hasOwnProperty("hasError")&&(a.hasError=!1),-1===e.inArray(c(),s.allowedTypes)?(e(`#${s.errorMSG}`).text(l.type).show(),s.onError(l.type,o),a.hasError=!0,a.errorCode=l.type,t[i.selector]=a,void(a={})):-1!==s.fileLimit&&a.size>(()=>{let e=s.fileLimit.replace(/\s+/,"").toUpperCase().split(/([0-9]+)([A-Za-z]+)/);return e=[e[1],e[2]],"MB"==e[1]?1e6*e[0]:"GB"==e[1]?1e3*e[0]*1e6:"KB"==e[1]?1e3*e[0]:0})()?(e(`#${s.errorMSG}`).text(l.size).show(),s.onError(l.size,o),a.hasError=!0,a.errorCode=l.size,t[i.selector]=a,void(a={})):((t=>{if(t){let o=new FileReader;o.onload=t=>{e(`#${s.jsMFUPreviewFile}`).data("key",t.target.result),e(`#${s.jsMFUPreviewFile}`).parent().show(),e(`#${s.jsMFUClearFile}`).show()},o.readAsDataURL(t)}})(a),a.hasError=!1,t[i.selector]=a,void s.onSuccess(a,o)));return this.getValue=()=>a,e(document).on("drop",`#${s.mainDivName}`,(function(e){e.preventDefault(),a=e.originalEvent.dataTransfer.files[0],p(e)})),e(document).on("dragenter",`#${s.mainDivName}`,(function(t){t.preventDefault(),e(this).css("opacity",".8")})),e(document).on("dragover",`#${s.mainDivName}`,(function(t){t.preventDefault(),e(this).css("opacity","1")})),e(document).on("click",`#${s.mainDivName}`,(function(t){t.preventDefault(),e(i).trigger("click")})),e(document).on("change",i.selector,(function(e){e.target.files&&(a=e.target.files[0],p(e))})),e(document).on("click",`.${s.jsMFUD}`,(function(t){t.preventDefault(),t.stopPropagation();let o="",i="";null===e(`#${s.jsMFUPreviewFile}`).data("key").match(/data:/)?(o=e(`#${s.jsMFUPreviewFile}`).data("key"),i=s.path?s.s3+o:o):(o=a.name,i=e(`#${s.jsMFUPreviewFile}`).data("key"));let r=document.createElement("a");r.target="_blank",r.href=i,r.download=o,r.dispatchEvent(new MouseEvent("click"))})),e(document).on("click",`#${s.jsMFUClearFile}`,(function(o){o.preventDefault(),o.stopPropagation(),e(`#${s.jsMFUPreviewFile}`).parent().hide(0),e(`#${s.jsMFUClearFile}`).hide(0),a={},t[i.selector]=a,""!=s.placeholderImage&&"upload"===s.activeLink&&(e(`#${s.jsMFUPreviewFile}`).data("key",s.placeholderImage),e(`#${s.jsMFUPreviewFile}`).parent().show(0)),s.onClear()})),e(document).on("click",`#${s.jsMFUPreviewFile}`,(function(t){t.preventDefault(),t.stopPropagation();let o="",i="",r="",l="";null===e(this).data("key").match(/data:/)?(o=e(this).data("key"),i=c(o),r=s.path?s.s3+o:o,l=-1!==e.inArray(i,["xls","xlsx","ppt","pptx","doc","docx","rtf","csv"])?`<iframe frameborder="0" width="100%" height="600" class="jsMFUIframe" src="https://view.officeapps.live.com/op/embed.aspx?src=${encodeURI(r)}"></iframe>`:-1!==e.inArray(i,["png","jpg","jpeg","gif","webp","svg"])?`<img class="img-responsive" src="${r}" />`:-1!==e.inArray(i,["mp4"])?`<video style="width: 100%;" class="img-responsive" src="${r}" controls></video>`:-1!==e.inArray(i,["zip"])?`<iframe frameborder="0" style="width: 100%; height: 600px;" class="jsMFUIframe" src="${r}"></iframe>`:`<iframe frameborder="0" style="width: 100%; height: 600px;" class="jsMFUIframe" src="https://docs.google.com/gview?url=${r}&embedded=true"></iframe>`):(o=a.name,i=c(),r=e(this).data("key"),l=-1!==e.inArray(i,["png","jpg","jpeg","gif","svg"])?`<img class="img-responsive" src="${r}" />`:-1!==e.inArray(i,["mp4"])?`<video class="img-responsive" src="${r}" controls></video>`:`<iframe frameborder="0" style="width: 100%; height: 600px;" class="jsMFUIframe" src="${r}"></iframe>`);const n=((e,t)=>`\n            \x3c!-- Modal --\x3e\n            <div class="modal fade" id="${s.jsMFUModal}" tabindex="-1" role="dialog" aria-labelledby="modelTitleId" aria-hidden="true">\n                <div class="modal-dialog modal-lg" role="document">\n                    <div class="modal-content">\n                        <div class="modal-header" style="background-color: #81b431; color: #ffffff;">\n                            <h5 class="modal-title">${t}</h5>\n                        </div>\n                        <div class="modal-body" style="min-height: 300px;">\n                            <div class="csMFULoader jsMFULoader"><i class="fa fa-circle-o-notch fa-spin"></i></div>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-success ${s.jsMFUD}">Download</button>\n                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            `)(0,o);e(`#${s.jsMFUModal}`).remove(),e("body").append(n),e(`#${s.jsMFUModal}`).modal("show"),l.match(/img/),e(`#${s.jsMFUModal} .modal-body`).html(l)})),e(document).on("click",`[name="jsSourceType${r}"]`,(function(){e(`#${s.mainDivName}`).addClass("hidden"),e(`#jsYoutubeLink${r}`).closest(".row").addClass("hidden"),e(`#jsVimeoLink${r}`).closest(".row").addClass("hidden"),e(`#${s.jsMFUClearFile}`).trigger("click"),e(`#jsYoutubeLink${r}`).val(""),e(`#jsVimeoLink${r}`).val(""),"upload"===e(this).val()?(e(`#${s.mainDivName}`).removeClass("hidden"),t[i.selector]={}):"youtube"===e(this).val()?(e(`#jsYoutubeLink${r}`).closest(".row").removeClass("hidden"),t[i.selector]={type:"youtube",link:"",hasError:!0}):"vimeo"===e(this).val()?(e(`#jsVimeoLink${r}`).closest(".row").removeClass("hidden"),t[i.selector]={type:"vimeo",link:"",hasError:!0}):"capture_photo"===e(this).val()?(t[i.selector]={type:"upload",link:"",hasError:!0},e(`#cameraInput${r}`).trigger("click")):"record_video"===e(this).val()&&(t[i.selector]={type:"upload",link:"",hasError:!0},e(`#videoInput${r}`).trigger("click"))})),e(document).on("keyup",`#jsYoutubeLink${r}`,(function(){e(`.jsErrorRow${r}`).remove();const o=e(this).val().trim();!function(e){if(null!=e||""!=e){var t=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=|\?v=)([^#\&\?]*).*/,o=e.match(t);return!(!o||11!=o[2].length)}}(o)?(t[i.selector].hasError=!0,t[i.selector].link="",e(this).closest(".input-group").after('<p class="jsErrorRow'+r+' text-danger"><strong>YouTube url is not valid.</strong></p>')):(t[i.selector].hasError=!1,t[i.selector].link=o)})),e(document).on("keyup",`#jsVimeoLink${r}`,(function(){e(`.jsErrorRow${r}`).remove();const o=e(this).val().trim();!function(e){if(null!=e||""!=e){var t=/^(http|https)?:\/\/(www\.|player\.)?vimeo\.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|video\/|)(\d+)(?:|\/\?)$/gim;return e.match(t)}}(o)?(t[i.selector].hasError=!0,t[i.selector].link="",e(this).closest(".input-group").after('<p class="jsErrorRow'+r+' text-danger"><strong>Vimeo url is not valid.</strong></p>')):(t[i.selector].hasError=!1,t[i.selector].link=o)})),e(i).before(d()),e(`[name="jsSourceType${r}"][value="${s.activeLink}"]`).prop("checked",!0),"upload"===s.activeLink?e(`#${s.mainDivName}`).removeClass("hidden"):"youtube"===s.activeLink?e(`#jsYoutubeLink${r}`).closest(".row").removeClass("hidden"):"vimeo"===s.activeLink&&e(`#jsVimeoLink${r}`).closest(".row").removeClass("hidden"),""!=s.placeholderImage&&(t[i.selector].type=s.activeLink,t[i.selector].link=s.placeholderImage,t[i.selector].hasError=!1),this},e.fn.msFileUploader.__proto__.instances=t}(jQuery||$);