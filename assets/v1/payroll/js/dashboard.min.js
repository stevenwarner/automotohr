$(function(){function r(){if(null!==s)return!1;$(".jsSyncCompanyData span").html("Syncing..."),ml(!0,"jsDashboard"),s=$.ajax({url:baseUrl("payrolls/company/sync"),method:"GET"}).success(function(){n()}).fail(function(r){return alertify.alert("Error!",getErrorsStringFromArray((r.responseJSON||JSON.parse(r.responseText)).errors))}).always(function(){s=null,ml(!1,"jsDashboard"),$(".jsSyncCompanyData span").html("Sync")})}function n(){if(null!==s)return!1;ml(!0,"jsDashboard"),s=$.ajax({url:baseUrl("payrolls/company/get_company_sync_progress"),method:"GET"}).success(function(r){if("completed"==r.status)ml(!1,"jsDashboard");else{if("error"==r.status)return alertify.alert("Error!",r.message);"processing"==r.status&&($(".jsIPLoaderText").text(r.message),setTimeout(()=>{n()},4e3))}}).fail(function(r){return alertify.alert("Error!","Something went wrong.")}).always(function(){s=null})}function e(){if(null!==t)return!1;$(".jsVerifyBankAccount span").html("Verifying..."),t=$.ajax({url:baseUrl("payrolls/company/bank/verify"),method:"GET"}).success(function(){return alertify.alert("Success!","Company bank accounts are verified.",CB)}).fail(function(r){return console.log(r.responseJSON.errors),alertify.alert("Error!",r.responseJSON.errors)}).always(function(){t=null,ml(!1,"jsDashboard"),$(".jsVerifyBankAccount span").html("Verify")})}function a(){if(null!==l)return!1;$(".jsVerifyCompany span").html("Verifying..."),l=$.ajax({url:baseUrl("payrolls/company/verify"),method:"POST"}).success(function(){return alertify.alert("Success!","Company is verified.",CB)}).fail(function(r){return alertify.alert("Error!",getErrorsStringFromArray((r.responseJSON||JSON.parse(r.responseText)).errors))}).always(function(){l=null,ml(!1,"jsDashboard"),$(".jsVerifyCompany span").html("Verify")})}$(document).ready(function(){n()});let s=null,t=null,l=null;$(".jsSyncCompanyData").click(function(n){n.preventDefault(),r()}),$(".jsVerifyBankAccount").click(function(r){r.preventDefault(),e()}),$(".jsVerifyCompany").click(function(r){r.preventDefault(),a()}),ml(!1,"jsDashboard")});