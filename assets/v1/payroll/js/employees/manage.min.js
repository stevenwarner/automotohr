$((function(){let e=null,l=16,t="jsEmployeeFlowModal";function a(){if(0===l)return alertify.alert("Error!","Please select an employee.");Modal({Title:"Employee Onboard Flow",Id:t,Loader:`${t}Loader`,Body:`<div id="${t}Body"></div>`},(function(){s("federal_tax")}))}function s(a){_ml(!0,`${t}Loader`),e=$.ajax({url:baseUrl("payrolls/flow/employee/"+l+"/"+a),method:"GET",caches:!1}).success((function(e){$(`#${t}Body`).html(e.view),function(e){"personal_details"===e&&($(".jsEmployeeFlowDateOfBirth").datepicker({format:"mm/dd/yyyy",changeYear:!0,changeMonth:!0,yearRange:"-100:+0"}),$(".jsEmployeeFlowStartDate").datepicker({format:"mm/dd/yyyy",changeYear:!0,changeMonth:!0,yearRange:"-100:+0"}))}(a)})).fail(handleErrorResponse).always((function(){e=null,_ml(!1,`${t}Loader`)}))}$(".jsPayrollEmployeeEdit").click((function(e){e.preventDefault(),l=$(this).closest("tr").data("id"),a()})),$(document).on("click",".jsMenuTrigger",(function(e){e.preventDefault(),s($(this).data("step"))})),$(document).on("click",".jsEmployeeFlowSavePersonalDetailsBtn",(function(a){if(a.preventDefault(),null!==e)return!1;let s={first_name:$(".jsEmployeeFlowFirstName").val().trim(),middle_initial:$(".jsEmployeeFlowMiddleInitial").val().trim(),last_name:$(".jsEmployeeFlowLastName").val().trim(),location_uuid:$(".jsEmployeeFlowWorkAddress option:selected").val(),start_date:$(".jsEmployeeFlowStartDate").val().trim(),email:$(".jsEmployeeFlowEmail").val().trim(),ssn:$(".jsEmployeeFlowSSN").val().trim(),date_of_birth:$(".jsEmployeeFlowDateOfBirth").val().trim()},r=[];if(s.first_name||r.push('"First name" is missing.'),s.last_name||r.push('"Last name" is missing.'),s.location_uuid||r.push('"Work address" is missing.'),s.start_date||r.push('"Start date" is missing.'),s.email||r.push('"Email" is missing.'),s.email.verifyEmail()||r.push('"Email" is invalid.'),s.ssn||r.push('"Social Security number (SSN)" is missing.'),9===s.ssn.replace(/-/g,"").length&&null===s.ssn.match(/([^0-9#-])/gi)||r.push('"Social Security number (SSN)" must be 9 digits long.'),s.date_of_birth||r.push('"Date of birth" is missing.'),r.length)return alertify.alert("Error!",getErrorsStringFromArray(r),CB);ml(!0,`${t}Loader`,"Please wait, while we are processing your request."),e=$.ajax({url:baseUrl("payrolls/flow/employee/"+l+"/personal_details"),method:"POST",data:s}).success((function(e){return alertify.alert("Success!",e.msg,CB)})).fail(handleErrorResponse).always((function(){e=null,ml(!1,`${t}Loader`)}))})),$(document).on("click",".jsEmployeeFlowSaveCompensationBtn",(function(a){if(a.preventDefault(),null!==e)return!1;let s={title:$(".jsEmployeeFlowJobTitle").val().trim(),amount:$(".jsEmployeeFlowAmount").val().trim(),classification:$(".jsEmployeeFlowEmployeeClassification option:selected").val(),per:$(".jsEmployeeFlowPer option:selected").val()},r=[];if(s.title||r.push('"Job title" is missing.'),(!s.amount||s.amount<0)&&r.push('"Amount" is missing.'),r.length)return alertify.alert("Error!",getErrorsStringFromArray(r),CB);ml(!0,`${t}Loader`,"Please wait, while we are processing your request."),e=$.ajax({url:baseUrl("payrolls/flow/employee/"+l+"/compensation"),method:"POST",data:s}).success((function(e){return alertify.alert("Success!",e.msg,CB)})).fail(handleErrorResponse).always((function(){e=null,ml(!1,`${t}Loader`)}))})),$(document).on("click",".jsEmployeeFlowSaveHomeAddressBtn",(function(a){if(a.preventDefault(),null!==e)return!1;let s={street_1:$(".jsEmployeeFlowStreet1").val().trim(),street_2:$(".jsEmployeeFlowStreet2").val().trim(),city:$(".jsEmployeeFlowCity").val().trim(),state:$(".jsEmployeeFlowState").val().trim(),zip:$(".jsEmployeeFlowZip").val().trim()},r=[];if(s.street_1||r.push('"street 1" is missing.'),s.city||r.push('"City" is missing.'),s.state||r.push('"State" is missing.'),s.zip||r.push('"Zip" is missing.'),r.length)return alertify.alert("Error!",getErrorsStringFromArray(r),CB);ml(!0,`${t}Loader`,"Please wait, while we are processing your request."),e=$.ajax({url:baseUrl("payrolls/flow/employee/"+l+"/home_address"),method:"POST",data:s}).success((function(e){return alertify.alert("Success!",e.msg,CB)})).fail(handleErrorResponse).always((function(){e=null,ml(!1,`${t}Loader`)}))})),$(document).on("click",".jsEmployeeFlowSaveFederalTaxBtn",(function(a){if(a.preventDefault(),null!==e)return!1;let s={filing_status:$(".jsEmployeeFlowFilingStatus option:selected").val(),two_jobs:$(".jsEmployeeFlowMultipleJobs:checked").val(),dependents_amount:$(".jsEmployeeFlowDependents").val().trim(),extra_withholding:$(".jsEmployeeFlowExtraWithholding").val().trim(),other_income:$(".jsEmployeeFlowOtherIncome").val().trim(),deductions:$(".jsEmployeeFlowDeductions").val().trim(),w4_data_type:"rev_2020_w4"},r=[];if(s.filing_status||r.push('"Filing status" is missing.'),r.length)return alertify.alert("Error!",getErrorsStringFromArray(r),CB);ml(!0,`${t}Loader`,"Please wait, while we are processing your request."),e=$.ajax({url:baseUrl("payrolls/flow/employee/"+l+"/federal_tax"),method:"POST",data:s}).success((function(e){return alertify.alert("Success!",e.msg,CB)})).fail(handleErrorResponse).always((function(){e=null,ml(!1,`${t}Loader`)}))})),a(),$.ajaxSetup({cache:!1})}));