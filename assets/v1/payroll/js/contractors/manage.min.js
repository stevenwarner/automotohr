$((function(){let t=null,e=0,r="jsContractorFlowModal";function a(a,o){_ml(!0,`${r}Loader`);let i="payrolls/flow/contractors/"+e+"/"+a;o&&(i+="/"+o),t=$.ajax({url:baseUrl(i),method:"GET",caches:!1}).success((function(t){$(`#${r}Body`).html(t.view),s(a)})).fail(handleErrorResponse).always((function(){t=null,_ml(!1,`${r}Loader`)}))}function s(t){"add"===t||"personal_details"===t?($(".jsContractorStartDate").datepicker({format:"mm/dd/yyyy",changeYear:!0,changeMonth:!0,yearRange:"-100:+0"}),$("#jsContractorType").trigger("change"),$("#jsContractorWageType").trigger("change"),$("#jsContractorFileNewHireReport").trigger("change")):"home_address"===t?$(".jsContractorPaymentMethod").trigger("click"):"payment_method"===t&&$(".jsContractorPaymentMethod:checked").trigger("click")}$(".jsContractorAdd").click((function(e){e.preventDefault(),Modal({Title:"Contractor Flow",Id:r,Loader:`${r}Loader`,Body:`<div id="${r}Body"></div>`},(function(){var e;e="add",_ml(!0,`${r}Loader`),t=$.ajax({url:baseUrl("payrolls/flow/contractors/"+e),method:"GET",caches:!1}).success((function(t){$(`#${r}Body`).html(t.view),s(e)})).fail(handleErrorResponse).always((function(){t=null,_ml(!1,`${r}Loader`)}))}))})),$(".jsContractorEdit").click((function(t){t.preventDefault(),e=$(this).closest("tr").data("id"),Modal({Title:"Contractor Flow",Id:r,Loader:`${r}Loader`,Body:`<div id="${r}Body"></div>`},(function(){a("summary")}))})),$(document).on("click",".jsContractorSingleForm",(function(t){t.preventDefault(),a("single_form",$(this).closest("tr").data("id"))})),$(document).on("click",".jsMenuTrigger",(function(t){t.preventDefault(),a($(this).data("step"))})),$(document).on("change","#jsContractorType",(function(){let t=$(this).val();$(".jsContractorIndividual").closest(".form-group").addClass("hidden"),$(".jsContractorBusiness").closest(".form-group").addClass("hidden"),$(".jsContractor"+t).closest(".form-group").removeClass("hidden")})),$(document).on("change","#jsContractorFileNewHireReport",(function(){"1"==$(this).val()?$(".jsContractorWorkState").closest(".form-group").removeClass("hidden"):$(".jsContractorWorkState").closest(".form-group").addClass("hidden")})),$(document).on("change","#jsContractorWageType",(function(){"Hourly"==$(this).val()?$(".jsContractorHourlyRate").closest(".form-group").removeClass("hidden"):$(".jsContractorHourlyRate").closest(".form-group").addClass("hidden")})),$(document).on("click",".jsContractorPaymentMethod",(function(){"Check"==$(this).val()?($(".jsCheck").removeClass("hidden"),$(".jsDirectDeposit").addClass("hidden")):($(".jsCheck").addClass("hidden"),$(".jsDirectDeposit").removeClass("hidden"))})),$(document).on("click",".jsContractorSaveBtn",(function(e){if(e.preventDefault(),null!==t)return!1;let a={type:$("#jsContractorType option:selected").val(),wageType:$("#jsContractorWageType option:selected").val(),hourlyRate:$("#jsContractorHourlyRate").val().trim(),startDate:$("#jsContractorStartDate").val().trim(),email:$("#jsContractorEmail").val().trim(),firstName:$("#jsContractorFirstName").val().trim(),middleInitial:$("#jsContractorMiddleInitial").val().trim(),lastName:$("#jsContractorLastName").val().trim(),fileNewHireReport:$("#jsContractorFileNewHireReport option:selected").val(),workState:$("#jsContractorWorkState").val().trim(),ssn:$("#jsContractorSSN").val().trim(),isActive:$("#jsContractorIsActive option:selected").val(),businessName:$("#jsContractorBusinessName").val().trim(),ein:$("#jsContractorEIN").val().trim()},s=[];if("Hourly"!==a.wageType||a.hourlyRate||s.push('"Hourly rate" is missing.'),"Hourly"===a.wageType&&null!==a.hourlyRate.match(/[^0-9.]/gi)&&s.push('"Hourly rate" is invalid.'),a.startDate||s.push('"Start date" is missing.'),a.email&&!a.email.verifyEmail()&&s.push('"Email" is missing.'),"Individual"!==a.type||a.firstName||s.push('"First name" is missing.'),"Individual"!==a.type||a.lastName||s.push('"Last name" is missing.'),"Individual"!==a.type||"1"!==a.fileNewHireReport||a.workState||s.push('"Work state" is missing.'),"Individual"===a.type&&9!==a.ssn.replace(/\D/g,"").length&&s.push('"Social Security Number (SSN)" is missing.'),"Business"!==a.type||a.businessName||s.push('"Business name" is missing.'),"Business"===a.type&&9!==a.ein.replace(/\D/g,"").length&&s.push('"EIN" is missing.'),s.length)return alertify.alert("Error!",getErrorsStringFromArray(s),CB);ml(!0,`${r}Loader`,"Please wait, while we are processing your request."),t=$.ajax({url:baseUrl("payrolls/flow/contractors/add"),method:"POST",data:a}).success((function(t){return alertify.alert("Success!",t.msg,CB)})).fail(handleErrorResponse).always((function(){t=null,ml(!1,`${r}Loader`)}))})),$(document).on("click",".jsContractorSaveEditBtn",(function(a){if(a.preventDefault(),null!==t)return!1;let s={type:$("#jsContractorType option:selected").val(),wageType:$("#jsContractorWageType option:selected").val(),hourlyRate:$("#jsContractorHourlyRate").val().trim(),startDate:$("#jsContractorStartDate").val().trim(),email:$("#jsContractorEmail").val().trim(),firstName:$("#jsContractorFirstName").val().trim(),middleInitial:$("#jsContractorMiddleInitial").val().trim(),lastName:$("#jsContractorLastName").val().trim(),fileNewHireReport:$("#jsContractorFileNewHireReport option:selected").val(),workState:$("#jsContractorWorkState").val().trim(),ssn:$("#jsContractorSSN").val().trim(),isActive:$("#jsContractorIsActive option:selected").val(),businessName:$("#jsContractorBusinessName").val().trim(),ein:$("#jsContractorEIN").val().trim()},o=[];if("Hourly"!==s.wageType||s.hourlyRate||o.push('"Hourly rate" is missing.'),"Hourly"===s.wageType&&null!==s.hourlyRate.match(/[^0-9.]/gi)&&o.push('"Hourly rate" is invalid.'),s.startDate||o.push('"Start date" is missing.'),s.email&&!s.email.verifyEmail()&&o.push('"Email" is missing.'),"Individual"!==s.type||s.firstName||o.push('"First name" is missing.'),"Individual"!==s.type||s.lastName||o.push('"Last name" is missing.'),"Individual"!==s.type||"1"!==s.fileNewHireReport||s.workState||o.push('"Work state" is missing.'),"Individual"===s.type&&9!==s.ssn.replace(/\D/g,"").length&&null===s.ssn.match(/x/gi)&&o.push('"Social Security Number (SSN)" is missing.'),"Business"!==s.type||s.businessName||o.push('"Business name" is missing.'),"Business"===s.type&&9!==s.ein.replace(/\D/g,"").length&&null===s.ein.match(/x/gi)&&o.push('"EIN" is missing.'),o.length)return alertify.alert("Error!",getErrorsStringFromArray(o),CB);ml(!0,`${r}Loader`,"Please wait, while we are processing your request."),t=$.ajax({url:baseUrl("payrolls/flow/contractors/"+e+"/personal_details"),method:"POST",data:s}).success((function(t){return alertify.alert("Success!",t.msg,CB)})).fail(handleErrorResponse).always((function(){t=null,ml(!1,`${r}Loader`)}))})),$(document).on("click",".jsContractorHomeAddressSaveBtn",(function(a){if(a.preventDefault(),null!==t)return!1;let s={street_1:$("#jsContractorStreet1").val().trim(),street_2:$("#jsContractorStreet2").val().trim(),city:$("#jsContractorCity").val().trim(),state:$("#jsContractorState").val().trim(),zip:$("#jsContractorZip").val().trim()},o=[];if(s.street_1||o.push('"Street 1" is missing.'),s.city||o.push('"City" is missing.'),s.state||o.push('"State" is missing.'),s.zip||o.push('"Zip" is missing.'),5!==s.zip.length&&o.push('"Zip" must be 9 digits long.'),o.length)return alertify.alert("Error!",getErrorsStringFromArray(o),CB);ml(!0,`${r}Loader`,"Please wait, while we are processing your request."),t=$.ajax({url:baseUrl("payrolls/flow/contractors/"+e+"/home_address"),method:"POST",data:s}).success((function(t){return alertify.alert("Success!",t.msg,CB)})).fail(handleErrorResponse).always((function(){t=null,ml(!1,`${r}Loader`)}))})),$(document).on("click",".jsContractorPaymentMethodSaveBtn",(function(a){if(a.preventDefault(),null!==t)return!1;let s={type:$(".jsContractorPaymentMethod:checked").val(),accountName:$("#jsContractorAccountName").val().trim(),routingNumber:$("#jsContractorRoutingNumber").val().trim(),accountNumber:$("#jsContractorAccountNumber").val().trim(),accountType:$(".jsContractorType:checked").val()},o=[];if(s.type||o.push('"Type" is missing.'),"Direct Deposit"===s.type&&(s.accountName||o.push('"Account name" is missing.'),9!==s.routingNumber.length&&o.push('"Routing number" is missing.'),9!==s.accountNumber.length&&o.push('"Account number" is missing.'),s.accountType||o.push('"Account type" is missing.')),o.length)return alertify.alert("Error!",getErrorsStringFromArray(o),CB);ml(!0,`${r}Loader`,"Please wait, while we are processing your request."),t=$.ajax({url:baseUrl("payrolls/flow/contractors/"+e+"/payment_method"),method:"POST",data:s}).success((function(t){return alertify.alert("Success!",t.msg,CB)})).fail(handleErrorResponse).always((function(){t=null,ml(!1,`${r}Loader`)}))})),$.ajaxSetup({cache:!1})}));