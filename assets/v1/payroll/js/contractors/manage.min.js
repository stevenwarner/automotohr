$((function(){let t=null,e=16,r="jsContractorFlowModal";$(".jsContractorAdd").click((function(a){a.preventDefault(),e=$(this).closest("tr").data("id"),Modal({Title:"Contractor Add Flow",Id:r,Loader:`${r}Loader`,Body:`<div id="${r}Body"></div>`},(function(){var e;e="add",_ml(!0,`${r}Loader`),t=$.ajax({url:baseUrl("payrolls/flow/contractors/"+e),method:"GET",caches:!1}).success((function(t){$(`#${r}Body`).html(t.view),function(t){"add"===t&&($(".jsContractorStartDate").datepicker({format:"mm/dd/yyyy",changeYear:!0,changeMonth:!0,yearRange:"-100:+0"}),$("#jsContractorType").trigger("change"),$("#jsContractorWageType").trigger("change"))}(e)})).fail(handleErrorResponse).always((function(){t=null,_ml(!1,`${r}Loader`)}))}))})),$(document).on("change","#jsContractorType",(function(){let t=$(this).val();$(".jsContractorIndividual").closest(".form-group").addClass("hidden"),$(".jsContractorBusiness").closest(".form-group").addClass("hidden"),$(".jsContractor"+t).closest(".form-group").removeClass("hidden")})),$(document).on("change","#jsContractorFileNewHireReport",(function(){"1"==$(this).val()?$(".jsContractorWorkState").closest(".form-group").removeClass("hidden"):$(".jsContractorWorkState").closest(".form-group").addClass("hidden")})),$(document).on("change","#jsContractorWageType",(function(){"Hourly"==$(this).val()?$(".jsContractorHourlyRate").closest(".form-group").removeClass("hidden"):$(".jsContractorHourlyRate").closest(".form-group").addClass("hidden")})),$(document).on("click",".jsContractorSaveBtn",(function(e){if(e.preventDefault(),null!==t)return!1;let a={type:$("#jsContractorType option:selected").val(),wageType:$("#jsContractorWageType option:selected").val(),hourlyRate:$("#jsContractorHourlyRate").val().trim(),startDate:$("#jsContractorStartDate").val().trim(),email:$("#jsContractorEmail").val().trim(),firstName:$("#jsContractorFirstName").val().trim(),middleInitial:$("#jsContractorMiddleInitial").val().trim(),lastName:$("#jsContractorLastName").val().trim(),fileNewHireReport:$("#jsContractorFileNewHireReport option:selected").val(),workState:$("#jsContractorWorkState").val().trim(),ssn:$("#jsContractorSSN").val().trim(),isActive:$("#jsContractorIsActive option:selected").val(),businessName:$("#jsContractorBusinessName").val().trim(),ein:$("#jsContractorEIN").val().trim()},o=[];if("Hourly"!==a.wageType||a.hourlyRate||o.push('"Hourly rate" is missing.'),"Hourly"===a.wageType&&null!==a.hourlyRate.match(/[^0-9.]/gi)&&o.push('"Hourly rate" is invalid.'),a.startDate||o.push('"Start date" is missing.'),a.email&&!a.email.verifyEmail()&&o.push('"Email" is missing.'),"Individual"!==a.type||a.firstName||o.push('"First name" is missing.'),"Individual"!==a.type||a.lastName||o.push('"Last name" is missing.'),"Individual"!==a.type||"1"!==a.fileNewHireReport||a.workState||o.push('"Work state" is missing.'),"Individual"===a.type&&9!==a.ssn.replace(/\D/g,"").length&&o.push('"Social Security Number (SSN)" is missing.'),"Business"!==a.type||a.businessName||o.push('"Business name" is missing.'),"Business"===a.type&&9!==a.ein.replace(/\D/g,"").length&&o.push('"EIN" is missing.'),o.length)return alertify.alert("Error!",getErrorsStringFromArray(o),CB);ml(!0,`${r}Loader`,"Please wait, while we are processing your request."),t=$.ajax({url:baseUrl("payrolls/flow/contractors/add"),method:"POST",data:a}).success((function(t){return alertify.alert("Success!",t.msg,CB)})).fail(handleErrorResponse).always((function(){t=null,ml(!1,`${r}Loader`)}))})),$.ajaxSetup({cache:!1})}));