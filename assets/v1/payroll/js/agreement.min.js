$((function(){let e=0,r="jsAgreementModal",n=null;function i(n){if(e=n,0===e)return alertify.alert("ERROR","Company code is missing.",CB);Modal({Id:r,Title:"Service Agreement",Loader:r+"Loader",Body:`<div id="${r}Body"></div>`},l)}function l(){n=$.ajax({url:window.location.origin+"/payrolls/agreement/"+e,method:"GET"}).success((function(e){n=null,$(`#${r}Body`).html(e.view),_ml(!1,`${r}Loader`)})).fail(a)}function o(e){return _ml(!1,r+"Loader"),n=null,handleErrorResponse(e)}function a(e){return $(`#${r} .jsModalCancel`).trigger("click"),handleErrorResponse(e)}$(document).on("click",".jsModalCancel",(function(){n=null})),$(".jsServiceAgreement").click((function(e){e.preventDefault(),i(parseInt($(this).data("cid")))})),$(document).on("click",".jsPayrollAgreeServiceTerms",(function(i){i.preventDefault();const l={email:$("#jsTermsOfServiceEmail option:selected").val(),userReference:$("#jsTermsOfServiceReference").val().replace(/[^0-9]/g,"")};let a=[];if(l.email||a.push('"Email" is required.'),l.email.verifyEmail()||a.push('"Email" is invalid.'),l.userReference||a.push('"System User Reference" is required.'),a.length)return alertify.alert("Error!",getErrorsStringFromArray(a),CB);var t;t=l,_ml(!0,`${r}Loader`),n=$.ajax({url:window.location.origin+"/payrolls/agreement/"+e,method:"POST",data:t}).success((function(){return n=null,_ml(!1,`${r}Loader`),alertify.alert("Success!","You have successfully signed the agreement.",(function(){$(`#${r} .jsModalCancel`).trigger("click"),window.location.reload()}))})).fail(o)})),window.gustoServiceAgreement=i}));