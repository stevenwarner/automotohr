$(function(){function e(e){if(o=e,0===o)return alertify.alert("ERROR","Company code is missing.",CB);Modal({Id:a,Title:"Service Agreement",Loader:a+"Loader",Body:`<div id="${a}Body"></div>`},r)}function r(){t=$.ajax({url:window.location.origin+"/payroll/agreement/"+o,method:"GET"}).success(function(e){t=null,$(`#${a}Body`).html(e.view),_ml(!1,`${a}Loader`)}).fail(l)}function n(e){_ml(!0,`${a}Loader`),t=$.ajax({url:window.location.origin+"/payroll/agreement/"+o,method:"POST",data:e}).success(function(){return t=null,_ml(!1,`${a}Loader`),alertify.alert("Success!","You have successfully signed the agreement.",function(){$(`#${a} .jsModalCancel`).trigger("click"),window.location.reload()})}).fail(i)}function i(e){return _ml(!1,a+"Loader"),t=null,handleErrorResponse(e)}function l(e){return $(`#${a} .jsModalCancel`).trigger("click"),handleErrorResponse(e)}let o=0,a="jsAgreementModal",t=null;$(document).on("click",".jsModalCancel",function(){t=null}),$(".jsServiceAgreement").click(function(r){r.preventDefault(),e(parseInt($(this).data("cid")))}),$(document).on("change","#jsTermsOfServiceEmail",function(){$("#jsTermsOfServiceReference").val($("#jsTermsOfServiceEmail option:selected").data("id"))}),$(document).on("click",".jsPayrollAgreeServiceTerms",function(e){e.preventDefault();const r={email:$("#jsTermsOfServiceEmail option:selected").val(),userReference:$("#jsTermsOfServiceReference").val().replace(/[^0-9]/g,"")};let i=[];if(r.email||i.push('"Email" is required.'),r.email.verifyEmail()||i.push('"Email" is invalid.'),r.userReference||i.push('"System User Reference" is required.'),i.length)return alertify.alert("Error!",getErrorsStringFromArray(i),CB);n(r)}),window.gustoServiceAgreement=e});