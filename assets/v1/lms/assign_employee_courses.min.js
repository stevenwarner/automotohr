$(function(){function t(){null!==s&&s.abort(),ml(!0,"jsPageLoader"),s=$.ajax({url:apiURL+"lms/trainings/"+employeeId+"?title="+e.title+"&status="+e.status,method:"GET"}).success(function(t){s=null;let e="",i=t.data.count,o=t.data.courses;$("#jsAssignedCount").html(i.assigned),$("#jsPendingCount").html(i.pending),$("#jsCompletedCount").html(i.completed),$("#jsExpiredSoonCount").html(i.expire_soon),t.data.assignedIds.length||($(".jsFilterSectionBtn").hide(),$(".jsSendReminderEmail").hide()),o.length?o.map(function(s){if((null==s.employee_sid||s.employee_sid==employeeId)&&t.data.assignedIds.includes(s.sid)){if(t.data.expiredSoonIds.includes(s.sid)?e+='<article class="article-sec" style="background: #fcf8e3 !important">':t.data.expiredIds.includes(s.sid)?e+='<article class="article-sec" style="background: #f2dede !important">':e+='<article class="article-sec">',t.data.expiredSoonIds.includes(s.sid)){const t=moment(s.course_end_period,"YYYY-MM-DD"),a=moment(),o=t.diff(a,"days");var i="";i=0==o?"Expiring today":1==o?`Expiring in ${o} day`:`Expiring in ${o} days`,e+='    <div class="row">',e+='        <div class="col-md-12 col-xs-12 text-right">',e+=`        \t<a href="javascript:;" class="btn btn-warning btn-xs csRadius5 csF14" title="This course will expire in ${o} days" placement="top">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-info-circle csF14" aria-hidden="true"></i>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&nbsp;${i}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</a>`,e+="        </div>",e+="    </div>"}if(t.data.expiredIds.includes(s.sid)){const t=moment(s.course_end_period,"YYYY-MM-DD"),a=moment(),i=Math.abs(t.diff(a,"days"));var o="";o=0==i?"Expired today":1==i?`Expired ${i} day ago`:`Expired ${i} days ago`,e+='    <div class="row">',e+='        <div class="col-md-12 col-xs-12 text-right">',e+=`        \t<a href="javascript:;" class="btn btn-danger btn-xs csRadius5 csF14" title="This course was expired ${i} days ago." placement="top">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-info-circle csF14" aria-hidden="true"></i>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&nbsp;${o}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</a>`,e+="        </div>",e+="    </div>"}e+="    <h1>",e+=s.course_title,e+="    </h1>",e+="    <br>",e+='    <div class="row">',e+='        <div class="col-md-3 col-xs-12">',e+='            <p class="csColumSection"><strong>ASSIGNED DATE</strong></p>',e+=`            <p>${moment(s.course_start_period).format(a)}</p>`,e+="        </div>",e+='        <div class="col-md-3 col-xs-12">',e+='            <p class="csColumSection"><strong>DUE DATE</strong></p>',null===s.course_end_period?e+="--":e+=`            <p>${moment(s.course_end_period).format(a)}</p>`,e+="        </div>",e+='        <div class="col-md-3 col-xs-12">',e+='            <p class="csColumSection"><strong>STATUS</strong></p>',e+=`            <p>${"passed"==s.course_status?"COMPLETED":"PENDING"}</p>`,e+="        </div>",e+='        <div class="col-md-3 col-xs-12">',e+='            <p class="csColumSection"><strong>ASSIGNED TO</strong></p>',e+=`            <p>${t.data.employeeName}</p>`,e+="        </div>",e+="    </div>",e+='    <div class="row">',e+='        <div class="col-md-3 col-xs-12 hidden">',e+='            <p class="csColumSection"><strong>TIME REMAINING/TOTAL</strong></p>',e+="            <p>15 min / 15 min</p>",e+="        </div>",e+='        <div class="col-md-3 col-xs-12">',e+='            <p class="csColumSection"><strong>STARTED DATE </strong></p>',e+=`            <p>${s.created_at?moment(s.created_at).format(a):"-"}</p>`,e+="        </div>",e+='        <div class="col-md-3 col-xs-12">',e+='            <p class="csColumSection"><strong>LANGUAGE</strong></p>',e+='            <select class="form-control">',e+='                <option value="eng">English</option>',e+="            </select>",e+="        </div>",e+='        <div class="col-md-6 col-xs-12 text-right">',e+="            <p>&nbsp;</p>","passed"==s.course_status?(e+=`            <a class="btn btn-info csRadius5 csF16" href="${baseURI+"lms/courses/"+s.sid}">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-eye"></i>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tView Content\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</a>`,e+=`        <a class="btn btn-info csRadius5 csF16" href="${window.location.origin}/lms/courses/${s.sid}/${employeeId}/my/certificate">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-eye"></i>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tView Certificate\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</a>`):e+=`            <a class="btn btn-info csRadius5 csF16" href="${baseURI+"lms/courses/"+s.sid}">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-play"></i>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tLaunch Content\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</a>`,e+="        </div>",e+="    </div>",e+="</article>"}}):e='<p class="alert alert-info text-center">No Courses found.</p>',$("#jsMyAssignedCourses").html(e),ml(!1,"jsPageLoader")}).fail(handleErrorResponse).always(function(){s=null,ml(!1,"jsPageLoader")})}let s=null,e={title:"",status:"all"};search.length&&(e.status=search);let a="MMM DD YYYY, ddd";$(".jsFilterBox").click(function(s){s.preventDefault(),$(".jsCourseTitleMyCourse").val(""),$('.jsCourseStatus option[value="'+$(this).data("key")+'"]').prop("selected",!0),e.title=$(".jsCourseTitleMyCourse").val()||"",e.status=$(".jsCourseStatus").val(),t()}),$(".jsApplyFilterMyCourse").click(function(s){s.preventDefault(),e.title=$(".jsCourseTitleMyCourse").val()||"",e.status=$(".jsCourseStatus").val(),t()}),$(".jsClearFilterMyCourse").click(function(s){s.preventDefault(),$(".jsCourseTitleMyCourse").val(""),$('.jsCourseStatus option[value="all"]').prop("selected",!0),e.title=$(".jsCourseTitleMyCourse").val()||"",e.status=$(".jsCourseStatus").val(),t()}),t()});
