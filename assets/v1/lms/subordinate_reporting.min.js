$((function(){let e=null;$("#jsSubordinateDepartments").select2({closeOnSelect:!1}),void 0!==departments&&$("#jsSubordinateDepartments").length&&$("#jsSubordinateDepartments").select2("val",departments.split(",")),$("#jsSubordinateTeams").select2({closeOnSelect:!1}),void 0!==teams&&$("#jsSubordinateTeams").length&&$("#jsSubordinateTeams").select2("val",teams.split(",")),$("#jsSubordinateEmployees").select2({closeOnSelect:!1}),void 0!==employees&&$("#jsSubordinateEmployees").length&&$("#jsSubordinateEmployees").select2("val",employees.split(",")),$("#jsSubordinateCourses").select2({closeOnSelect:!1}),void 0!==courses&&$("#jsSubordinateCourses").length&&$("#jsSubordinateCourses").select2("val",courses.split(",")),$(document).on("click",".jsSearchEmployees",(function(s){s.preventDefault();var t=$("#jsSubordinateDepartments").val(),o=$("#jsSubordinateTeams").val(),a=$("#jsSubordinateEmployees").val(),n=$("#jsSubordinateCourses").val();null!==e&&e.abort(),ml(!0,"jsPageLoader"),e=$.ajax({url:baseURL+"lms/courses/report",method:"GET",data:{departments:t,teams:o,employees:a,courses:n}}).success((function(s){e=null;var t="";$.each(s.employees,(function(e,s){s.team_sid,s.department_sid;var o=s.assign_courses?s.assign_courses.split(","):[];o&&o.length;t+='<tr class="js-tr">',t+="<td>",t+='\t<label class="control control--checkbox">',t+=`\t\t<input type="checkbox" name="employees_ids[]" value="${s.employee_sid}" />`,t+='\t\t<div class="control__indicator"></div>',t+="\t</label>",t+="</td>",t+=`<td class="_csVm"><b>${s.full_name}</b></td>`,t+=`<td class="_csVm">${s.department_name}</td>`,t+=`<td class="_csVm">${s.team_name}</td>`,t+=`<td class="_csVm">${s.coursesInfo?s.coursesInfo.total_course:0}</td>`,t+=`<td class="_csVm">${s.coursesInfo?s.coursesInfo.completed:0}</td>`,t+=`<td class="_csVm">${s.coursesInfo?s.coursesInfo.expire_soon:0}</td>`,t+=`<td class="_csVm">${s.coursesInfo?s.coursesInfo.expired:0}</td>`,t+=`<td class="_csVm">${s.coursesInfo?s.coursesInfo.ready_to_start:0}</td>`,t+=`<td class="_csVm">${s.coursesInfo?s.coursesInfo.started:0}</td>`,t+=`<td class="_csVm"><a href="${baseURL}lms/subordinate/courses/${s.employee_sid}" class="btn btn-info btn-block csRadius5 csF16">View</a></td>`,t+="</tr>"})),$("#jsSubordinateList").html(t),ml(!1,"jsPageLoader")})).fail(handleErrorResponse).always((function(){e=null,ml(!1,"jsPageLoader")}))})),$(document).on("click",".jsCheckAll",(function(){$(".jsSelectSubordinate").prop("checked",$(this).prop("checked"))})),$(document).on("click",".jsSelectSubordinate",(function(){$(this).find('input[name="employees_ids[]"]').prop("checked",!$(this).find('input[name="employees_ids[]"]').prop("checked")),$(".jsCheckAll").prop("checked",$(".jsSelectSubordinate").length==$(".jsSelectSubordinate:checked").length)})),$(document).on("click",".jsSendReminderEmail",(function(s){var t;s.preventDefault(),senderList=(t=[],$.each($('input[name="employees_ids[]"]:checked'),(function(){var e={};e.employee_sid=parseInt($(this).val()),e.employee_name=$(this).closest("tr").find("td.js-employee-name").text(),t.push(e)})),t),0!==senderList.length?alertify.confirm("Do you really want to send email reminders to the selected employees?",(function(){!function(s){null!==e&&e.abort();ml(!0,"jsPageLoader"),e=$.ajax({url:baseURI+"lms/courses/emailReminder/bulk",method:"POST",data:{employeeList:s}}).success((function(s){return e=null,ml(!1,"jsPageLoader"),alertify.alert("SUCCESS!","You have successfully sent an email reminder to selected employees.")})).fail(handleErrorResponse).done((function(s){e=null}))}(senderList)})):alertify.alert("ERROR!","Please select at least one employee to start the process.")})),ml(!1,"jsPageLoader"),Highcharts.chart("container1",{chart:{type:"column"},title:{align:"left",text:"Assigned Course(s) Bar Chart"},accessibility:{announceNewData:{enabled:!0}},xAxis:{type:"category",labels:{style:{fontSize:"12px"}}},yAxis:{title:{text:"Total number of assigned course(s)"},labels:{style:{fontSize:"12px"}}},legend:{enabled:!1},plotOptions:{series:{borderWidth:0,dataLabels:{enabled:!0,format:"{point.y}"}}},tooltip:{headerFormat:'<span style="font-size:14px">{series.name}</span><br>',pointFormat:'<span style="font-size:12px; color:{point.color}">{point.name}:</span> <b style="font-size:12px">{point.y} course(s)</b>'},series:[{name:"Course(s)",colorByPoint:!0,data:[{name:"Assigned ",color:"#6B8ABB",y:totalCourses},{name:"Pending",color:"#ff834e",y:totalCourses-completedCourses},{name:"Ready To Start",color:"#2caffe",y:readyToStart},{name:"In Progress",color:"#544fc5",y:inProgressCourses},{name:"Passed",color:"#00e272",y:completedCourses},{name:"Past Due",color:"#fa4b42",y:pastDueCourses},{name:"Due Soon",color:"#feb56a",y:dueSoonCourses}],dataLabels:{style:{fontSize:"12px"}}}]})}));