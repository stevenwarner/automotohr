$((function(){let e=null;if($(".jsStartCourseButton").click((function(o){o.preventDefault(),alertify.confirm("Are you sure you want to start this course?",(function(){!function(){null!==e&&e.abort();ml(!0,"jsPageLoader"),e=$.ajax({url:apiURL+"lms/trainings/"+employeeId+"/"+courseId+"/"+courseLanguage+"/start?_has="+(-1!==window.location.host.indexOf("www.")?"y":"n"),method:"GET"}).success((function(o){e=null,"course_started"===o.status&&($("#jsStartCourseDiv").hide(),$(".jsSaveQuestionResult").show(),s()),ml(!1,"jsPageLoader")})).fail(handleErrorResponse).always((function(){e=null,ml(!1,"jsPageLoader")}))}()}),CB).setHeader("Confirm")})),$(document).on("change",".jsChangeScormLanguage",(function(s){s.preventDefault();var o=$(this).val();alertify.confirm("Are you sure you want to change course language?",(function(){!function(s){null!==e&&e.abort();ml(!0,"jsPageLoader"),e=$.ajax({url:apiURL+"lms/trainings/"+employeeId+"/"+courseId+"/"+s,method:"PUT"}).success((function(o){e=null,"language_changed"===o.status&&(window.location=baseURI+"lms/courses/"+courseId+"/"+s),ml(!1,"jsPageLoader")})).fail(handleErrorResponse).always((function(){e=null,ml(!1,"jsPageLoader")}))}(o)}),CB).setHeader("Confirm")})),"scorm"===courseType){window.sendCourseToSave=function(s){"completed"!=lessonStatus&&(e=$.ajax({url:apiURL+"lms/trainings/save_scorm/"+employeeId,method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify({courseId:courseId,cmiElement:s,type:"scorm",version:scormVersion})}).success((function(e){return"failed"===e.status?alertify.alert("WARNING!","Apologies for not passing this course. We highly encourage you to consider giving it another attempt.",(function(){window.location=baseURI+"lms/courses/"+courseId})):"passed"===e.status?alertify.alert("SUCCESS!","Congratulations on successfully passing this course!",(function(){window.location=baseURI+"lms/courses/my"})):void 0})).fail(handleErrorResponse).done((function(s){e=null})))}}function s(){null!==e&&e.abort(),ml(!0,"jsPageLoader"),e=$.ajax({url:apiURL+"lms/trainings/"+employeeId+"/"+courseId+"/"+courseLanguage+"?_has="+(-1!==window.location.host.indexOf("www.")?"y":"n"),method:"GET"}).success((function(s){e=null,$("#jsPreviewCourse").html(s),"manual"===courseType&&function(){null!==e&&e.abort();ml(!0,"jsPageLoader"),e=$.ajax({url:apiURL+"lms/trainings/"+employeeId+"/"+courseId+"/questions/"+mode,method:"GET"}).success((function(s){e=null,$("#jsPreviewCourseQuestion").html(s),ml(!1,"jsPageLoader")})).fail(handleErrorResponse).done((function(){e=null,ml(!1,"jsPageLoader")}))}(),ml(!1,"jsPageLoader")})).fail(handleErrorResponse).always((function(){e=null,ml(!1,"jsPageLoader")}))}$(document).on("click",".jsSaveQuestionResult",(function(s){s.preventDefault();var o=[],t={};if(JSON.parse(questions).map((function(e){var s=e.question_type+"_"+e.question_id;if("yes_no"===e.question_type||"single_choice"===e.question_type){var n=$("input[name="+s+"]:checked").val();t[e.question_id]=n,n&&void 0!==n||1==e.question_required&&o.push(e.question_title)}else if("multiple_choice"===e.question_type){var a=[];$("input[name='"+s+"']:checked").each((function(){a.push($(this).val())})),t[e.question_id]=a,0==a.length&&1==e.question_required&&o.push(e.question_title)}else if("text"===e.question_type){var r=$('textarea[name="textarea_'+e.question_id+'"]').val();t[e.question_id]=r,r&&void 0!==r||1==e.question_required&&o.push(e.question_title)}})),o.length)return alertify.alert("WARNING!",getQuestionsFromArray(o),CB);try{return function(s){null!==e&&e.abort();ml(!0,"jsPageLoader"),e=$.ajax({url:apiURL+"lms/trainings/"+employeeId,method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify({courseId:courseId,answers:s})}).success((function(s){return e=null,"failed"===s.status?alertify.alert("WARNING!","Apologies for not passing this course. We highly encourage you to consider giving it another attempt.",(function(){window.location=baseURI+"lms/courses/"+courseId})):"passed"===s.status?alertify.alert("SUCCESS!","Congratulations! you have successfully passed this course!",(function(){window.location=baseURI+"lms/courses/my"})):void ml(!1,"jsPageLoader")})).fail(handleErrorResponse).done((function(){e=null,ml(!1,"jsPageLoader")}))}(t),alertify.alert("SUCCESS!",createCourseResponse.data,(function(){getLMSDefaultCourses(),$("#"+modalId).remove()}))}catch(e){return ml(!1,modalLoaderId),alertify.alert("ERROR!",getErrorsStringFromArray(e.errors,"Errors!!"),CB)}})),"not_started"===lessonStatus?(ml(!1,"jsPageLoader"),$("#jsStartCourseDiv").show(),$(".jsSaveQuestionResult").hide()):"started"!==lessonStatus&&"completed"!==lessonStatus||(s(),"completed"===lessonStatus&&$(".jsSaveQuestionResult").hide())}));