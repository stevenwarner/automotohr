$((function(){let e=null,t={title:"",jobTitleIds:"all"},s=[],o=0,n=0,l=0;function r(){if(s.length>0&&void 0===s[l])return ml(!1,"jsPageLoader"),$("#js-loader-text").html(""),alertify.alert("Course Copy process is completed successfully!",(function(){s=[],o=0,n=0,l=0,a(),getLMSDefaultCourses()}));if(void 0===s[l])return ml(!1,"jsPageLoader"),void $("#js-loader-text").html("");var t=s[l];e=$.ajax({url:apiURL+"lms/course/assign",method:"POST",headers:{"content-type":"application/json"},data:JSON.stringify({courseID:t.course_sid})}).fail(handleErrorResponse).done((function(){l<=o?(l++,setTimeout((function(){r()}),1e3)):(ml(!1,"jsPageLoader"),alertify.alert("Course copy process is completed successfully!").set("onok",(function(e){s=[],o=0,n=0,l=0})))}))}function i(){let e="";return e+="title="+encodeURI(t.title),e+="&status="+encodeURI("active"),e+="&companyId="+encodeURI(companySid),e+="&job_titles="+("all"!=t.jobTitleIds?t.jobTitleIds.join(","):[]),e}function a(){null!==e&&e.abort(),ml(!0,"jsPageLoader"),e=$.ajax({url:apiURL+"lms/course/store/courses?"+i(),method:"GET",headers:{Authorization:"Bearer "+apiAccessTokenStore}}).success((function(t){e=null,$("#jsStoreCoursesView").html(t),ml(!1,"jsPageLoader")})).fail(handleErrorResponse).done((function(){e=null,ml(!1,"jsPageLoader")}))}$(".jsApplyFilterDefaultCourse").click((function(e){e.preventDefault(),t.title=$(".jsCourseTitleDefaultCourse").val()||"",t.jobTitleIds=$(".jsCourseJobTitleDefaultCourse").select2("val"),a()})),$(document).on("click",".jsToggleViewDefaultCourse",(function(e){e.preventDefault(),$('[data-key="jsView'+$(this).closest("tr").data("id")+'"]').toggleClass("hidden")})),$(document).on("click",".jsCheckAll",(function(){$(".jsStoreCourseRow").find('input[name="courses_ids[]"]').prop("checked",$(this).prop("checked"))})),$(document).on("click",".jsStoreCourseRow",(function(){$(this).find('input[name="courses_ids[]"]').prop("checked",!$(this).find('input[name="courses_ids[]"]').prop("checked"))})),$(document).on("click",".jsCopyCoursesBtn",(function(e){if(e.preventDefault(),s=function(){var e=[];return $.each($('input[name="courses_ids[]"]:checked'),(function(){var t={};t.course_sid=parseInt($(this).val()),t.course_name=$(this).closest("tr").find("td.js-course-name").text(),e.push(t)})),e}(),0===s.length)return alertify.alert("ERROR!","Please select at least one course to start the process.");ml(!0,"jsPageLoader"),$("#js-loader-text").html("Please wait, we are copying employee"),r()})),a()}));