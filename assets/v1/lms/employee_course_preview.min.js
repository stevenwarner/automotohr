$((function(){let t=null,e="MMM DD YYYY, ddd",s={title:"",status:"all"};if($(".jsFilterBox").click((function(t){t.preventDefault(),$(".jsCourseTitleMyCourse").val(""),$('.jsCourseStatus option[value="'+$(this).data("key")+'"]').prop("selected",!0),s.title=$(".jsCourseTitleMyCourse").val()||"",s.status=$(".jsCourseStatus").val(),a(subordinateId)})),$(".jsApplyFilterMyCourse").click((function(t){t.preventDefault(),s.title=$(".jsCourseTitleMyCourse").val()||"",s.status=$(".jsCourseStatus").val(),a(subordinateId)})),$(".jsClearFilterMyCourse").click((function(t){t.preventDefault(),$(".jsCourseTitleMyCourse").val(""),$('.jsCourseStatus option[value="all"]').prop("selected",!0),s.title=$(".jsCourseTitleMyCourse").val()||"",s.status=$(".jsCourseStatus").val(),a(subordinateId)})),"subordinate_course"===page&&"scorm"===courseType){window.sendCourseToSave=function(t){}}function a(a){null!==t&&t.abort(),ml(!0,"jsPageLoader"),t=$.ajax({url:apiURL+"lms/report/"+a+"/courses?title="+s.title+"&status="+s.status,method:"GET"}).success((function(s){t=null;let o="",i=s.data.count,n=s.data.courses;s.data.completedIds;$("#jsAssignedCount").html(i.assigned),$("#jsPendingCount").html(i.pending),$("#jsCompletedCount").html(i.completed),$("#jsExpiredSoonCount").html(i.expire_soon),s.data.assignedIds.length||($(".jsFilterSectionBtn").hide(),$(".jsSendReminderEmail").hide()),n.length?n.map((function(t){if((null==t.employee_sid||t.employee_sid==employeeId)&&s.data.assignedIds.includes(t.sid)){if(s.data.expiredSoonIds.includes(t.sid)?o+='<article class="article-sec" style="background: #fcf8e3 !important">':s.data.expiredIds.includes(t.sid)?o+='<article class="article-sec" style="background: #f2dede !important">':o+='<article class="article-sec">',s.data.expiredSoonIds.includes(t.sid)){const e=moment(t.course_end_period,"YYYY-MM-DD"),s=moment(),a=e.diff(s,"days");var i="";i=0==a?"Expire Day":1==a?`Expired in ${a} day`:`Expired in ${a} days`,o+='    <div class="row">',o+='        <div class="col-md-12 col-xs-12 text-right">',o+=`        \t<a href="javascript:;" class="btn btn-warning btn-xs csRadius5 csF14" title="This course is expired in ${a} days" placement="top">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-info-circle csF14" aria-hidden="true"></i>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&nbsp;${i}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</a>`,o+="        </div>",o+="    </div>"}if(s.data.expiredIds.includes(t.sid)){const e=moment(t.course_end_period,"YYYY-MM-DD"),s=moment(),a=Math.abs(e.diff(s,"days"));var n="";n=0==a?"Expire Day":1==a?`Expired ${a} day ago`:`Expired ${a} days ago`,o+='    <div class="row">',o+='        <div class="col-md-12 col-xs-12 text-right">',o+=`        \t<a href="javascript:;" class="btn btn-danger btn-xs csRadius5 csF14" title="This course expired ${a} days ago." placement="top">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-info-circle csF14" aria-hidden="true"></i>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&nbsp;${n}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</a>`,o+="        </div>",o+="    </div>"}o+="    <h1>",o+=t.course_title,o+="    </h1>",o+="    <br>",o+='    <div class="row">',o+='        <div class="col-md-3 col-xs-12">',o+='            <p class="csColumSection"><strong>ASSIGNED DATE</strong></p>',o+=`            <p>${moment(t.course_start_period).format(e)}</p>`,o+="        </div>",o+='        <div class="col-md-3 col-xs-12">',o+='            <p class="csColumSection"><strong>DUE DATE</strong></p>',o+=`            <p>${moment(t.course_end_period).format(e)}</p>`,o+="        </div>",o+='        <div class="col-md-3 col-xs-12">',o+='            <p class="csColumSection"><strong>STATUS</strong></p>',o+=`            <p>${"passed"==t.course_status?"COMPLETED":"PENDING"}</p>`,o+="        </div>",o+='        <div class="col-md-3 col-xs-12">',o+='            <p class="csColumSection"><strong>ASSIGNED TO</strong></p>',o+=`            <p>${s.data.employeeName}</p>`,o+="        </div>",o+="    </div>",o+='    <div class="row">',o+='        <div class="col-md-3 col-xs-12 hidden">',o+='            <p class="csColumSection"><strong>TIME REMAINING/TOTAL</strong></p>',o+="            <p>15 min / 15 min</p>",o+="        </div>",o+='        <div class="col-md-3 col-xs-12">',o+='            <p class="csColumSection"><strong>STARTED DATE </strong></p>',o+=`            <p>${t.created_at?moment(t.created_at).format(e):"-"}</p>`,o+="        </div>",o+='        <div class="col-md-3 col-xs-12">',o+='            <p class="csColumSection"><strong>LANGUAGE</strong></p>',o+='            <select class="form-control">',o+='                <option value="eng">English</option>',o+="            </select>",o+="        </div>",o+='        <div class="col-md-6 col-xs-12 text-right">',o+="            <p>&nbsp;</p>","passed"==t.course_status?(o+=`            <a class="btn btn-info csRadius5 csF16" href="${baseURI}lms/subordinate/course/${t.sid}/${a}">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-eye"></i>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tView Content\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</a>`,o+=`        <a class="btn btn-info csRadius5 csF16" href="${baseURI}lms/courses/${t.sid}/${a}/subordinate/certificate}">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-eye"></i>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tView Certificate\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</a>`):o+=`            <a class="btn btn-info csRadius5 csF16" href="${baseURI}lms/subordinate/course/${t.sid}/${a}">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-play"></i>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tLaunch Content\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</a>`,o+="        </div>",o+="    </div>",o+="</article>"}})):o='<p class="alert alert-info text-center">No trainings found.</p>',$("#jsMyAssignedCourses").html(o),$("#jsEmployeeListing").hide(),$("#jsEmployeeCourses").show(),ml(!1,"jsPageLoader")})).fail(handleErrorResponse).always((function(){t=null,ml(!1,"jsPageLoader")}))}"subordinate_courses"===page?a(subordinateId):($(".jsSaveQuestionResult").hide(),null!==t&&t.abort(),ml(!0,"jsPageLoader"),t=$.ajax({url:apiURL+"lms/report/"+subordinateId+"/"+courseId,method:"GET"}).success((function(e){t=null,$("#jsPreviewCourse").html(e),"manual"===courseType&&(null!==t&&t.abort(),ml(!0,"jsPageLoader"),t=$.ajax({url:apiURL+"lms/report/"+subordinateId+"/"+courseId+"/questions/attempt",method:"GET"}).success((function(e){t=null,$("#jsPreviewCourseQuestion").html(e),ml(!1,"jsPageLoader")})).fail(handleErrorResponse).done((function(){t=null,ml(!1,"jsPageLoader")}))),ml(!1,"jsPageLoader")})).fail(handleErrorResponse).always((function(){t=null,ml(!1,"jsPageLoader")}))),$(document).on("click",".jsSendReminderEmail",(function(e){e.preventDefault(),alertify.prompt("Please Enter a Note","","",(function(e,s){""!=s.trim()?alertify.confirm("Do you really want to send email reminder to <b>"+subordinateName+"</b>?",(function(){var e,a;employeeInfo=(e=[],(a={}).employee_sid=subordinateId,a.employee_name=subordinateName,e.push(a),e),function(e,s){null!==t&&t.abort();ml(!0,"jsPageLoader"),t=$.ajax({url:baseURI+"lms/courses/emailReminder/single",method:"POST",data:{employeeList:e,note:s}}).success((function(e){return t=null,ml(!1,"jsPageLoader"),alertify.alert("SUCCESS!","You have successfully sent an email reminder to <b>"+subordinateName+"</b>.")})).fail(handleErrorResponse).done((function(e){t=null}))}(employeeInfo,s)})):alertify.alert("ERROR!","Please Enter a Note.")}),(function(){alertify.error("Cancel")}))}))}));