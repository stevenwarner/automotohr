$((function(){let e=null,t={title:"",status:"active",jobTitleIds:"all"};function s(){let e="";return e+="title="+encodeURI(t.title),e+="&status="+encodeURI(t.status),e+="&job_titles="+("all"!=t.jobTitleIds?t.jobTitleIds.join(","):[]),e}function l(){null!==e&&e.abort(),ml(!0,"jsPageLoader"),e=$.ajax({url:apiURL+"lms/course?"+s(),method:"GET"}).success((function(t){e=null,$("#jsDefaultCoursesView").html(t),ml(!1,"jsPageLoader")})).fail(handleErrorResponse).done((function(){e=null,ml(!1,"jsPageLoader")}))}function o(t,s){null===e&&(ml(!0,"jsPageLoader"),e=$.ajax({url:apiURL+"lms/course/"+t+"/status",method:"PUT",headers:{"content-type":"application/json"},data:JSON.stringify({active:s})}).success((function(t){e=null,alertify.success(t.success),l()})).fail(handleErrorResponse).done((function(){e=null,ml(!1,"jsPageLoader")})))}$(".jsCourseStatusDefaultCourse").select2({minimumResultsForSearch:-1}).select2("val",t.status),$(".jsApplyFilterDefaultCourse").click((function(e){e.preventDefault(),t.title=$(".jsCourseTitleDefaultCourse").val()||"",t.status=$(".jsCourseStatusDefaultCourse").select2("val"),t.jobTitleIds=$(".jsCourseJobTitleDefaultCourse").select2("val"),l()})),$(document).on("click",".jsToggleViewDefaultCourse",(function(e){e.preventDefault(),$('[data-key="jsView'+$(this).closest("tr").data("id")+'"]').toggleClass("hidden")})),$(document).on("click",".jsEnableDefaultCourse",(function(e){e.preventDefault();let t=$(this).closest("tr").data("id");return alertify.confirm("Do you really want to enable this course?",(function(){o(t,!0)}),CB).set("labels",{ok:"Yes",cancel:"No"}).setHeader("Confirm")})),$(document).on("click",".jsDisableDefaultCourse",(function(e){e.preventDefault();let t=$(this).closest("tr").data("id");return alertify.confirm("Do you really want to disable this course?",(function(){o(t,!1)}),CB).set("labels",{ok:"Yes",cancel:"No"}).setHeader("Confirm")})),$(document).on("click",".jsAddCourse",(function(e){e.preventDefault(),startCreateCourseProcess(0)})),$(document).on("click",".jsEditCourse",(function(e){e.preventDefault(),startEditCourseProcess(0,$(this).closest("tr").data("id"))})),window.getLMSDefaultCourses=l,$.ajax({url:apiURL+"jobs/titles/default",method:"GET"}).success((function(e){if(e.data){let t='<option value="all">All</option>';e.data.map((function(e){t+='<option value="'+e.sid+'">'+e.title+"</option>"})),$(".jsCourseJobTitleDefaultCourse").html(t),$(".jsCourseJobTitleDefaultCourse").select2()}})),l()}));