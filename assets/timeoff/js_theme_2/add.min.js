$(function(){function e(e){ml(!0,y),$.post(handlerURL,Object.assign({action:"create_timeoff",companyId:companyId,employerId:employerId,employeeId:f},e),e=>{if(!1===e.Status)return ml(!1,y),void alertify.alert("WARNING!",e.Response,()=>{});ml(!1,y),alertify.alert("SUCCESS!",e.Response,()=>{$(".jsModalCancel").removeAttr("data-ask"),$(".jsModalCancel").trigger("click"),window.location.reload()})})}function t(e){return new Promise(t=>{$.post(handlerURL,{action:"get_modal",companyId:companyId,employerId:employerId,employeeId:employeeId,type:e,formLMS:null!==window.location.pathname.match(/(lms)|(create_employee)|(employee_management_system)|(dashboard)/gi)?1:0},e=>{t(e)})})}function a(){return new Promise(e=>{$.post(handlerURL,{action:"get_employee_policies_with_approvers",companyId:companyId,employerId:employerId,employeeId:f},t=>{e(t)})})}function o(){$(".jsAsOfTodayPolicies").html(""),$.post(handlerURL,{action:"get_employee_policies_by_date",companyId:companyId,employerId:employerId,employeeId:f,fromDate:$("#jsStartDate").val()},e=>{window.timeoff.cPolicies=e.Data,$(".jsCreateTimeOffBTN").prop("disabled",!1),$("#jsEndDate").prop("disabled",!1),$("#jsAddPolicy").prop("disabled",!1);let t=[],a={};if(e.Data.length>0){let o="";e.Data.map(e=>{""==e.Reason&&(t.push(e),void 0===a[e.Category]&&(a[e.Category]=[]),a[e.Category].push(e),o+=`\n                        <div class="p10">\n                        <strong>${e.Title} (<strong class="text-${1==e.categoryType?"success":"danger"}">${1==e.categoryType?"Paid":"Unpaid"}</strong>)</strong>\n                        <br />\n                        <span>(${e.Category})</span>  \n                        <br />\n                        <span>${e.IsUnlimited?"Unlimited":e.RemainingTime.text} remaining</span>\n                        <br />\n                        <span>${e.IsUnlimited?"Unlimited":e.ConsumedTime.text} scheduled</span>\n                        <br />\n                        <span>Employment status: ${ucwords(e.EmployementStatus)}</span><br>\n                        <span>Policy Cycle: ${moment(e.lastAnniversaryDate,"YYYY/MM/DD").format(timeoffDateFormat)} -\n                        ${moment(e.upcomingAnniversaryDate,"YYYY/MM/DD").format(timeoffDateFormat)}\n                        </span> \n                        </div>\n                        <hr />\n                        `)}),window.timeoff.cPolicies=t,$("#jsAsOfTodayPolicies").html(o);let i='<option value="0" selected="true">[Select a policy]</option>';$.each(a,(e,t)=>{i+=`<optgroup label="${e}">`,t.map(e=>{i+=`<option value="${e.PolicyId}">${e.Title} (<strong class="text-${1==e.categoryType?"success":"danger"}">${1==e.categoryType?"Paid":"Unpaid"}</strong>)</option>`}),i+="</optgroup>"}),$("#jsAddPolicy").html(i),$("#jsAddPolicy").select2()}0==window.timeoff.cPolicies.length&&($("#jsAsOfTodayPolicies").html('<div class="alert alert-success">No policies found.</div>'),$(".jsCreateTimeOffBTN").prop("disabled",!0),$("#jsEndDate").prop("disabled",!0),$("#jsAddPolicy").prop("disabled",!0))})}function i(e){var t=void 0===policyOffDays?timeOffDays:policyOffDays,a=moment(e).format("MM-DD-YYYY");let o=moment(e).format("dddd").toString().toLowerCase(),i=1;return i=-1!==$.inArray(o,t)?{work_on_holiday:0,holiday_title:"Weekly off"}:inObject(a,holidayDates),-1==i?[!0,""]:1==i.work_on_holiday?[!0,"set_disable_date_color",i.holiday_title]:[!1,"",i.holiday_title]}async function n(){const e=await s();if(!0===e.Redirect)return void alertify.alert("WARNING!","Your session expired. Please, re-login to continue.",()=>{window.location.reload()});if(0==e.Status||0==e.Data.length)return void alertify.alert("WARNING!","We are unable to find any active employees.",()=>{});let t='<option value="0">Please select an employee</option>';window.timeoff.companyEmployees=e.Data,e.Data.map(e=>{"1"!==e.terminated_status&&"0"!==e.active&&(t+=`<option value="${e.user_id}">${remakeEmployeeName(e)}</option>`)}),Modal({Id:"addAdminModal",Title:"Create a time-off",Body:`\n                <div class="col-sm-6">\n                <label>Select an employee <span class="cs-required">*</span></label>\n                <select id="jsAddAdminModalList">${t}</select>\n                </div>\n                <div class="col-sm-12">\n                    <hr />\n                </div>\n                <div class="clearfix"></div>\n            `,Buttons:['<button class="btn btn-orange btn-theme jsCreateTimeOffBalanceAdmin" style="margin-right: 10px;" title="See employee balance" placement="left"><i class="fa fa-balance-scale" aria-hidden="true"></i>&nbsp;View Balance History</button>','<button class="btn btn-black jsCreateTimeOffBalanceBackAdmin dn" style="margin-right: 10px;" ><i class="fa fa-long-arrow-left" aria-hidden="true"></i>&nbsp;Back To Create</button>','<button class="btn btn-orange btn-theme jsCreateTimeOffBTN"><i class="fa fa-plus-circle" aria-hidden="true"></i>&nbsp;Create</button>'],Loader:"addAdminModalLoader",Ask:!1},async()=>{$("#jsAddAdminModalList").select2({templateSelection:t=>{if($(".jsAddTimeOff").remove(),$(".jsCreateTimeOffBTN").addClass("dn"),0==t.id)return t.text;const a=getUserById(t.id,e.Data,"user_id");return f=a.user_id,p=`${a.first_name} ${a.last_name}`,ml(!0,"addAdminModalLoader"),d("addAdminModalLoader","addAdminModal"),$(`<span><img  style="padding: 5px; margin-left: 5px;" src="${""==a.image||null==a.image?awsURL+"test_file_01.png":awsURL+a.image}" width="60px" /> <span>${t.text}</span></span>`)}}),ml(!1,"addAdminModalLoader")})}function s(){return new Promise(e=>{$.post(handlerURL,{action:"get_company_employees",companyId:companyId,employerId:employerId,employeeId:f},t=>{e(t)})})}async function d(e,n){if(policyOffDays=void 0,void 0===window.timeoff.companyEmployees){const e=await s();window.timeoff.companyEmployees=e.Data}$("#addAdminModal").find(".csModalHeaderTitle span:nth-child(1)").text("Create a time-off"),$("#addModal").find(".csModalHeaderTitle span:nth-child(1)").text($("#addModal").find(".csModalHeaderTitle span:nth-child(1)").text().replace("Balance History ","Create Time-off")),$(".jsCreateTimeOffBalanceBack").hide(0),$(".jsCreateTimeOffBalanceBackAdmin").hide(0),$(".jsCreateTimeOffBalance").show(0),$(".jsCreateTimeOffBalanceAdmin").show(0),$(".jsCreateTimeOffBTN").show(0),y=e;const d=await a(),l=d.Data.Policies;if($(`#${n}`).find(".csModalBody .alert").remove(),0===l.length)return $(".jsAddTimeOff").remove(),$(`#${n}`).find(".csModalBody").append('<div class="alert alert-success text-center">We are unable to find policies against this employee.</div>'),void ml(!1,e);let m=l.length,c=0,p={};if(window.timeoff.cPolicies=l,l.map(e=>{""==e.Reason?(void 0===p[e.Category]&&(p[e.Category]=[]),p[e.Category].push(e)):c++}),m==c)return $(".jsAddTimeOff").remove(),$(`#${n}`).find(".csModalBody").append('<div class="alert alert-success text-center">We are unable to find policies against this employee.</div>'),void ml(!1,e);let h='<option value="0" selected="true">[Select a policy]</option>';$.each(p,(e,t)=>{h+=`<optgroup label="${e}">`,t.map(e=>{h+=`<option value="${e.PolicyId}">${e.Title} (<strong class="text-${1==e.categoryType?"success":"danger"}">${1==e.categoryType?"Paid":"Unpaid"}</strong>)</option>`}),h+="</optgroup>"});const g=await t("add");$(".jsAddTimeOff").remove(),$(`#${n}`).find(".csModalBody").append(g),$("#jsAddPolicy").html(h),$("#jsAddPolicy").select2(),0!=u&&$("#jsAddPolicy").select2("val",u),$("#jsStartDate").datepicker({format:"mm-dd-yyyy",changeYear:!0,changeMonth:!0,beforeShowDay:i,onSelect:e=>{$("#jsEndDate").datepicker("option","minDate",e),$("#asoffdate").text("AS Of  "+moment($("#jsStartDate").val(),"MM/DD/YYYY").format(timeoffDateFormat)),o(),remakeRangeRows("#jsStartDate","#jsEndDate",".jsDurationBox")}}),$("#jsEndDate").datepicker({format:"mm-dd-yyyy",changeYear:!0,changeMonth:!0,beforeShowDay:i,onSelect:e=>{remakeRangeRows("#jsStartDate","#jsEndDate",".jsDurationBox")}}),$("#js-vacation-return-date").datepicker({format:"mm-dd-yyyy",changeYear:!0,changeMonth:!0,minDate:1,beforeShowDay:i}),$("#js-bereavement-return-date").datepicker({format:"mm-dd-yyyy",changeYear:!0,changeMonth:!0,minDate:1,beforeShowDay:i}),$("#js-compensatory-return-date").datepicker({format:"mm-dd-yyyy",changeYear:!0,changeMonth:!0,minDate:1,beforeShowDay:i}),$("#js-compensatory-start-time").datepicker({format:"g:i A",formatTime:"g:i A",step:15}),$("#js-compensatory-end-time").datepicker({format:"g:i A",formatTime:"g:i A",step:15}),null!==window.location.pathname.match(/(lms)|(employee_management_system)|(dashboard)/gi)?($("#jsComment").parent().hide(),$(".jsEmailBoxAdd").hide(),$("#jsStatus").html('<option value="pending">Pending</option>').parent().hide(0),$("#jsStartDate").datepicker("option","minDate",-1),$("#jsEndDate").datepicker("option","minDate",-1)):$("#jsStatus").select2({minimumResultsForSearch:5}),CKEDITOR.config.toolbar=[["Bold","Italic","Underline"]],$("#jsReason").length>0&&CKEDITOR.replace("jsReason"),$("#jsComment").length>0&&CKEDITOR.replace("jsComment"),window.timeoff.companyEmployees.map(function(e){if(e.user_id==f){var t=null==e.joined_at?e.joined_at:e.registration_date;t=moment(t,"YYYY-MM-DD").format(timeoffDateFormat),$("#jsEmployeeInfoAdd").html(`\n                <figure>\n                    <img src="${getImageURL(e.image)}"\n                        class="csRadius50">\n                    <div class="csTextBox">\n                        <p>${e.first_name} ${e.last_name}</p>\n                        <p class="csTextSmall"> ${remakeEmployeeName(e,!1)}</p>\n                        <p class="csTextSmall">${e.email}</p>\n                        <p class="csTextSmall">${e.anniversary_text}</p>\n                    </div>\n                </figure>\n                <div class="clearfix"></div>\n                `)}}),o(f),r(d.Data.Approvers),$(".jsCreateTimeOffBTN").removeClass("dn"),loadTitles(),setUpcomingTimeOffs(f),ml(!1,e)}function r(e){if(0===e.length)return void $("#jsApproversListingAdd").html("<p>No approvers found.</p>");let t="",a="";e.map(e=>{let o=`${remakeEmployeeName(e)}`;t+=`\n                <div class="csApproverBox" title="Approver" data-content="${o}">\n                    <img src="${null==e.profile_picture||""==e.profile_picture?awsURL+"test_file_01.png":awsURL+e.profile_picture}" />\n                </div>\n            `,a+=`\n                <div class="csApproverBox">\n                    <div class="employee-info">            \n                        <figure>                \n                            <img src="${null==e.profile_picture||""==e.profile_picture?awsURL+"test_file_01.png":awsURL+e.profile_picture}" />          \n                        </figure>            \n                        <div class="text">                \n                            <h4>${o}</h4>                \n                            <p><a href="http://automotohr.local/employee_profile/${e.userId}" target="_blank">Id: ${getEmployeeId(e.userId,e.employee_number)}</a></p>            \n                        </div>        \n                    </div>\n                </div>\n            `}),$("#jsApproversListingMobileAdd").html(a),$("#jsApproversListingAdd").html(t),$(".csApproverBox").popover({html:!0,trigger:"hover",placement:"top"})}function l(e){if(0===window.timeoff.cPolicies.length)return[];let t=[];return window.timeoff.cPolicies.map(a=>{a.PolicyId==e&&(t=a)}),t}let m=employeeId,c=employeeName,f=employeeId,p=employeeName,u=0,y="",h={policyId:0,startDate:0,endDate:0,dateRows:"",status:0,reason:0,comment:0,sendEmailNotification:0,fromAdmin:1};$(document).on("click",".jsCreateTimeOffBTN",function(t){t.preventDefault();let a=l(getField("#jsAddPolicy"));if(0==a.length)return void alertify.alert("WARNING!","You don't have any policies. Please select a different date.",()=>{});if(h.policyId=getField("#jsAddPolicy"),h.startDate=getField("#jsStartDate"),h.endDate=getField("#jsEndDate"),h.status=getField("#jsStatus"),h.reason=CKEDITOR.instances.jsReason.getData(),h.comment=CKEDITOR.instances.jsComment.getData(),h.sendEmailNotification=getField(".js-send-email:checked"),h.dateRows=getRequestedDays(".jsDurationBox"),0==h.policyId)return void alertify.alert("WARNING!","Please select a policy.",()=>{});if(0==h.startDate)return void alertify.alert("WARNING!","Please select the start date.",()=>{});if(0==h.endDate)return void alertify.alert("WARNING!","Please select an end date.",()=>{});if(null===window.location.pathname.match(/(lms)|(employee_management_system)|(dashboard)/gi)&&"pending"==h.status)return void alertify.alert("WARNING!","Please, either select approve or reject.",()=>{});if(h.dateRows.error)return;let o=getPolicy(h.policyId,window.timeoff.cPolicies);if(console.log(o),0==o.IsUnlimited){if(o.RemainingTimeWithNegative.M.minutes<=0)return void alertify.alert("WARNING!","You don't have any time left against this policy.",()=>{});if(h.dateRows.totalTime>o.RemainingTimeWithNegative.M.minutes)return void alertify.alert("WARNING!",`Requested time-off can not be greater than the allowed time i.e. "${o.RemainingTimeWithNegative.text}"`,()=>{})}h.fromAdmin=1,null!==window.location.pathname.match(/(lms)|(dashboard)/gi)&&(h.fromAdmin=0),$.post(handlerURL,Object.assign({action:"check_timeoff_request",companyId:companyId,employerId:employerId,employeeId:f},h),t=>{if(1==t.Response.code&&(console.log("varified"),e(h)),2==t.Response.code){if("approved"==t.Response.conflictStatus)return void alertify.alert("Conflict!",t.Response.message,()=>{});alertify.confirm(t.Response.message,()=>{console.log("confirm"),e(h)},()=>{}).set("labels",{ok:"Yes",cancel:"NO"}).set("title","Conflict!")}})}),$(document).on("click",".jsCreateRequest",function(e){if(e.preventDefault(),timeRowsOBJ={},u=0,void 0!==$(this).prop("id")&&""!=$(this).prop("id"))return void n();let t=0,a="";null!==window.location.pathname.match("/create_employee/")?(t=window.location.pathname.split("/")[3],a=p):void 0!==$(this).data("id")?(f=m,p=c,t=f,a=p):(t=$(this).closest(".jsBox").data("id"),a=$(this).closest(".jsBox").data("name")),f=t,p=a,void 0!==$(this).data("policyid")&&(u=$(this).data("policyid")),Modal({Id:"addModal",Title:`Create Time-off for ${p}`,Body:"",Buttons:['<button class="btn btn-orange btn-theme jsCreateTimeOffBalance" style="margin-right: 10px;" title="See employee balance" placement="left"><i class="fa fa-balance-scale" aria-hidden="true"></i>&nbsp;View Balance History</button>','<button class="btn btn-black jsCreateTimeOffBalanceBack dn" style="margin-right: 10px;" ><i class="fa fa-long-arrow-left" aria-hidden="true"></i>&nbsp;Back To Create</button>','<button class="btn btn-orange btn-theme jsCreateTimeOffBTN"><i class="fa fa-plus-circle" aria-hidden="true"></i>&nbsp;Create</button>'],Loader:"addModalLoader",Ask:!1},async()=>{d("addModalLoader","addModal")})}),$(document).on("click",".jsCreateTimeOffBalance",function(e){e.preventDefault(),null!=f?($(this).hide(0),$(".jsCreateTimeOffBalanceBack").show(0),$(".jsCreateTimeOffBTN").hide(0),$("#addModal").find('[data-page="main"]').hide(0),$("#addModal").find('[data-page="balance-view"]').show(0),$("#addModal").find(".csModalHeaderTitle span:nth-child(1)").text($("#addModal").find(".csModalHeaderTitle span:nth-child(1)").text().trim().replace("Create Time-off","Balance History ")),$.post(handlerURL,{action:"get_employee_balance_history",companyId:companyId,employerId:employerId,employeeId:f}).done(function(e){var t="";if(0===e.Data.length)t+="<tr>",t+='   <td colspan="6">',t+='       <p class="alert alert-info text-center">',t+="          No balance history found.",t+="       </p>",t+="   </td>",t+="</tr>";else{var a=0,o={},i={};void 0!==e.Data[0].timeoff_breakdown.active.hour&&(o.hour=0,i.hour=0),void 0!==e.Data[0].timeoff_breakdown.active.minutes&&(o.minutes=0,i.minutes=0),e.Data.map(function(e){var n="",s="",d="",r="";0==e.is_manual&&1==e.is_allowed?(n=moment(e.effective_at,"YYYY-MM-DD").format(timeoffDateFormat),s="",d="-",r=""):1==e.is_manual?(n=moment(e.effective_at,"YYYY-MM-DD").format(timeoffDateFormat),s=moment(e.effective_at,"YYYY-MM-DD").format(timeoffDateFormat),d=e.first_name+" "+e.last_name,r=remakeEmployeeName(e,!1),void 0!==e.timeoff_breakdown.active.hours&&(void 0===i.hours&&(i.hours=0),i.hours+=parseInt(e.timeoff_breakdown.active.hours)),void 0!==e.timeoff_breakdown.active.minutes&&(void 0===i.minutes&&(i.minutes=0),i.minutes+=parseInt(e.timeoff_breakdown.active.minutes))):(a++,n=moment(e.request_from_date,"YYYY-MM-DD").format(timeoffDateFormat),s=moment(e.request_to_date,"YYYY-MM-DD").format(timeoffDateFormat),d=e.approverName,r=e.approverRole,void 0!==e.timeoff_breakdown.active.hours&&(void 0===o.hours&&(o.hours=0),o.hours+=parseInt(e.timeoff_breakdown.active.hours)),void 0!==e.timeoff_breakdown.active.minutes&&(void 0===o.minutes&&(o.minutes=0),o.minutes+=parseInt(e.timeoff_breakdown.active.minutes))),t+="<tr>",t+="   <td>",t+="       <strong>",t+=d+"<br>",t+="       </strong>",t+=r,t+="   </td>",t+="   <td>",t+="       <strong>"+e.title+"</strong>",t+="       <p>"+n+(""!=s?" - "+s:"")+"</p>",t+="   </td>",t+=' <td class="'+(0==e.is_added?"text-danger":"text-success")+'"><i class="fa fa-arrow-'+(0==e.is_added?"down ":"up")+'"></i>&nbsp;'+e.timeoff_breakdown.text+"</td>",t+="   <td>",t+=""!=e.note?e.note:"-",t+="   </td>",t+="   <td>",t+=moment(e.created_at,"YYYY-MM-DD").format(timeoffDateFormatWithTime),t+="   </td>",t+="   <td>",t+='       <strong class="text-'+(1==e.is_manual?"success":"danger")+'">'+(1==e.is_manual?"Yes":"No")+"</strong>",t+="   </td>",t+="</tr>",t+="<tr>",t+='   <td colspan="6">',0==e.is_manual&&1==e.is_allowed?t+="       <p><strong>Note</strong>: A balance of <b>"+e.added_time/60+'</b> hours is available against policy <b>"'+e.title+'"</b> effective from <b>'+moment(e.effective_at,"YYYY-MM-DD").format(timeoffDateFormat)+"</b>":t+="       <p><strong>Note</strong>: <strong>"+d+"</strong> has "+(1==e.is_manual?1==e.is_added?"added balance":"subtracted balance":"approved time off")+' against policy "<strong>'+e.title+'</strong>" on <strong>'+moment(e.created_at,"YYYY-MM-DD").format(timeoffDateFormatWithTime)+"</strong> which will take effect "+(n==s?"on ":" from ")+" <strong>"+n+(n!=s?" to  "+s:"")+"</strong>.</p>",t+="   </td>",t+="</tr>"}),$(".jsCreateTimeOffNumber").text(a),$(".jsCreateTimeOffTimeTaken").text(getText(o)),$(".jsCreateTimeOffManualAllowedTime").text(getText(i))}$("#jsCreateTimeoffBalanceBody").html(t),ml(!1,"balance-view")})):alertify.alert("Warning!","Please, select an employee.")}),$(document).on("click",".jsCreateTimeOffBalanceBack",function(e){e.preventDefault(),$(this).hide(0),$(".jsCreateTimeOffBalance").show(0),$(".jsCreateTimeOffBTN").show(0),$("#addModal").find('[data-page="balance-view"]').hide(0),$("#addModal").find('[data-page="main"]').show(0),$("#addModal").find(".csModalHeaderTitle span:nth-child(1)").text($("#addModal").find(".csModalHeaderTitle span:nth-child(1)").text().trim().replace("Balance History ","Create Time-off"))}),$(document).on("click",".jsCreateTimeOffBalanceAdmin",function(e){e.preventDefault(),null!=f?($(this).hide(0),$(".jsCreateTimeOffBalanceBackAdmin").show(0),$(".jsCreateTimeOffBTN").hide(0),$("#addAdminModal").find('[data-page="main"]').hide(0),$("#addAdminModal").find('[data-page="balance-view"]').show(0),$("#addAdminModal").find(".csModalHeaderTitle span:nth-child(1)").text($("#addAdminModal").find(".csModalHeaderTitle span:nth-child(1)").text().trim().replace("Create a time-off","Balance History")),$.post(handlerURL,{action:"get_employee_balance_history",companyId:companyId,employerId:employerId,employeeId:f}).done(function(e){var t="";if(0===e.Data.length)t+="<tr>",t+='   <td colspan="6">',t+='       <p class="alert alert-info text-center">',t+="          No balance history found.",t+="       </p>",t+="   </td>",t+="</tr>";else{var a=0,o={},i={};void 0!==e.Data[0].timeoff_breakdown.active.hour&&(o.hour=0,i.hour=0),void 0!==e.Data[0].timeoff_breakdown.active.minutes&&(o.minutes=0,i.minutes=0),e.Data.map(function(e){var n="",s="",d="",r="";0==e.is_manual&&1==e.is_allowed?(n=moment(e.effective_at,"YYYY-MM-DD").format(timeoffDateFormat),s="",d="-",r=""):1==e.is_manual?(n=moment(e.effective_at,"YYYY-MM-DD").format(timeoffDateFormat),s=moment(e.effective_at,"YYYY-MM-DD").format(timeoffDateFormat),d=e.first_name+" "+e.last_name,r=remakeEmployeeName(e,!1),void 0!==e.timeoff_breakdown.active.hours&&(void 0===i.hours&&(i.hours=0),i.hours+=parseInt(e.timeoff_breakdown.active.hours)),void 0!==e.timeoff_breakdown.active.minutes&&(void 0===i.minutes&&(i.minutes=0),i.minutes+=parseInt(e.timeoff_breakdown.active.minutes))):(a++,n=moment(e.request_from_date,"YYYY-MM-DD").format(timeoffDateFormat),s=moment(e.request_to_date,"YYYY-MM-DD").format(timeoffDateFormat),d=e.approverName,r=e.approverRole,void 0!==e.timeoff_breakdown.active.hours&&(void 0===o.hours&&(o.hours=0),o.hours+=parseInt(e.timeoff_breakdown.active.hours)),void 0!==e.timeoff_breakdown.active.minutes&&(void 0===o.minutes&&(o.minutes=0),o.minutes+=parseInt(e.timeoff_breakdown.active.minutes))),t+="<tr>",t+="   <td>",t+="       <strong>",t+=d+"<br>",t+="       </strong>",t+=r,t+="   </td>",t+="   <td>",t+="       <strong>"+e.title+"</strong>",t+="       <p>"+n+(""!=s?" - "+s:"")+"</p>",t+="   </td>",t+=' <td class="'+(0==e.is_added?"text-danger":"text-success")+'"><i class="fa fa-arrow-'+(0==e.is_added?"down ":"up")+'"></i>&nbsp;'+e.timeoff_breakdown.text+"</td>",t+="   <td>",t+=""!=e.note?e.note:"-",t+="   </td>",t+="   <td>",t+=moment(e.created_at,"YYYY-MM-DD").format(timeoffDateFormatWithTime),t+="   </td>",t+="   <td>",t+='       <strong class="text-'+(1==e.is_manual?"success":"danger")+'">'+(1==e.is_manual?"Yes":"No")+"</strong>",t+="   </td>",t+="</tr>",t+="<tr>",t+='   <td colspan="6">',0==e.is_manual&&1==e.is_allowed?t+="       <p><strong>Note</strong>: A balance of <b>"+e.added_time/60+'</b> hours is available against policy <b>"'+e.title+'"</b> effective from <b>'+moment(e.effective_at,"YYYY-MM-DD").format(timeoffDateFormat)+"</b>":t+="       <p><strong>Note</strong>: <strong>"+d+"</strong> has "+(1==e.is_manual?1==e.is_added?"added balance":"subtracted balance":"approved time off")+' against policy "<strong>'+e.title+'</strong>" on <strong>'+moment(e.created_at,"YYYY-MM-DD").format(timeoffDateFormatWithTime)+"</strong> which will take effect "+(n==s?"on ":" from ")+" <strong>"+n+(n!=s?" to  "+s:"")+"</strong>.</p>",t+="   </td>",t+="</tr>"}),$(".jsCreateTimeOffNumber").text(a),$(".jsCreateTimeOffTimeTaken").text(getText(o)),$(".jsCreateTimeOffManualAllowedTime").text(getText(i))}$("#jsCreateTimeoffBalanceBody").html(t),ml(!1,"balance-view"),console.log(e)})):alertify.alert("Warning!","Please, select an employee.")}),$(document).on("click",".jsCreateTimeOffBalanceBackAdmin",function(e){e.preventDefault(),$(this).hide(0),$(".jsCreateTimeOffBalanceAdmin").show(0),$(".jsCreateTimeOffBTN").show(0),$("#addAdminModal").find('[data-page="balance-view"]').hide(0),$("#addAdminModal").find('[data-page="main"]').show(0),$("#addAdminModal").find(".csModalHeaderTitle span:nth-child(1)").text($("#addAdminModal").find(".csModalHeaderTitle span:nth-child(1)").text().trim().replace("Balance History","Create a time-off"))})});