$((function(){let e=employeeId,t=employeeName,a=employeeId,o=employeeName,i=0,n="",s={policyId:0,startDate:0,endDate:0,dateRows:"",status:0,reason:0,comment:0,sendEmailNotification:0,fromAdmin:1};function d(e){ml(!0,n),$.post(handlerURL,Object.assign({action:"create_timeoff",companyId:companyId,employerId:employerId,employeeId:a},e),(e=>{if(!1===e.Status)return ml(!1,n),void alertify.alert("WARNING!",e.Response,(()=>{}));ml(!1,n),alertify.alert("SUCCESS!",e.Response,(()=>{$(".jsModalCancel").removeAttr("data-ask"),$(".jsModalCancel").trigger("click"),window.location.reload()}))}))}function r(){$(".jsAsOfTodayPolicies").html(""),$.post(handlerURL,{action:"get_employee_policies_by_date",companyId:companyId,employerId:employerId,employeeId:a,fromDate:$("#jsStartDate").val()},(e=>{window.timeoff.cPolicies=e.Data,$(".jsCreateTimeOffBTN").prop("disabled",!1),$("#jsEndDate").prop("disabled",!1),$("#jsAddPolicy").prop("disabled",!1);let t=[];if(e.Data.length>0){let a="",o={};e.Data.map((e=>{""==e.Reason&&(void 0===o[e.Category]&&(o[e.Category]=[]),o[e.Category].push(e),t.push(e),a+=`\n                        <div class="p10">\n                        <strong>${e.Title} (<strong class="text-${1==e.categoryType?"success":"danger"}">${1==e.categoryType?"Paid":"Unpaid"}</strong>)</strong>\n                        <br />\n                        <span>(${e.Category})</span>  \n                        <br />\n                        <span>${e.IsUnlimited?"Unlimited":e.RemainingTime.text} remaining</span>\n                        <br />\n                        <span>${e.IsUnlimited?"Unlimited":e.ConsumedTime.text} scheduled</span>\n                        <br />\n                        <span>Employment status: ${ucwords(e.EmployementStatus)}</span><br>\n                        <span>Policy Cycle: ${moment(e.lastAnniversaryDate,"YYYY/MM/DD").format(timeoffDateFormat)} -\n                        ${moment(e.upcomingAnniversaryDate,"YYYY/MM/DD").format(timeoffDateFormat)}\n                        </span> \n                        </div>\n                        <hr />\n                        `)}));let i="";for(let e in o)i+=`<optgroup label="${e}">`,o[e].map((e=>{i+=`\n                            <option value="${e.PolicyId}">${e.Title}</option>\n                            `})),i+="</optgroup>";$("#jsAddPolicy").html(i),$("#jsAddPolicy").select2(),window.timeoff.cPolicies=t,$("#jsAsOfTodayPolicies").html(a)}0==window.timeoff.cPolicies.length&&($("#jsAsOfTodayPolicies").html('<div class="alert alert-success">No policies found.</div>'),$(".jsCreateTimeOffBTN").prop("disabled",!0),$("#jsEndDate").prop("disabled",!0),$("#jsAddPolicy").prop("disabled",!0))}))}function l(e){var t=void 0===policyOffDays?timeOffDays:policyOffDays,a=moment(e).format("MM-DD-YYYY");let o=moment(e).format("dddd").toString().toLowerCase(),i=1;return i=-1!==$.inArray(o,t)?{work_on_holiday:0,holiday_title:"Weekly off"}:inObject(a,holidayDates),-1==i?[!0,""]:1==i.work_on_holiday?[!0,"set_disable_date_color",i.holiday_title]:[!1,"",i.holiday_title]}function m(){return new Promise((e=>{$.post(handlerURL,{action:"get_company_employees",companyId:companyId,employerId:employerId,employeeId:a},(t=>{e(t)}))}))}async function c(e,t){if(policyOffDays=void 0,void 0===window.timeoff.companyEmployees){const e=await m();window.timeoff.companyEmployees=e.Data}$("#addAdminModal").find(".csModalHeaderTitle span:nth-child(1)").text("Create a time-off"),$("#addModal").find(".csModalHeaderTitle span:nth-child(1)").text($("#addModal").find(".csModalHeaderTitle span:nth-child(1)").text().replace("Balance History ","Create Time-off")),$(".jsCreateTimeOffBalanceBack").hide(0),$(".jsCreateTimeOffBalanceBackAdmin").hide(0),$(".jsCreateTimeOffBalance").show(0),$(".jsCreateTimeOffBalanceAdmin").show(0),$(".jsCreateTimeOffBTN").show(0),n=e;const o=await new Promise((e=>{$.post(handlerURL,{action:"get_employee_policies_with_approvers",companyId:companyId,employerId:employerId,employeeId:a},(t=>{e(t)}))})),s=o.Data.Policies;if($(`#${t}`).find(".csModalBody .alert").remove(),0===s.length)return $(".jsAddTimeOff").remove(),$(`#${t}`).find(".csModalBody").append('<div class="alert alert-success text-center">We are unable to find policies against this employee.</div>'),void ml(!1,e);let d=s.length,c=0,f={};if(window.timeoff.cPolicies=s,s.map((e=>{""==e.Reason?(void 0===f[e.Category]&&(f[e.Category]=[]),f[e.Category].push(e)):c++})),d==c)return $(".jsAddTimeOff").remove(),$(`#${t}`).find(".csModalBody").append('<div class="alert alert-success text-center">We are unable to find policies against this employee.</div>'),void ml(!1,e);let p='<option value="0" selected="true">[Select a policy]</option>';$.each(f,((e,t)=>{p+=`<optgroup label="${e}">`,t.map((e=>{p+=`<option value="${e.PolicyId}">${e.Title} (<strong class="text-${1==e.categoryType?"success":"danger"}">${1==e.categoryType?"Paid":"Unpaid"}</strong>)</option>`})),p+="</optgroup>"}));const u=await(y="add",new Promise((e=>{$.post(handlerURL,{action:"get_modal",companyId:companyId,employerId:employerId,employeeId:employeeId,type:y,formLMS:null!==window.location.pathname.match(/(lms)|(create_employee)|(employee_management_system)|(dashboard)/gi)?1:0},(t=>{e(t)}))})));var y;$(".jsAddTimeOff").remove(),$(`#${t}`).find(".csModalBody").append(u),$("#jsAddPolicy").html(p),$("#jsAddPolicy").select2(),0!=i&&$("#jsAddPolicy").select2("val",i),$("#jsStartDate").datepicker({format:"mm-dd-yyyy",changeYear:!0,changeMonth:!0,beforeShowDay:l,onSelect:e=>{$("#jsEndDate").datepicker("option","minDate",e),$("#asoffdate").text("AS Of  "+moment($("#jsStartDate").val(),"MM/DD/YYYY").format(timeoffDateFormat)),r(),remakeRangeRows("#jsStartDate","#jsEndDate",".jsDurationBox")}}),$("#jsEndDate").datepicker({format:"mm-dd-yyyy",changeYear:!0,changeMonth:!0,beforeShowDay:l,onSelect:e=>{remakeRangeRows("#jsStartDate","#jsEndDate",".jsDurationBox")}}),$("#js-vacation-return-date").datepicker({format:"mm-dd-yyyy",changeYear:!0,changeMonth:!0,minDate:1,beforeShowDay:l}),$("#js-bereavement-return-date").datepicker({format:"mm-dd-yyyy",changeYear:!0,changeMonth:!0,minDate:1,beforeShowDay:l}),$("#js-compensatory-return-date").datepicker({format:"mm-dd-yyyy",changeYear:!0,changeMonth:!0,minDate:1,beforeShowDay:l}),$("#js-compensatory-start-time").datepicker({format:"g:i A",formatTime:"g:i A",step:15}),$("#js-compensatory-end-time").datepicker({format:"g:i A",formatTime:"g:i A",step:15}),null!==window.location.pathname.match(/(lms)|(employee_management_system)|(dashboard)/gi)?($("#jsComment").parent().hide(),$(".jsEmailBoxAdd").hide(),$("#jsStatus").html('<option value="pending">Pending</option>').parent().hide(0),$("#jsStartDate").datepicker("option","minDate",-1),$("#jsEndDate").datepicker("option","minDate",-1)):$("#jsStatus").select2({minimumResultsForSearch:5}),CKEDITOR.config.toolbar=[["Bold","Italic","Underline"]],$("#jsReason").length>0&&CKEDITOR.replace("jsReason"),$("#jsComment").length>0&&CKEDITOR.replace("jsComment"),window.timeoff.companyEmployees.map((function(e){if(e.user_id==a){var t=null==e.joined_at?e.joined_at:e.registration_date;t=moment(t,"YYYY-MM-DD").format(timeoffDateFormat),$("#jsEmployeeInfoAdd").html(`\n                <figure>\n                    <img src="${getImageURL(e.image)}"\n                        class="csRadius50">\n                    <div class="csTextBox">\n                        <p>${e.first_name} ${e.last_name}</p>\n                        <p class="csTextSmall"> ${remakeEmployeeName(e,!1)}</p>\n                        <p class="csTextSmall">${e.email}</p>\n                        <p class="csTextSmall">${e.anniversary_text}</p>\n                    </div>\n                </figure>\n                <div class="clearfix"></div>\n                `)}})),r(),function(e){if(0===e.length)return void $("#jsApproversListingAdd").html("<p>No approvers found.</p>");let t="",a="";e.map((e=>{let o=`${remakeEmployeeName(e)}`;t+=`\n                <div class="csApproverBox" title="Approver" data-content="${o}">\n                    <img src="${null==e.profile_picture||""==e.profile_picture?awsURL+"test_file_01.png":awsURL+e.profile_picture}" />\n                </div>\n            `,a+=`\n                <div class="csApproverBox">\n                    <div class="employee-info">            \n                        <figure>                \n                            <img src="${null==e.profile_picture||""==e.profile_picture?awsURL+"test_file_01.png":awsURL+e.profile_picture}" />          \n                        </figure>            \n                        <div class="text">                \n                            <h4>${o}</h4>                \n                            <p><a href="http://automotohr.local/employee_profile/${e.userId}" target="_blank">Id: ${getEmployeeId(e.userId,e.employee_number)}</a></p>            \n                        </div>        \n                    </div>\n                </div>\n            `})),$("#jsApproversListingMobileAdd").html(a),$("#jsApproversListingAdd").html(t),$(".csApproverBox").popover({html:!0,trigger:"hover",placement:"top"})}(o.Data.Approvers),$(".jsCreateTimeOffBTN").removeClass("dn"),loadTitles(),setUpcomingTimeOffs(a),ml(!1,e)}$(document).on("click",".jsCreateTimeOffBTN",(function(e){e.preventDefault();let t=function(e){if(0===window.timeoff.cPolicies.length)return[];let t=[];return window.timeoff.cPolicies.map((a=>{a.PolicyId==e&&(t=a)})),t}(getField("#jsAddPolicy"));if(0==t.length)return void alertify.alert("WARNING!","You don't have any policies. Please select a different date.",(()=>{}));if(s.policyId=getField("#jsAddPolicy"),s.startDate=getField("#jsStartDate"),s.endDate=getField("#jsEndDate"),s.status=getField("#jsStatus"),s.reason=CKEDITOR.instances.jsReason.getData(),s.comment=CKEDITOR.instances.jsComment.getData(),s.sendEmailNotification=getField(".js-send-email:checked"),s.dateRows=getRequestedDays(".jsDurationBox"),0==s.policyId)return void alertify.alert("WARNING!","Please select a policy.",(()=>{}));if(0==s.startDate)return void alertify.alert("WARNING!","Please select the start date.",(()=>{}));if(0==s.endDate)return void alertify.alert("WARNING!","Please select an end date.",(()=>{}));if(null===window.location.pathname.match(/(lms)|(employee_management_system)|(dashboard)/gi)&&"pending"==s.status)return void alertify.alert("WARNING!","Please, either select approve or reject.",(()=>{}));if(s.dateRows.error)return;let o=getPolicy(s.policyId,window.timeoff.cPolicies);if(0==o.IsUnlimited){if(o.RemainingTimeWithNegative.M.minutes<=0)return void alertify.alert("WARNING!","You don't have any time left against this policy.",(()=>{}));if(s.dateRows.totalTime>o.RemainingTimeWithNegative.M.minutes)return void alertify.alert("WARNING!",`Requested time-off can not be greater than the allowed time i.e. "${o.RemainingTimeWithNegative.text}"`,(()=>{}))}s.fromAdmin=1,null!==window.location.pathname.match(/(lms)|(dashboard)/gi)&&(s.fromAdmin=0),$.post(handlerURL,Object.assign({action:"check_timeoff_request",companyId:companyId,employerId:employerId,employeeId:a},s),(e=>{if(1==e.Response.code&&d(s),2==e.Response.code){if("approved"==e.Response.conflictStatus)return void alertify.alert("Conflict!",e.Response.message,(()=>{}));alertify.confirm(e.Response.message,(()=>{d(s)}),(()=>{})).set("labels",{ok:"Yes",cancel:"NO"}).set("title","Conflict!")}}))})),$(document).on("click",".jsCreateRequest",(function(n){if(n.preventDefault(),timeRowsOBJ={},i=0,void 0!==$(this).prop("id")&&""!=$(this).prop("id"))return void async function(){const e=await m();if(!0===e.Redirect)return void alertify.alert("WARNING!","Your session expired. Please, re-login to continue.",(()=>{window.location.reload()}));if(0==e.Status||0==e.Data.length)return void alertify.alert("WARNING!","We are unable to find any active employees.",(()=>{}));let t='<option value="0">Please select an employee</option>';window.timeoff.companyEmployees=e.Data,e.Data.map((e=>{"1"!==e.terminated_status&&"0"!==e.active&&(t+=`<option value="${e.user_id}">${remakeEmployeeName(e)}</option>`)})),Modal({Id:"addAdminModal",Title:"Create a time-off",Body:`\n                <div class="col-sm-6">\n                <label>Select an employee <span class="cs-required">*</span></label>\n                <select id="jsAddAdminModalList">${t}</select>\n                </div>\n                <div class="col-sm-12">\n                    <hr />\n                </div>\n                <div class="clearfix"></div>\n            `,Buttons:['<button class="btn btn-orange btn-theme jsCreateTimeOffBalanceAdmin" style="margin-right: 10px;" title="See employee balance" placement="left"><i class="fa fa-balance-scale" aria-hidden="true"></i>&nbsp;View Balance History</button>','<button class="btn btn-black jsCreateTimeOffBalanceBackAdmin dn" style="margin-right: 10px;" ><i class="fa fa-long-arrow-left" aria-hidden="true"></i>&nbsp;Back To Create</button>','<button class="btn btn-orange btn-theme jsCreateTimeOffBTN"><i class="fa fa-plus-circle" aria-hidden="true"></i>&nbsp;Create</button>'],Loader:"addAdminModalLoader",Ask:!1},(async()=>{$("#jsAddAdminModalList").select2({templateSelection:t=>{if($(".jsAddTimeOff").remove(),$(".jsCreateTimeOffBTN").addClass("dn"),0==t.id)return t.text;const i=getUserById(t.id,e.Data,"user_id");return a=i.user_id,o=`${i.first_name} ${i.last_name}`,ml(!0,"addAdminModalLoader"),c("addAdminModalLoader","addAdminModal"),$(`<span><img  style="padding: 5px; margin-left: 5px;" src="${""==i.image||null==i.image?awsURL+"test_file_01.png":awsURL+i.image}" width="60px" /> <span>${t.text}</span></span>`)}}),ml(!1,"addAdminModalLoader")}))}();let s=0,d="";null!==window.location.pathname.match("/create_employee/")?(s=window.location.pathname.split("/")[3],d=o):void 0!==$(this).data("id")?(a=e,o=t,s=a,d=o):(s=$(this).closest(".jsBox").data("id"),d=$(this).closest(".jsBox").data("name")),a=s,o=d,void 0!==$(this).data("policyid")&&(i=$(this).data("policyid")),Modal({Id:"addModal",Title:`Create Time-off for ${o}`,Body:"",Buttons:['<button class="btn btn-orange btn-theme jsCreateTimeOffBalance" style="margin-right: 10px;" title="See employee balance" placement="left"><i class="fa fa-balance-scale" aria-hidden="true"></i>&nbsp;View Balance History</button>','<button class="btn btn-black jsCreateTimeOffBalanceBack dn" style="margin-right: 10px;" ><i class="fa fa-long-arrow-left" aria-hidden="true"></i>&nbsp;Back To Create</button>','<button class="btn btn-orange btn-theme jsCreateTimeOffBTN"><i class="fa fa-plus-circle" aria-hidden="true"></i>&nbsp;Create</button>'],Loader:"addModalLoader",Ask:!1},(async()=>{c("addModalLoader","addModal")}))})),$(document).on("click",".jsCreateTimeOffBalance",(function(e){e.preventDefault(),null!=a?($(this).hide(0),$(".jsCreateTimeOffBalanceBack").show(0),$(".jsCreateTimeOffBTN").hide(0),$("#addModal").find('[data-page="main"]').hide(0),$("#addModal").find('[data-page="balance-view"]').show(0),$("#addModal").find(".csModalHeaderTitle span:nth-child(1)").text($("#addModal").find(".csModalHeaderTitle span:nth-child(1)").text().trim().replace("Create Time-off","Balance History ")),$.post(handlerURL,{action:"get_employee_balance_history",companyId:companyId,employerId:employerId,employeeId:a}).done((function(e){var t="";if(0===e.Data.length)t+="<tr>",t+='   <td colspan="6">',t+='       <p class="alert alert-info text-center">',t+="          No balance history found.",t+="       </p>",t+="   </td>",t+="</tr>";else{var a=0,o={},i={};void 0!==e.Data[0].timeoff_breakdown.active.hour&&(o.hour=0,i.hour=0),void 0!==e.Data[0].timeoff_breakdown.active.minutes&&(o.minutes=0,i.minutes=0),e.Data.map((function(e){var n="",s="",d="",r="";0==e.is_manual&&1==e.is_allowed?(n=moment(e.effective_at,"YYYY-MM-DD").format(timeoffDateFormat),s="",d="-",r=""):1==e.is_manual?(n=moment(e.effective_at,"YYYY-MM-DD").format(timeoffDateFormat),s=moment(e.effective_at,"YYYY-MM-DD").format(timeoffDateFormat),d=e.first_name+" "+e.last_name,r=remakeEmployeeName(e,!1),void 0!==e.timeoff_breakdown.active.hours&&(void 0===i.hours&&(i.hours=0),i.hours+=parseInt(e.timeoff_breakdown.active.hours)),void 0!==e.timeoff_breakdown.active.minutes&&(void 0===i.minutes&&(i.minutes=0),i.minutes+=parseInt(e.timeoff_breakdown.active.minutes))):(a++,n=moment(e.request_from_date,"YYYY-MM-DD").format(timeoffDateFormat),s=moment(e.request_to_date,"YYYY-MM-DD").format(timeoffDateFormat),d=e.approverName,r=e.approverRole,void 0!==e.timeoff_breakdown.active.hours&&(void 0===o.hours&&(o.hours=0),o.hours+=parseInt(e.timeoff_breakdown.active.hours)),void 0!==e.timeoff_breakdown.active.minutes&&(void 0===o.minutes&&(o.minutes=0),o.minutes+=parseInt(e.timeoff_breakdown.active.minutes))),t+="<tr>",t+="   <td>",t+="       <strong>",t+=d+"<br>",t+="       </strong>",t+=r,t+="   </td>",t+="   <td>",t+="       <strong>"+e.title+"</strong>",t+="       <p>"+n+(""!=s?" - "+s:"")+"</p>",t+="   </td>",t+=' <td class="'+(0==e.is_added?"text-danger":"text-success")+'"><i class="fa fa-arrow-'+(0==e.is_added?"down ":"up")+'"></i>&nbsp;'+e.timeoff_breakdown.text+"</td>",t+="   <td>",t+=""!=e.note?e.note:"-",t+="   </td>",t+="   <td>",t+=moment(e.created_at,"YYYY-MM-DD").format(timeoffDateFormatWithTime),t+="   </td>",t+="   <td>",t+='       <strong class="text-'+(1==e.is_manual?"success":"danger")+'">'+(1==e.is_manual?"Yes":"No")+"</strong>",t+="   </td>",t+="</tr>",t+="<tr>",t+='   <td colspan="6">',0==e.is_manual&&1==e.is_allowed?t+="       <p><strong>Note</strong>: A balance of <b>"+e.added_time/60+'</b> hours is available against policy <b>"'+e.title+'"</b> effective from <b>'+moment(e.effective_at,"YYYY-MM-DD").format(timeoffDateFormat)+"</b>":t+="       <p><strong>Note</strong>: <strong>"+d+"</strong> has "+(1==e.is_manual?1==e.is_added?"added balance":"subtracted balance":"approved time off")+' against policy "<strong>'+e.title+'</strong>" on <strong>'+moment(e.created_at,"YYYY-MM-DD").format(timeoffDateFormatWithTime)+"</strong> which will take effect "+(n==s?"on ":" from ")+" <strong>"+n+(n!=s?" to  "+s:"")+"</strong>.</p>",t+="   </td>",t+="</tr>"})),$(".jsCreateTimeOffNumber").text(a),$(".jsCreateTimeOffTimeTaken").text(getText(o)),$(".jsCreateTimeOffManualAllowedTime").text(getText(i))}$("#jsCreateTimeoffBalanceBody").html(t),ml(!1,"balance-view")}))):alertify.alert("Warning!","Please, select an employee.")})),$(document).on("click",".jsCreateTimeOffBalanceBack",(function(e){e.preventDefault(),$(this).hide(0),$(".jsCreateTimeOffBalance").show(0),$(".jsCreateTimeOffBTN").show(0),$("#addModal").find('[data-page="balance-view"]').hide(0),$("#addModal").find('[data-page="main"]').show(0),$("#addModal").find(".csModalHeaderTitle span:nth-child(1)").text($("#addModal").find(".csModalHeaderTitle span:nth-child(1)").text().trim().replace("Balance History ","Create Time-off"))})),$(document).on("click",".jsCreateTimeOffBalanceAdmin",(function(e){e.preventDefault(),null!=a?($(this).hide(0),$(".jsCreateTimeOffBalanceBackAdmin").show(0),$(".jsCreateTimeOffBTN").hide(0),$("#addAdminModal").find('[data-page="main"]').hide(0),$("#addAdminModal").find('[data-page="balance-view"]').show(0),$("#addAdminModal").find(".csModalHeaderTitle span:nth-child(1)").text($("#addAdminModal").find(".csModalHeaderTitle span:nth-child(1)").text().trim().replace("Create a time-off","Balance History")),$.post(handlerURL,{action:"get_employee_balance_history",companyId:companyId,employerId:employerId,employeeId:a}).done((function(e){var t="";if(0===e.Data.length)t+="<tr>",t+='   <td colspan="6">',t+='       <p class="alert alert-info text-center">',t+="          No balance history found.",t+="       </p>",t+="   </td>",t+="</tr>";else{var a=0,o={},i={};void 0!==e.Data[0].timeoff_breakdown.active.hour&&(o.hour=0,i.hour=0),void 0!==e.Data[0].timeoff_breakdown.active.minutes&&(o.minutes=0,i.minutes=0),e.Data.map((function(e){var n="",s="",d="",r="";0==e.is_manual&&1==e.is_allowed?(n=moment(e.effective_at,"YYYY-MM-DD").format(timeoffDateFormat),s="",d="-",r=""):1==e.is_manual?(n=moment(e.effective_at,"YYYY-MM-DD").format(timeoffDateFormat),s=moment(e.effective_at,"YYYY-MM-DD").format(timeoffDateFormat),d=e.first_name+" "+e.last_name,r=remakeEmployeeName(e,!1),void 0!==e.timeoff_breakdown.active.hours&&(void 0===i.hours&&(i.hours=0),i.hours+=parseInt(e.timeoff_breakdown.active.hours)),void 0!==e.timeoff_breakdown.active.minutes&&(void 0===i.minutes&&(i.minutes=0),i.minutes+=parseInt(e.timeoff_breakdown.active.minutes))):(a++,n=moment(e.request_from_date,"YYYY-MM-DD").format(timeoffDateFormat),s=moment(e.request_to_date,"YYYY-MM-DD").format(timeoffDateFormat),d=e.approverName,r=e.approverRole,void 0!==e.timeoff_breakdown.active.hours&&(void 0===o.hours&&(o.hours=0),o.hours+=parseInt(e.timeoff_breakdown.active.hours)),void 0!==e.timeoff_breakdown.active.minutes&&(void 0===o.minutes&&(o.minutes=0),o.minutes+=parseInt(e.timeoff_breakdown.active.minutes))),t+="<tr>",t+="   <td>",t+="       <strong>",t+=d+"<br>",t+="       </strong>",t+=r,t+="   </td>",t+="   <td>",t+="       <strong>"+e.title+"</strong>",t+="       <p>"+n+(""!=s?" - "+s:"")+"</p>",t+="   </td>",t+=' <td class="'+(0==e.is_added?"text-danger":"text-success")+'"><i class="fa fa-arrow-'+(0==e.is_added?"down ":"up")+'"></i>&nbsp;'+e.timeoff_breakdown.text+"</td>",t+="   <td>",t+=""!=e.note?e.note:"-",t+="   </td>",t+="   <td>",t+=moment(e.created_at,"YYYY-MM-DD").format(timeoffDateFormatWithTime),t+="   </td>",t+="   <td>",t+='       <strong class="text-'+(1==e.is_manual?"success":"danger")+'">'+(1==e.is_manual?"Yes":"No")+"</strong>",t+="   </td>",t+="</tr>",t+="<tr>",t+='   <td colspan="6">',0==e.is_manual&&1==e.is_allowed?t+="       <p><strong>Note</strong>: A balance of <b>"+e.added_time/60+'</b> hours is available against policy <b>"'+e.title+'"</b> effective from <b>'+moment(e.effective_at,"YYYY-MM-DD").format(timeoffDateFormat)+"</b>":t+="       <p><strong>Note</strong>: <strong>"+d+"</strong> has "+(1==e.is_manual?1==e.is_added?"added balance":"subtracted balance":"approved time off")+' against policy "<strong>'+e.title+'</strong>" on <strong>'+moment(e.created_at,"YYYY-MM-DD").format(timeoffDateFormatWithTime)+"</strong> which will take effect "+(n==s?"on ":" from ")+" <strong>"+n+(n!=s?" to  "+s:"")+"</strong>.</p>",t+="   </td>",t+="</tr>"})),$(".jsCreateTimeOffNumber").text(a),$(".jsCreateTimeOffTimeTaken").text(getText(o)),$(".jsCreateTimeOffManualAllowedTime").text(getText(i))}$("#jsCreateTimeoffBalanceBody").html(t),ml(!1,"balance-view")}))):alertify.alert("Warning!","Please, select an employee.")})),$(document).on("click",".jsCreateTimeOffBalanceBackAdmin",(function(e){e.preventDefault(),$(this).hide(0),$(".jsCreateTimeOffBalanceAdmin").show(0),$(".jsCreateTimeOffBTN").show(0),$("#addAdminModal").find('[data-page="balance-view"]').hide(0),$("#addAdminModal").find('[data-page="main"]').show(0),$("#addAdminModal").find(".csModalHeaderTitle span:nth-child(1)").text($("#addAdminModal").find(".csModalHeaderTitle span:nth-child(1)").text().trim().replace("Balance History","Create a time-off"))})),$(document).on("change","#jsAddPolicy",(function(){if(null!==$(this).val()){var e=getPolicy($(this).val(),window.timeoff.cPolicies);null==e.OffDays?policyOffDays=void 0:policyOffDays=e.OffDays.split(",")}else policyOffDays=void 0}))}));