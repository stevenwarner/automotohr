let cmnOBJ={Employees:{Main:{action:"get_company_employees",companyId:companyId,employerId:employerId,employeeId:employeeId,public:0}},Policies:{Main:{action:"get_policy_list_by_company",companyId:companyId,employerId:employerId,employeeId:employeeId,public:0}}};function fetchEmployees(){$.post(handlerURL,cmnOBJ.Employees.Main,(function(e){if(!0===e.Redirect)return void alertify.alert("WARNING!","Your session expired. Please, re-login to continue.",(()=>{window.location.reload()}));if(!1===e.Status)return void(window.timeoff.employees=[]);window.timeoff.employees=e.Data;let t="";t+='<option value="all">All</option>',window.timeoff.employees.map((function(e){let o="";"1"===e.terminated_status?o=" - Terminated":"0"===e.active&&(o=" - Deactivated"),t+='<option value="'+e.user_id+'">'+remakeEmployeeName(e)+o+"</option>"})),$("#js-employee-add").html(t),$("#js-employee-add").select2(),$("#js-employee-add").select2MultiCheckboxes({templateSelection:function(e,t){return t--,"Selected "+(-1!==$.inArray("all",$("#js-employee-add").val())?t:e.length)+" of "+t}}),$("#js-employee-edit").html(t),$("#js-employee-reset").html(t),$("#js-filter-employee").html(t),$("#js-filter-employee").select2()}))}function fetchPolicies(){$.post(handlerURL,cmnOBJ.Policies.Main,(function(e){if(!0===e.Redirect)return void alertify.alert("WARNING!","Your session expired. Please, re-login to continue.",(()=>{window.location.reload()}));if(!1===e.Status)return;let t="";t+='<option value="all">All</option>',e.Data.map((function(e){t+=`<option value="${e.policy_id}">${e.policy_title}</option>`})),$("#js-filter-policies").html(t),$("#js-filter-policies").select2()}))}function fetchHolidays(){$.post(handlerURL,{action:"get_company_all_holidays",companyId:companyId,employerId:employerId,employeeId:employeeId},(function(e){!1!==e.Status&&(window.timeoff.holidays=e.Data)}))}function getUserById(e,t){let o=[];return $.each(t,((t,i)=>{i.user_id==e&&(o=i)})),o}function getHolidayText(e){var t=moment(e.from_date,"YYYY-MM-DD");return moment(e.to_date,"YYYY-MM-DD").diff(t,"days")>=2?moment(e.from_date,"YYYY-MM-DD").format("MMMM, D")+" - "+moment(e.to_date,"YYYY-MM-DD").format("MMMM, D"):moment(e.from_date,"YYYY-MM-DD").format("MMMM, D")}function getApproverLisiting(e){if(0==e.length)return"";let t="",o=[];return e.map((e=>{if("create"==e.action)return"";if("{}"==e.note)return"";let i=JSON.parse(e.note);if(null==i.canApprove)return"";let a=`${remakeEmployeeName(e)}`,n="";return"pending"==i.status?"":("approved"==i.status?(a+=` has approved the time-off at ${moment(e.created_at).format(timeoffDateFormatWithTime)}`,n='<i class="fa fa-check-circle text-success"></i>'):"rejected"==i.status&&(a+=` has rejected the time-off at ${moment(e.created_at).format(timeoffDateFormatWithTime)}`,n='<i class="fa fa-times-circle text-danger"></i>'),-1!==$.inArray(e.userId,o)?"":(o.push(e.userId),void(t+=`\n            <div class="csApproverBox" title="Approver" data-content="${a}">\n                <img src="${null==e.image||""==e.image?awsURL+"test_file_01.png":awsURL+e.image}" style="width: 40px; height: 40px;" />\n                ${n}\n            </div>\n        `)))})),t}function getApproverComments(e){if(0==e.length)return"";let t="";return e.map((e=>{if("create"==e.action)return"";if("{}"==e.note)return"";let o=JSON.parse(e.note);if(null==o.canApprove)return"";let i="";if("pending"==o.status)return"";i+='        <div class="employee-info" style="padding: 7px">',i+="            <figure>",i+=`                <img src="${getImageURL(e.image)}" class="img-circle emp-image" />`,i+="            </figure>",i+='            <div class="text">',i+=`            <p>\n                                <span>${o.comment}</span><br />\n                                <span style="font-size: 11px;">${moment(e.created_at).format(timeoffDateFormatWithTime)}</span></p>`,i+="            </div>",i+="        </div>",i+='      </div><div class="csSeprator"></div>',t+=i})),t}fetchEmployees(),fetchPolicies(),fetchHolidays();