function getTypeNames(e){if(0==e.length)return"Not Assigned";if(0==window.timeoff.categories.length)return"Not Assigned";let t="";return window.timeoff.categories.map(function(a){a.type_id==e&&(t=a.type_name+", ")}),t.substring(0,t.length-2)}function fetchCategories(){$.post(handlerURL,cmnOBJ.Categories.Main,function(e){if(!0===e.Redirect)return void alertify.alert("WARNING!","Your session expired. Please, re-login to continue.",()=>{window.location.reload()});if(!1===e.Status)return alertify.alert("Warning!","No policy types found. Please, add a type before creating policies.",function(){$('.jsIPLoader[data-page="policy"]').hide(0)});window.timeoff.categories=e.Data;let t="";t+='<option value="0" selected="true">[Please select a policy type]</option>',window.timeoff.categories.map(function(e){t+=`<option value="${e.type_id}">${e.type_name}</option>`}),$("#js-category-add, #js-category-edit, #js-category-reset").html(t)})}function fetchEmployees(){$.post(handlerURL,cmnOBJ.Employees.Main,function(e){if(!0===e.Redirect)return void alertify.alert("WARNING!","Your session expired. Please, re-login to continue.",()=>{window.location.reload()});!1===e.Status&&(console.log("Failed to load employees."),e.Data=[]),window.timeoff.employees=e.Data;let t="";t+='<option value="all">All</option>',window.timeoff.employees.map(function(e){t+='<option value="'+e.user_id+'">'+remakeEmployeeName(e)+"</option>"}),$("#js-employee-add").html(t),$("#js-employee-add").select2(),$("#js-employee-add").select2MultiCheckboxes({templateSelection:function(e,t){return t--,"Selected "+(-1!==$.inArray("all",$("#js-employee-add").val())?t:e.length)+" of "+t}}),$("#js-approvers-list-add").html(t),$("#js-approvers-list-add").select2(),$("#js-approvers-list-add").select2MultiCheckboxes({templateSelection:function(e,t){return t--,"Selected "+(-1!==$.inArray("all",$("#js-approvers-list-add").val())?t:e.length)+" of "+t}}),$("#js-approvers-list-edit").html(t),$("#js-approvers-list-edit").select2(),$("#js-approvers-list-edit").select2MultiCheckboxes({templateSelection:function(e,t){return t--,"Selected "+(-1!==$.inArray("all",$("#js-approvers-list-edit").val())?t:e.length)+" of "+t}}),$("#js-employee-edit").html(t),$("#js-employee-reset").html(t),$("#js-filter-employee").html(t),$("#js-filter-employee").select2()})}function fetchPolicies(){$.post(handlerURL,cmnOBJ.Policies.Main,function(e){if(!0===e.Redirect)return void alertify.alert("WARNING!","Your session expired. Please, re-login to continue.",()=>{window.location.reload()});if(!1===e.Status)return void console.log("Failed to load employees.");let t="";t+='<option value="all">All</option>',e.Data.map(function(e){t+=`<option value="${e.policy_id}">${e.policy_title} (${1==e.category_type?"Paid":"Unpaid"}) </option>`}),$("#js-filter-policies").html(t),$("#js-filter-policies").select2()})}function getAccrualText(e,t){let a=null==e.method?"days_per_year":e.method,o=null===e.frequency?"none":e.frequency,s=null==e.time?"none":e.time,r=null==e.rate?0:e.rate,l=e.rateType,c=e.frequencyVal,i=void 0===t?"The entitled employee(s) will have {{accrue}} that can be accrued from {{time}}.":"The entitled employee(s) (on probation) will have {{accrue}} that can be accrued from {{time}}.",p="",n={days:{none:"Jan to Dec",start_of_period:"Jan to June",end_of_period:"July to Dec"},time:{none:"1st to 30th",start_of_period:"1st to 15th",end_of_period:"16th to 30th"}};if(void 0!==t&&(r=e.newHireRate,null!=r&&0!=r||(r=e.rate)),s="none"==o?n.days[s]:n.time[s],0==r)return p=' "Unlimited" days per year',i.replace(/{{accrue}}/g,p).replace(/{{time}}/g,s);if("hours_per_month"==a&&"none"==o)return p=` ${r} hour${r>1?"s":""} per year`,duration=` ${s}.`,i.replace(/{{accrue}}/g,p).replace(/{{time}}/g,s);if("hours_per_month"==a&&"yearly"==o){let e=("total_hours"==l?r/12:12*r).toFixed(2);return p="total_hours"==l?` ${r} hour${r>1?"s":""} per year with an accrue rate of ${e} hour${e>1?"s":""} per month`:` ${e} hour${e>1?"s":""} per year with an accrue rate of ${r} hour${r>1?"s":""} per month`,s=`${s} of each month`,i.replace(/{{accrue}}/g,p).replace(/{{time}}/g,s)}if("hours_per_month"==a&&"monthly"==o){let e=r;return p=` ${e} hour${e>1?"s":""} each month`,duration=` ${s}.`,i.replace(/{{accrue}}/g,p).replace(/{{time}}/g,s)}if("hours_per_month"==a&&"custom"==o){let e=12/c,t=r/e;return t=t.toFixed(2),p=` ${t} hour${t>1?"s":""} every ${c} month${c>1?"s":""}`,duration=` ${s}.`,i.replace(/{{accrue}}/g,p).replace(/{{time}}/g,s)}return"-"}function setAccrualText(){let e="hours_per_month",t=$(`#js-accrual-frequency-${page}`).val(),a=$(`#js-accrual-time-${page} option:selected`).text(),o=""==$(`#js-accrual-rate-${page}`).val()?0:$(`#js-accrual-rate-${page}`).val(),s=$(`#js-accrual-rate-type-${page} option:selected`).val(),r=$(`#js-accrual-frequency-val-${page}`).val(),l="The entitled employee(s) will have {{accrue}} that can be accrued from {{time}}.",c="";if($(`.js-plan-btn-${page}`).prop("disabled",!1),$(`#js-accrual-time-text-${page}`).html("<i>The accrual time can't be set for unlimited policies.</i>"),$(`#js-accrual-time-text-${page}`).hide(),$(`#js-accrual-time-${page}`).prop("disabled",!1),$(`#js-accrual-frequency-${page}`).prop("disabled",!1),$(`.js-policy-reset-date-${page}`).prop("disabled",!1),$(`#js-accrual-rate-type-${page}`).html('<option value="total_hours">Total Hour(s)</option><option value="hours">Hour(s)</option>'),$(`.jsTimeTypeSelect-${page}`).find("option").remove(),$(`.jsTimeType-${page}`).text("Hour(s)"),$(`.jsTimeTypeSelect-${page}`).append(`\n        <option value="total_hours" ${null==s||"total_hours"==s?'selected="true"':""}>Total Hour(s)</option>\n        <option value="hours_per_month" ${"hours_per_month"==s?'selected="true"':""}>Hour(s) /month</option>\n    `),a=$(`#js-accrual-time-${page} option:selected`).text(),"hours_per_month"==e&&0!=o&&"none"==t&&($(`.jsTimeTypeSelect-${page} option[value="total_hours"]`).prop("checked",!0),$(`.jsTimeTypeSelect-${page} option[value="hours_per_month"]`).remove(),c=` ${o} hour${o>1?"s":""} per year `,l=l.replace(/{{accrue}}/g,c).replace(/{{time}}/g,a)),"hours_per_month"==e&&0!=o&&"yearly"==t){let e=("total_hours"==s?o/12:12*o).toFixed(2);e=e,c="total_hours"==s?` ${o} hour${o>1?"s":""} per year with an accrue rate of ${e} hour${e>1?"s":""} per month`:` ${e} hour${e>1?"s":""} per year with an accrue rate of ${o} hour${o>1?"s":""} per month`,duration=` ${a}.`,l=l.replace(/{{accrue}}/g,c).replace(/{{time}}/g,a)}if("hours_per_month"==e&&0!=o&&"monthly"==t){$(`.jsTimeTypeSelect-${page} option[value="total_hours"]`).prop("checked",!0),$(`.jsTimeTypeSelect-${page} option[value="hours_per_month"]`).remove();let e=o;c=` ${e} hour${e>1?"s":""} each month`,l=l.replace(/{{accrue}}/g,c).replace(/{{time}}/g,a)}if("hours_per_month"==e&&0!=o&&"custom"==t){$(`.jsTimeTypeSelect-${page} option[value="total_hours"]`).prop("checked",!0),$(`.jsTimeTypeSelect-${page} option[value="hours_per_month"]`).remove();let e=12/r,t=o/e;t=t.toFixed(2),c=` ${t} hour${t>1?"s":""} every ${r} month${r>1?"s":""}`,l=l.replace(/{{accrue}}/g,c).replace(/{{time}}/g,"").replace(/that can be accrued from/g,""),$(`#js-accrual-time-${page}`).prop("disabled",!0),$(`#js-accrual-time-text-${page}`).html("<i>The accrual time can't be set for custom frequency.</i>"),$(`#js-accrual-time-text-${page}`).show()}"unlimited"!=e&&0!=o||(c=` "Unlimited" ${"hours_per_month"==e?"hours per month":"days per year"}`,l=l.replace(/{{accrue}}/g,c).replace(/{{time}}/g,"").replace(/ that can be accrued from/g,""),$(`#js-accrual-time-text-${page}`).show(),$(`#js-accrual-time-${page}`).prop("disabled",!0),$(`#js-accrual-frequency-${page}`).prop("disabled",!0),$(`.js-plan-btn-${page}`).prop("disabled",!0),$(`.js-plan-area-${page}`).html("")),null===l.match("{{")?$(`#jsFormula-${page}`).text(l):$(`#jsFormula-${page}`).text("")}function setNewHireAccrual(e){"object"==typeof e&&(e=void 0),e=void 0===e?page:e;let t=$(`#js-accrue-new-hire-${e}`).val().trim(),a=$(`#js-newhire-prorate-${e}`).val().trim(),o=$(`#js-accrual-new-hire-time-type-${e} option:selected`).val(),s=$(`.js-newhire-text-${e}`),r="";"add"==e&&(o=$("#js-accrual-new-hire-time-type option:selected").val()),(""==t||t<0||null!==t.match(/[^0-9]/))&&(t=0),(""==a||a<0||null!==a.match(/[^0-9]/))&&(a=0),"per_month"==o?r=`The employees that are working ${t} hour${1==t?"":"s"} per month will be considered as permanent.`:"per_week"==o?r=`The employees that are working ${t} hour${1==t?"":"s"} per week will be considered as permanent.`:"months"==o?r=`The employees that have worked for ${t} month${1==t?"":"s"} will be considered as permanent.`:"days"==o?r=`The employees that have worked for ${t} day${1==t?"":"s"} will be considered as permanent.`:"hours"==o&&(r=`The employees that have worked for ${t} hour${1==t?"":"s"} will be considered as permanent.`),r+=`The employees that are on probation can use ${0==a?"0":a} ${null!==$(`.jsTimeType-${e}`).text().match(/hour/gi)?"hour":"day"}${1==a?"":"s"}.`,s.html(r)}function loadAccrualPlans(e,t){e=void 0===e?"add":e;var a="",o="hours(s)";if(void 0!==t&&0!==t.length)return void 0!==t[0]&&t.map(function(t){a+='<div class="js-plan-row-'+e+'" style="padding: 20px 0 10px;">',a+="    <span>Allow</span>",a+='    <div class="form-group form-group-custom form-group-custom-settings csIn50">',a+='        <input class="form-control form-control-custom js-pt js-plan-type-'+e+'" value="'+t.accrualRate+'" />',a+='    </div><span> extra <span class="js-plan-type">'+o+"</span> after </span>",a+='    <div class="form-group form-group-custom form-group-custom-settings csIn50">',a+='        <input class="form-control form-control-custom js-py js-plan-year-'+e+'" value="'+t.accrualType+'" />',a+="    </div>",a+='    <div class="form-group form-group-custom form-group-custom-settings csIn50 csW100">',a+='        <select class="form-control form-control-custom js-pyt js-plan-duration-'+e+'"><option value="months" '+("months"==t.accrualTypeM?'selected="true"':"")+'>Month(s)</option><option value="years" '+("years"==t.accrualTypeM?'selected="true"':"")+">Year(s)</option></select>",a+="    </div>",a+='    <span class="label label-danger js-plan-remove-btn" title="Remove the accrual plan" placement="top"><i class="fa fa-close"></i></span>',a+="</div>"}),void $("#js-plan-area-"+e).html(a);void 0===t&&(a+='<div class="js-plan-row-'+e+'" style="padding: 20px 0 10px;">',a+="    <span>Allow</span>",a+='    <div class="form-group form-group-custom form-group-custom-settings csIn50">',a+='        <input class="form-control form-control-custom js-pt js-plan-type-'+e+'" />',a+='    </div><span> extra <span class="js-plan-type">'+o+"</span> after </span>",a+='    <div class="form-group form-group-custom form-group-custom-settings csIn50">',a+='        <input class="form-control form-control-custom js-py js-plan-year-'+e+'" />',a+="    </div>",a+='    <div class="form-group form-group-custom form-group-custom-settings csIn50 csW100">',a+='        <select class="form-control form-control-custom  js-pyt js-plan-duration-'+e+'"><option value="months">Month(s)</option><option value="years" selected="true">Year(s)</option></select>',a+="    </div>",a+='    <span class="label label-danger js-plan-remove-btn" title="Remove the accrual plan" placement="top"><i class="fa fa-close"></i></span>',a+="</div>",$("#js-plan-area-"+e).append(a))}function makePlanRow(e,t){var a=getPlanFromArray(e);if(0!=a.length){var o="",s=formatMinutes(a.format,a.default_timeslot,a.allowed_timeoff,!1,!0),r=a.format.split(":");o+='<li data-id="'+a.plan_id+'" data-timeslot="'+a.default_timeslot+'" data-format="'+a.format+'" class="js-plan-row-'+t+'">',o+='    <div class="timeline-content margin-right">',o+='        <h4 class="timeline-field-title">'+getPlanTitle(a)+' <span title="Remove Plan" class="pull-right text-danger js-remove-plan-'+t+'"><i class="fa fa-close"></i></span></h4>',o+='        <div class="row">',-1!=r.indexOf("D")&&(o+='            <div class="col-lg-6 col-sm-6 col-xs-12">',o+='                <div class="input-group pto-time-off-margin-custom">',o+='                    <input type="text" class="form-control js-days-'+t+'" value="'+s.D+'" />',o+='                    <span class="input-group-addon">Days</span>',o+="                </div>",o+="            </div>"),-1!=r.indexOf("H")&&(o+='            <div class="col-lg-6 col-sm-6 col-xs-12">',o+='                <div class="input-group pto-time-off-margin-custom">',o+='                    <input type="text" class="form-control js-hours-'+t+'" value="'+s.H+'" />',o+='                    <span class="input-group-addon">Hours</span>',o+="                </div>",o+="            </div>"),-1!=r.indexOf("M")&&(o+='            <div class="col-lg-6 col-sm-6 col-xs-12">',o+='                <div class="input-group pto-time-off-margin-custom">',o+='                    <input type="text" class="form-control js-minutes-'+t+'" value="'+s.M+'" />',o+='                    <span class="input-group-addon">Minutes</span>',o+="                </div>",o+="            </div>"),o+="        </div>",o+="    </div>",o+="</li>",$("#js-plan-area-"+t).append(o)}else alertify.alert("ERROR!","Plan with Id "+e+" not found.")}function removePlan(e,t){$('li[data-id="'+e+'"]').remove()}function isStepCompleted(e,t){return"add"==page||"add"==t?window.timeoff.stepCompletedAdd(e):"edit"==page||"edit"==t?window.timeoff.stepCompletedEdit(e):"reset"==page||"reset"==t?window.timeoff.stepCompletedReset(e):void 0}function loadTemplate(e){let t={method:"hours_per_month",time:"none",frequency:"none",frequencyMonths:0,rate:0,rateType:"hours_per_month"};10==e&&(t.method="hours_per_month",t.time="none",t.frequency="yearly",t.rate=24),11==e&&(t.method="hours_per_month",t.time="start_of_period",t.frequency="yearly",t.rate=24),12==e&&(t.method="hours_per_month",t.time="end_of_period",t.frequency="yearly",t.rate=24),13==e&&(t.method="hours_per_month",t.time="none",t.frequency="yearly",t.rate=3.33,t.rateType="hours_per_month"),14==e&&(t.method="hours_per_month",t.time="start_of_period",t.frequency="yearly",t.rate=3.33,t.rateType="hours_per_month"),15==e&&(t.method="hours_per_month",t.time="end_of_period",t.frequency="yearly",t.rate=3.33,t.rateType="hours_per_month"),16==e&&(t.method="hours_per_month",t.time="none",t.frequency="custom",t.rate=24,t.frequencyMonths=4),17==e&&(t.method="hours_per_month",t.time="start_of_period",t.frequency="custom",t.rate=24,t.frequencyMonths=4),18==e&&(t.method="hours_per_month",t.time="end_of_period",t.frequency="custom",t.rate=24,t.frequencyMonths=4),19==e&&(t.method="hours_per_month",t.time="none",t.frequency="none",t.rate=40,t.frequencyMonths=0),$(`#js-accrual-time-${page}`).select2("val",t.time),$(`#js-accrual-time-${page}`).trigger("change"),$(`#js-accrual-frequency-${page}`).select2("val",t.frequency),$(`#js-accrual-frequency-${page}`).trigger("change"),0!=t.frequencyMonths&&$(`#js-accrual-frequency-val-${page}`).val(t.frequencyMonths),0!=t.rateType&&$(`#js-accrual-rate-type-${page}`).val(t.rateType),$(`#js-accrual-rate-${page}`).val(t.rate).trigger("keyup")}function finalStep(e){return"add"==page||"add"==e?window.timeoff.finalStepCompletedAdd(getStep()):"edit"==page||"edit"==e?window.timeoff.finalStepCompletedEdit(getStep()):"reset"==page||"reset"==e?window.timeoff.finalStepCompletedReset(getStep()):void 0}function saveStep(e){return localStorage.setItem(`${page}Policy`,JSON.stringify(e))}function getStep(e){return JSON.parse(localStorage.getItem(`${page}Policy`))}function removeStep(e){return localStorage.removeItem(`${page}Policy`)}function loadAddPage(){page="add",ml(!0,"policy"),$(".js-page").fadeOut(0),$("#js-page-add").fadeIn(500),void 0!==window.timeoff.categories&&void 0!==window.timeoff.employees?($(".js-template-add").prop("checked",!1),$('.js-template-add[value="0"]').prop("checked",!0),$("#js-category-add").select2(),$("#js-category-add").select2("val",0),$("#js-policy-type-add").select2({minimumResultsForSearch:-1}),$("#js-policy-type-add").select2("val",1),$("#js-policy-title-add").val(),$("#js-sort-order-add").val(1),$("#js-employee-add").select2(),$("#js-employee-add").select2("val",0),$("#js-employee-add").select2MultiCheckboxes({templateSelection:function(e,t){return t-=1,"Selected "+(-1!==$.inArray("all",$("#js-employee-add").val())?t:e.length)+" of "+t}}),$("#js-approvers-list-add").select2(),$("#js-approvers-list-add").select2("val",0),$("#js-approvers-list-add").select2MultiCheckboxes({templateSelection:function(e,t){return t-=1,"Selected "+(-1!==$.inArray("all",$("#js-approvers-list-add").val())?t:e.length)+" of "+t}}),$("#js-employee-type-add").select2(),$("#js-employee-type-add").select2("val","all"),$("#js-off-days-add").select2({closeOnSelect:!1}),$("#js-off-days-add").select2("val",null),$("#js-approver-check-add").prop("checked",!1),$("#js-archive-check-add").prop("checked",!1),$("#js-include-check-add").prop("checked",!0),$("#js-accrual-time-add").select2({minimumResultsForSearch:-1}),$("#js-accrual-time-add").select2("val","none"),$("#js-accrual-time-add").trigger("change"),$("#js-accrual-frequency-add").select2({minimumResultsForSearch:-1}),$("#js-accrual-frequency-add").select2("val","none"),$("#js-accrual-frequency-add").trigger("change"),$("#js-accrual-frequency-val-add").val(1),$("#js-accrual-rate-add").val(0),$('#js-accrual-rate-type-add option[value="days"]').prop("selected",!0),$("#js-minimum-applicable-hours-add").val(0),$('.js-minimum-applicable-time-add[value="hours"]').prop("checked",!0).trigger("click"),$("#js-carryover-cap-check-add").select2({minimumResultsForSearch:-1}),$("#js-carryover-cap-check-add").select2("val","no"),$("#js-carryover-cap-check-add").trigger("change"),$("#js-carryover-cap-add").val(0),$("#js-accrual-balance-add").select2({minimumResultsForSearch:-1}),$("#js-accrual-balance-add").select2("val","no"),$("#js-accrual-balance-add").trigger("change"),$("#js-maximum-balance-add").val(0),$('.js-hire-date-add[value="hireDate"]').prop("checked",!0).trigger("click"),$('.js-policy-reset-date-add[value="policyDate"]').prop("checked",!0).trigger("click"),$("#js-accrue-new-hire-add").val(0),$("#js-newhire-prorate-add").val(0),$("#js-plan-box-add").show(),$("#js-plan-box-add").find("ul").html(""),$("#js-plan-area-add").html(""),$(".jsPlanArea").html(""),$("#js-accrual-default-flow-add").prop("checked",!0),$(".js-hint").hide(0),$("#js-custom-date-add").datepicker({dateFormat:"mm-dd-yy",changeYear:!0,changeMonth:!0,onSelect:e=>{e<=moment().format("MM-DD-YYYY")?$("#js-applicable-date-text-add").show():$("#js-applicable-date-text-add").hide()}}),$("#js-custom-reset-date-add").datepicker({dateFormat:"mm-dd-yy",changeYear:!0,changeMonth:!0}),$(".js-step").hide(),$('.js-step[data-step="0"]').show(),ml(!1,"policy")):setTimeout(loadAddPage,2e3)}function loadViewPage(){page="view",ml(!0,"policy"),$(".js-page").fadeOut(0),$("#js-page-view").fadeIn(500),window.timeoff.fetchCompanyPolicies()}function loadEditPage(){localStorage.clear(),page="edit",ml(!0,"policy"),$(".js-page").fadeOut(0),$("#js-page-edit").fadeIn(500),void 0!==window.timeoff.categories&&void 0!==window.timeoff.employees?($("#js-policy-type-edit").select2({minimumResultsForSearch:-1}),$("#js-policy-type-edit").select2("val",1),$("#js-category-edit").select2(),$("#js-category-edit").select2("val",0),$("#js-policy-title-edit").val(""),$("#js-sort-order-edit").val(1),$("#js-employee-edit").select2(),$("#js-employee-edit").select2("val",0),$("#js-employee-edit").select2MultiCheckboxes({templateSelection:function(e,t){return t-=1,"Selected "+(-1!==$.inArray("all",$("#js-employee-edit").val())?t:e.length)+" of "+t}}),$("#js-approvers-list-edit").select2(),$("#js-approvers-list-edit").select2("val",0),$("#js-approvers-list-edit").select2MultiCheckboxes({templateSelection:function(e,t){return t-=1,"Selected "+(-1!==$.inArray("all",$("#js-approvers-list-edit").val())?t:e.length)+" of "+t}}),$("#js-employee-type-edit").select2(),$("#js-employee-type-edit").select2("val","all"),$("#js-off-days-edit").select2({closeOnSelect:!1}),$("#js-off-days-edit").select2("val",null),$("#js-approver-check-edit").prop("checked",!1),$("#js-archive-check-edit").prop("checked",!1),$("#js-include-check-edit").prop("checked",!0),$("#js-accrual-time-edit").select2({minimumResultsForSearch:-1}),$("#js-accrual-time-edit").select2("val","none"),$("#js-accrual-time-edit").trigger("change"),$("#js-accrual-frequency-edit").select2({minimumResultsForSearch:-1}),$("#js-accrual-frequency-edit").select2("val","none"),$("#js-accrual-frequency-edit").trigger("change"),$("#js-accrual-frequency-val-edit").val(1),$("#js-accrual-rate-edit").val(0),$('#js-accrual-rate-type-edit option[value="days"]').prop("selected",!0),$("#js-minimum-applicable-hours-edit").val(0),$('.js-minimum-applicable-time-edit[value="hours"]').prop("checked",!0).trigger("click"),$("#js-carryover-cap-check-edit").select2({minimumResultsForSearch:-1}),$("#js-carryover-cap-check-edit").select2("val","no"),$("#js-carryover-cap-check-edit").trigger("change"),$("#js-carryover-cap-edit").val(0),$("#js-accrual-balance-edit").select2({minimumResultsForSearch:-1}),$("#js-accrual-balance-edit").select2("val","no"),$("#js-accrual-balance-edit").trigger("change"),$("#js-maximum-balance-edit").val(0),setTimeout(()=>{$('.js-hire-date-edit[value="hireDate"]').prop("checked",!0),$(".jsImplementDateBox-edit").hide(),$('.js-policy-reset-date-edit[value="policyDate"]').prop("checked",!0).trigger("change")},0),$("#js-accrue-new-hire-edit").val(0),$("#js-newhire-prorate-edit").val(0),$("#js-plan-box-edit").show(),$("#js-plan-box-edit").find("ul").html(""),$("#js-plan-area-edit").html(""),$(".jsPlanArea").html(""),$("#js-accrual-default-flow-edit").prop("checked",!0),$(".js-hint").hide(0),$("#js-custom-date-edit").datepicker({dateFormat:"mm-dd-yy",changeYear:!0,changeMonth:!0,onSelect:e=>{e<=moment().format("MM-DD-YYYY")?$("#js-applicable-date-text-edit").show():$("#js-applicable-date-text-edit").hide()}}),$("#js-custom-reset-date-edit").datepicker({dateFormat:"mm-dd-yy",changeYear:!0,changeMonth:!0}),$(".js-step").hide(),$('.js-step[data-step="1"]').show(),$('.js-step-tab[data-type="edit"]').parent().removeClass("active"),$('.js-step-tab[data-type="edit"][data-step="1"]').parent().addClass("active"),$('.js-step-tab[data-type="reset"]').parent().removeClass("active"),$('.js-step-tab[data-type="reset"][data-step="1"]').parent().addClass("active"),loadResetPage(),$(".jsEditResetCheckbox[data-type='cp']").trigger("click")):setTimeout(loadEditPage,2e3)}function loadResetPage(){$("#js-category-reset").select2().prop("disabled",!0),$("#js-category-reset").select2("val",0),$("#js-policy-title-reset").val("").prop("disabled",!0),$("#js-sort-order-reset").val(1).prop("disabled",!0),$("#js-employee-reset").select2().prop("disabled",!0),$("#js-employee-reset").select2("val",0),$("#js-employee-reset").select2MultiCheckboxes({templateSelection:function(e,t){return t-=1,"Selected "+(-1!==$.inArray("all",$("#js-employee-reset").val())?t:e.length)+" of "+t}}),$("#js-employee-type-reset").select2(),$("#js-employee-type-reset").select2("val","all"),$("#js-approver-check-reset").prop("checked",!1).prop("disabled",!0),$("#js-archive-check-reset").prop("checked",!1).prop("disabled",!0),$("#js-include-check-reset").prop("checked",!0).prop("disabled",!0),$("#js-accrual-time-reset").select2({minimumResultsForSearch:-1}),$("#js-accrual-time-reset").select2("val","none"),$("#js-accrual-time-reset").trigger("change"),$("#js-accrual-frequency-reset").select2({minimumResultsForSearch:-1}),$("#js-accrual-frequency-reset").select2("val","none"),$("#js-accrual-frequency-reset").trigger("change"),$("#js-accrual-frequency-val-reset").val(1),$("#js-accrual-rate-reset").val(0),$('#js-accrual-rate-type-reset option[value="days"]').prop("selected",!0),$("#js-minimum-applicable-hours-reset").val(0),$('.js-minimum-applicable-time-reset[value="hours"]').prop("checked",!0).trigger("click"),$("#js-carryover-cap-check-reset").select2({minimumResultsForSearch:-1}),$("#js-carryover-cap-check-reset").select2("val","no"),$("#js-carryover-cap-check-reset").trigger("change"),$("#js-carryover-cap-reset").val(0),$("#js-accrual-balance-reset").select2({minimumResultsForSearch:-1}),$("#js-accrual-balance-reset").select2("val","no"),$("#js-accrual-balance-reset").trigger("change"),$("#js-maximum-balance-reset").val(0),setTimeout(()=>{$('.js-hire-date-reset[value="hireDate"]').prop("checked",!0),$(".jsImplementDateBox-reset").hide(),$('.js-policy-reset-date-reset[value="policyDate"]').prop("checked",!0).trigger("change")},0),$("#js-accrue-new-hire-reset").val(0),$("#js-newhire-prorate-reset").val(0),$("#js-custom-date-reset").datepicker({dateFormat:"mm-dd-yy",changeYear:!0,changeMonth:!0,onSelect:e=>{e<=moment().format("MM-DD-YYYY")?$("#js-applicable-date-text-reset").show():$("#js-applicable-date-text-reset").hide()}}),$("#js-custom-reset-date-reset").datepicker({dateFormat:"mm-dd-yy",changeYear:!0,changeMonth:!0}),window.timeoff.startPolicyEditProcess()}let cmnOBJ={Categories:{Main:{action:"get_company_types_list",companyId:companyId,employerId:employerId,employeeId:employeeId,public:0}},Employees:{Main:{action:"get_company_employees",companyId:companyId,employerId:employerId,employeeId:employeeId,public:0}},Policies:{Main:{action:"get_policy_list_by_company",companyId:companyId,employerId:employerId,employeeId:employeeId,public:0}}},redirectPage=!0;fetchCategories(),fetchEmployees(),fetchPolicies(),"add"==page&&loadAddPage(),$(".js-step").fadeOut(300),$('.js-step[data-step="1"]').fadeIn(300),$(".jsViewPoliciesBtn").click(function(e){e.preventDefault(),alertify.confirm("WARNING!","Any unsaved changes will be lost.",loadViewPage,()=>{}).set("labels",{ok:"Leave",cancel:"No, I will stay"})}),$(document).on("click",".js-to-step",function(e){e.preventDefault(),ml(!0,"policy");let t=$(this).closest("div").data("step"),a=$(this).closest("div").data("type");if(1===t){$("#js-step-bar-add").hide();let e=$(".js-template-add:checked").val();if(void 0===e)return alertify.alert("WARNING!","Please, select a template.",()=>{}),void ml(!1,"policy");0!=e&&loadTemplate(e),$("#js-step-bar-add").show()}else isStepCompleted(t-1,a)||(t-=1);if(8===t)return redirectPage=!1,void finalStep(a);$(`.js-step-tab[data-type="${a}"]`).parent("li").removeClass("active"),$(`.js-step-tab[data-type="${a}"][data-step="${t}"]`).parent("li").addClass("active"),$(`.js-step-tab[data-type="${a}"]`).find("i").remove(),$(`.js-step-tab[data-type="${a}"][data-step="${t}"]`).append('<i class="fa fa-long-arrow-right"></i>'),$(`.js-step[data-type="${a}"]`).fadeOut(0),$(`.js-step[data-type="${a}"][data-step="${t}"]`).fadeIn(300),$("body, html").animate({scrollTop:0},0),ml(!1,"policy")}),$(document).on("click",".js-to-step-back",function(e){e.preventDefault(),ml(!0,"policy");let t=$(this).closest("div").data("step"),a=$(this).closest("div").data("type");$(`.js-step-tab[data-type="${a}"]`).parent("li").removeClass("active"),$(`.js-step-tab[data-type="${a}"][data-step="${t-2}"]`).parent("li").addClass("active"),$(`.js-step-tab[data-type="${a}"]`).find("i").remove(),$(`.js-step-tab[data-type="${a}"][data-step="${t-2}"]`).append('<i class="fa fa-long-arrow-right"></i>'),$(`.js-step[data-type="${a}"]`).fadeOut(0),$(`.js-step[data-type="${a}"][data-step="${t-2}"]`).fadeIn(300),ml(!1,"policy")}),$(document).on("click",".js-step-tab",function(e){e.preventDefault(),ml(!0,"policy");let t=$(this).data("step"),a=$(this).data("type");isStepCompleted(1,a)?isStepCompleted(2,a)?isStepCompleted(3,a)?isStepCompleted(4,a)?isStepCompleted(5,a)?isStepCompleted(6,a)?isStepCompleted(7,a)||(t=7):t=6:t=5:t=4:t=3:t=2:t=1,$(`.js-step-tab[data-type="${a}"]`).parent("li").removeClass("active"),$(`.js-step-tab[data-type="${a}"][data-step="${t}"]`).parent("li").addClass("active"),$(`.js-step-tab[data-type="${a}"]`).find("i").remove(),$(`.js-step-tab[data-type="${a}"][data-step="${t}"]`).append('<i class="fa fa-long-arrow-right"></i>'),$(`.js-step[data-type="${a}"]`).fadeOut(0),$(`.js-step[data-type="${a}"][data-step="${t}"]`).fadeIn(300),ml(!1,"policy")}),$("#js-add-policy-btn").click(e=>{e.preventDefault(),loadAddPage(),$("#NonEntitledEmployeesadd").prop("checked",!0)});