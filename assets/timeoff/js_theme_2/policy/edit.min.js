$((function(){let e={},t={},a=0,l={},r={type:0,title:0,order:1,policy_category_type:1,entitledEmployees:[],isEntitledEmployees:0,employeeTypes:[],offDays:[],approver:0,approverList:[],deactivate:0,include:1,isESST:0,isESTA:0,method:"yearly",time:"none",frequency:"none",frequencyVal:0,rate:0,rateType:"days",applicableTime:0,applicableTimeType:"hours",carryOverCheck:"no",carryOverType:"days",carryOverVal:0,carryOverCycle:1,negativeBalanceCheck:"no",negativeBalanceVal:0,negativeBalanceType:"days",applicableDateType:"hireDate",applicableDate:0,resetDateType:"policyDateCustom",resetDate:0,newHireTime:0,newHireTimeType:0,newHireRate:0,plans:[]},i={Policies:{Main:{action:"get_single_policy_by_id",companyId:companyId,employerId:employerId,employeeId:employeeId,public:0}}};function c(e){return 1===e?(r.policy_category_type=getField("#js-policy-type-edit"),r.type=getField("#js-category-edit"),0==r.type?(alertify.alert("WARNING!","Please, select the policy type.",(()=>{})),!1):(r.title=getField("#js-policy-title-edit"),0==r.title?(alertify.alert("WARNING!","Please, add the policy title.",(()=>{})),!1):(r.order=getField("#js-sort-order-edit"),r.entitledEmployees=getField("#js-employee-edit"),r.isEntitledEmployees=$(".jsIsEntitledEmployee:checked").val(),r.employeeTypes=getField("#js-employee-type-edit"),r.offDays=getField("#js-off-days-edit"),r.approver=!0===$("#js-approver-check-edit").prop("checked")?1:0,r.approverList=[],1==r.approver&&(r.approverList=getField("#js-approvers-list-edit")||[]),r.deactivate=!0===$("#js-archive-check-edit").prop("checked")?1:0,r.isESST=!0===$("#js-is-esst-edit").prop("checked")?1:0,r.isESTA=!0===$("#js-is-esta-edit").prop("checked")?1:0,r.include=1==$("#js-include-check-edit").prop("checked")?1:0,saveStep(r),!0))):2===e?(r.method=getField("#js-accrual-method-edit"),r.time=getField("#js-accrual-time-edit"),r.frequency=getField("#js-accrual-frequency-edit"),r.frequencyVal=getField("#js-accrual-frequency-val-edit"),r.rate=getField("#js-accrual-rate-edit"),r.rateType=getField("#js-accrual-rate-type-edit option:selected"),r.applicableTimeType=getField(".js-minimum-applicable-time-edit:checked"),r.applicableTime=getField("#js-minimum-applicable-hours-edit"),r.plans=getAccrualPlans("edit"),r.accuralDefaultFlow=!0===$("#js-accrual-default-flow-edit").prop("checked")?1:0,!0===r.plans?(alertify.alert("WARNING!","Please, add the proper plans.",(()=>{})),!1):(saveStep(r),!0)):3===e?(r.carryOverCheck=getField("#js-carryover-cap-check-edit"),r.carryOverVal=getField("#js-carryover-cap-edit"),r.carryOverType=getField("#js-accrual-carryover-type-edit option:selected"),r.carryOverCycle=getField("#js-carryover-cycle-edit"),saveStep(r),!0):4===e?(r.negativeBalanceCheck=getField("#js-accrual-balance-edit"),r.negativeBalanceVal=getField("#js-maximum-balance-edit"),r.negativeBalanceType=getField("#js-accrual-negative-balance-type-edit option:selected"),saveStep(r),!0):5===e?(r.applicableDateType=getField(".js-hire-date-edit:checked"),r.applicableDate=getField("#js-custom-date-edit"),"hiredate"!=r.applicableDateType.toLowerCase()&&0==r.applicableDate?(alertify.alert("WARNING!","Please, select a policy applicable date.",(()=>{})),!1):(saveStep(r),!0)):6===e?(r.resetDateType=getField(".js-policy-reset-date-edit:checked"),r.resetDate=getField("#js-custom-reset-date-edit"),"policydate"!=r.resetDateType.toLowerCase()&&0==r.resetDate?(alertify.alert("WARNING!","Please, select a policy reset date.",(()=>{})),!1):(saveStep(r),!0)):7===e?(r.newHireTime=getField("#js-accrue-new-hire-edit"),r.newHireTimeType=getField("#js-accrual-new-hire-time-type-edit option:selected"),r.newHireRate=getField("#js-newhire-prorate-edit"),saveStep(r),!0):8===e&&(r.plans=getAccrualPlans("edit"),saveStep(r),!0)}function s(e){alertify.confirm("This action will effect the employees balance. Are you sure you want to continue?",(()=>{ml(!0,"policy");let t=Object.assign({},e,{action:"update_policy",companyId:companyId,employeeId:employeeId,employerId:employerId,public:0,policyId:a});$.post(handlerURL,t,(e=>{ml(!1,"policy"),!0!==e.Redirect?!1!==e.Status?alertify.alert("SUCCESS!",e.Response,(()=>{redirectPage&&loadViewPage()})):alertify.alert("WARNING!",e.Response,(()=>{})):alertify.alert("WARNING!","Your session expired. Please, re-login to continue.",(()=>{window.location.reload()}))}))}),(()=>{ml(!1,"policy")})).set("labels",{ok:"Yes",cancel:"No"}).setHeader("CONFIRM!")}function o(e){return 2===e?(t.method=getField("#js-accrual-method-reset"),t.time=getField("#js-accrual-time-reset"),t.frequency=getField("#js-accrual-frequency-reset"),t.frequencyVal=getField("#js-accrual-frequency-val-reset"),t.rate=getField("#js-accrual-rate-reset"),t.rateType=getField("#js-accrual-rate-type-reset option:selected"),t.applicableTimeType=getField(".js-minimum-applicable-time-reset:checked"),t.applicableTime=getField("#js-minimum-applicable-hours-reset"),t.plans=getAccrualPlans("reset"),!0===t.plans?(alertify.alert("WARNING!","Please, add the proper plans.",(()=>{})),!1):(saveStep(t),!0)):3===e?(t.carryOverCheck=getField("#js-carryover-cap-check-reset"),t.carryOverVal=getField("#js-carryover-cap-reset"),t.carryOverType=getField("#js-accrual-carryover-type option:selected"),r.carryOverCycle=getField("#js-carryover-cycle-edit"),saveStep(t),!0):4===e?(t.negativeBalanceCheck=getField("#js-accrual-balance-reset"),t.negativeBalanceVal=getField("#js-maximum-balance-reset"),t.negativeBalanceType=getField("#js-accrual-negative-balance-type-reset option:selected"),saveStep(t),!0):5===e?(t.applicableDateType=getField(".js-hire-date-reset:checked"),t.applicableDate=getField("#js-custom-date-reset"),"hiredate"!=t.applicableDateType.toLowerCase()&&0==t.applicableDate?(alertify.alert("WARNING!","Please, select a policy applicable date.",(()=>{})),!1):(saveStep(t),!0)):6===e?(t.resetDateType=getField(".js-policy-reset-date-reset:checked"),t.resetDate=getField("#js-custom-reset-date-reset"),"policydate"!=t.resetDateType.toLowerCase()&&0==t.resetDate?(alertify.alert("WARNING!","Please, select a policy reset date.",(()=>{})),!1):(saveStep(t),!0)):7!==e||(t.newHireTime=getField("#js-accrue-new-hire-reset"),t.newHireTimeType=getField("#js-accrual-new-hire-time-type-reset option:selected"),t.newHireRate=getField("#js-newhire-prorate-reset"),saveStep(t),!0)}function p(e){ml(!0,"policy");let t=Object.assign({},e,{action:"update_reset_policy",companyId:companyId,employeeId:employeeId,employerId:employerId,public:0,policyId:a});$.post(handlerURL,t,(e=>{ml(!1,"policy"),!0!==e.Redirect?!1!==e.Status?alertify.alert("SUCCESS!",e.Response,(()=>{redirectPage&&loadViewPage()})):alertify.alert("WARNING!",e.Response,(()=>{})):alertify.alert("WARNING!","Your session expired. Please, re-login to continue.",(()=>{window.location.reload()}))}))}window.timeoff.startPolicyEditProcess=async function(){const r=await function(e){return new Promise(((t,a)=>{$.post(handlerURL,Object.assign(i.Policies.Main,{policyId:e}),(e=>{t(e)}))}))}(a);if(!0===r.Redirect)return void alertify.alert("WARNING!","Your session expired. Please, re-login to continue.",(()=>{window.location.reload()}));if(!1===r.Status)return void alertify.alert("WARNING!",r.Response,(()=>{}));let c=JSON.parse(r.Data.accruals);e.type=r.Data.type_sid,e.title=r.Data.title,e.order=r.Data.sort_order,e.entitledEmployees=null!==r.Data.assigned_employees?r.Data.assigned_employees.split(","):null,e.approver=parseInt(r.Data.for_admin),e.deactivate=r.Data.is_archived,e.include=r.Data.is_included,e.isESST=r.Data.is_esst,e.isESTA=r.Data.is_esta,e.method=c.method,e.time=c.time,e.frequency=c.frequency,e.frequencyVal=c.frequencyVal,e.rate=c.rate,e.rateType=c.rateType,e.applicableTime=c.applicableTime,e.applicableTimeType=c.applicableTimeType,e.carryOverCheck=c.carryOverCheck,e.carryOverType=c.carryOverType,e.carryOverVal=parseInt(c.carryOverVal),e.carryOverCycle=parseInt(c.carryOverCycle),e.negativeBalanceCheck=c.negativeBalanceCheck,e.negativeBalanceVal=c.negativeBalanceVal,e.negativeBalanceType=c.negativeBalanceType,e.applicableDateType=c.applicableDateType,e.applicableDate=c.applicableDate,e.resetDateType=c.resetDateType,e.resetDate=0==c.resetDate?0:c.resetDate,e.newHireTime=c.newHireTime,e.newHireTimeType=c.newHireTimeType,e.newHireRate=c.newHireRate,e.employeeTypes=c.employeeTypes,e.offDays=null!==r.Data.off_days?r.Data.off_days.split(","):null,e.plans=c.plans,e.policy_category_type=r.Data.policy_category_type,e.approverList=r.Data.allowed_approvers,e.accuralDefaultFlow=c.defaultFlow,"no"!=e.carryOverCheck&&"yes"!=e.carryOverCheck&&(e.carryOverCheck="no");"no"!=e.negativeBalanceCheck&&"yes"!=e.negativeBalanceCheck&&(e.negativeBalanceCheck="no");l=Object.assign({},e),$("#js-policy-type-edit").select2("val",e.policy_category_type),$("#jsPolicyTitleEdit").text(" - "+e.title),$("#js-category-edit").select2("val",e.type),$("#js-policy-title-edit").val(e.title),$("#js-sort-order-edit").val(e.order),$("#js-employee-edit").select2("val",e.entitledEmployees),$("#js-employee-type-edit").select2("val",e.employeeTypes),$("#js-off-days-edit").select2("val",e.offDays),$("#js-approver-check-edit").prop("checked",1==e.approver),1==e.approver&&$("#js-approvers-list-edit").select2("val",e.approverList?e.approverList.split(","):[]);$("#js-archive-check-edit").prop("checked",1==e.deactivate),$("#js-include-check-edit").prop("checked",1==e.include),$("#js-is-esst-edit").prop("checked",1==e.isESST),$("#js-is-esta-edit").prop("checked",1==e.isESTA),$("#js-accrual-time-edit").select2("val",e.time),$("#js-accrual-time-edit").trigger("change"),$("#js-accrual-frequency-edit").select2("val",e.frequency),$("#js-accrual-frequency-edit").trigger("change"),$("#js-accrual-frequency-val-edit").val(e.frequencyVal),$("#js-accrual-rate-edit").val(e.rate),$(`#js-accrual-rate-type-edit option[value="${e.rateType}"]`).prop("selected",!0),$("#js-minimum-applicable-hours-edit").val(e.applicableTime),$(`.js-minimum-applicable-time-edit[value="${e.applicableTimeType}"]`).prop("checked",!0).trigger("click"),$("#js-carryover-cap-check-edit").select2("val",e.carryOverCheck),$("#js-carryover-cap-check-edit").trigger("change"),$("#js-carryover-cap-edit").val(e.carryOverVal),$("#js-carryover-cycle-edit").val(e.carryOverCycle),$("#js-accrual-balance-edit").select2("val",e.negativeBalanceCheck),$("#js-accrual-balance-edit").trigger("change"),$("#js-maximum-balance-edit").val(e.negativeBalanceVal),$(`.js-hire-date-edit[value="${e.applicableDateType}"]`).prop("checked",!0),$(`.js-hire-date-edit[value="${e.applicableDateType}"]`).trigger("change"),$(`.js-policy-reset-date-edit[value="${e.resetDateType}"]`).prop("checked",!0).trigger("change"),$("#js-accrue-new-hire-edit").val(e.newHireTime),$("#js-newhire-prorate-edit").val(e.newHireRate),$("#js-accrual-new-hire-time-type-edit").val(e.newHireTimeType),$("#js-custom-date-edit").val(e.applicableDate),$("#js-custom-reset-date-edit").val(e.resetDate),$("#js-step-bar-edit").show(),$("#js-accrual-default-flow-edit").prop("checked",1==e.accuralDefaultFlow||null==e.accuralDefaultFlow),1==r.Data.is_entitled_employee?($("#EntitledEmployees").prop("checked",!0),$("#NonEntitledEmployees").prop("checked",!1)):($("#NonEntitledEmployees").prop("checked",!0),$("#EntitledEmployees").prop("checked",!1));loadAccrualPlans("edit",e.plans);let s=JSON.parse(r.Data.reset_policy);t.type=r.Data.type_sid,t.title=r.Data.title,t.order=r.Data.sort_order,t.entitledEmployees=null!==r.Data.assigned_employees?r.Data.assigned_employees.split(","):null,t.approver=parseInt(r.Data.for_admin),t.deactivate=r.Data.is_archived,t.include=r.Data.is_included,t.method=s.method,t.time=s.time,t.frequency=s.frequency,t.frequencyVal=parseInt(s.frequencyVal),t.rate=s.rate,t.rateType=s.rateType,t.applicableTime=s.applicableTime,t.applicableTimeType=s.applicableTimeType,t.carryOverCheck=s.carryOverCheck,t.carryOverType=s.carryOverType,t.carryOverVal=s.carryOverVal,t.carryOverCycle=s.carryOverCycle,t.negativeBalanceCheck=s.negativeBalanceCheck,t.negativeBalanceVal=s.negativeBalanceVal,t.negativeBalanceType=s.negativeBalanceType,t.applicableDateType=s.applicableDateType,t.applicableDate=s.applicableDate,t.resetDateType=s.resetDateType,t.resetDate=0==s.resetDate?0:s.resetDate,t.newHireTime=s.newHireTime,t.newHireTimeType=s.newHireTimeType,t.newHireRate=s.newHireRate,t.employeeTypes=s.employeeTypes,t.offDays=null!==r.Data.off_days?r.Data.off_days.split(","):null,t.plans=s.plans,$("#js-step-bar-reset").show(),$("#js-category-reset").select2("val",e.type),$("#js-category-reset").select2("val",t.employeeTypes),$("#js-policy-title-reset").val(e.title),$("#js-sort-order-reset").val(e.order),$("#js-employee-reset").select2("val",e.entitledEmployees),$("#js-off-days-edit").select2("val",e.offDays),$("#js-employee-type-reset").select2("val",e.employeeTypes),$("#js-approver-check-reset").prop("checked",1==e.approver),$("#js-archive-check-reset").prop("checked",1==e.deactivate),$("#js-include-check-reset").prop("checked",1==e.include),$("#js-accrual-time-reset").select2("val",s.time),$("#js-accrual-time-reset").trigger("change"),$("#js-accrual-frequency-reset").select2("val",s.frequency),$("#js-accrual-frequency-reset").trigger("change"),$("#js-accrual-frequency-val-reset").val(s.frequencyVal),$("#js-accrual-rate-reset").val(s.rate),$(`#js-accrual-rate-type-reset option[value="${s.rateType}"]`).prop("selected",!0),$("#js-minimum-applicable-hours-reset").val(s.applicableTime),$(`.js-minimum-applicable-time-reset[value="${s.applicableTimeType}"]`).prop("checked",!0).trigger("click"),$("#js-carryover-cap-check-reset").select2("val",s.carryOverCheck),$("#js-carryover-cap-check-reset").trigger("change"),$("#js-carryover-cap-reset").val(s.carryOverVal),$("#js-carryover-cycle-reset").val(s.carryOverCycle),$("#js-accrual-balance-reset").select2("val",s.negativeBalanceCheck),$("#js-accrual-balance-reset").trigger("change"),$("#js-maximum-balance-reset").val(s.negativeBalanceVal),$(`.js-hire-date-reset[value="${s.applicableDateType}"]`).prop("checked",!0),$(`.js-hire-date-reset[value="${s.applicableDateType}"]`).trigger("change"),$(`.js-policy-reset-date-reset[value="${s.resetDateType}"]`).prop("checked",!0).trigger("change"),$("#js-accrue-new-hire-reset").val(s.newHireTime),$("#js-newhire-prorate-reset").val(s.newHireRate),$("#js-accrual-new-hire-time-type-reset").val(s.newHireTimeType),$("#js-custom-date-reset").val(s.applicableDate),$("#js-custom-reset-date-reset").val(s.resetDate),$("#js-step-bar-reset").show(),loadAccrualPlans("reset",s.plans),setNewHireAccrual("edit"),setNewHireAccrual("reset"),ml(!1,"policy")},window.timeoff.stepCompletedEdit=c,window.timeoff.finalStepCompletedEdit=s,window.timeoff.stepCompletedReset=o,window.timeoff.finalStepCompletedReset=p,$(".jsEditResetCheckbox").click((function(){$(".jsEditResetCheckbox").removeClass("btn-orange"),$(".jsEditResetCheckbox").addClass("btn-default"),$(this).addClass("btn-orange"),"rp"===$(this).data("type")?($("#jsEditPage").fadeOut(),$("#jsResetPage").fadeIn(300),$(".jsEditResetText").text("The policy for next year."),page="reset"):($("#jsResetPage").fadeOut(),$("#jsEditPage").fadeIn(300),$(".jsEditResetText").text("The policy for current year."),page="edit")})),$("#js-employee-edit").on("select2:select",(function(e){if("All"!=e.params.data.text){let e=$(this).val().filter((function(e){return"all"!=e}));$("#js-employee-edit").val(e)}else $("#js-employee-edit").val("all");$("#js-employee-edit").trigger("change.select2")})),$("#js-approvers-list-edit").on("select2:select",(function(e){if("All"!=e.params.data.text){let e=$(this).val().filter((function(e){return"all"!=e}));$("#js-approvers-list-edit").val(e)}else $("#js-approvers-list-edit").val("all");$("#js-approvers-list-edit").trigger("change.select2")})),$("#js-category-edit").on("change",(function(){null!==$('#js-category-edit option[value="'+$(this).val()+'"]').text().toLowerCase().trim().match(/(fmla)/g)?$(".js-fmla-range-wrap-edit").show():($(".js-fmla-range-wrap-edit").hide(0),$(".js-fmla-range-edit").prop("checked",!1),$('.js-fmla-range-edit[value="standard_year"]').prop("checked",!0))})),$("#js-accrual-method-edit").change(setAccrualText),$("#js-accrual-frequency-edit").on("change",(function(){"none"==$(this).val()?"Jan To Dec"!=$('#js-accrual-time-edit[value="none"]').text()&&($("#js-accrual-time-edit").html('\n                <option value="none" selected="true">Jan To Dec</option>\n                <option value="start_of_period">Jan to Jun</option>\n                <option value="end_of_period">Jul to Dec</option>\n                '),$("#js-accrual-time-edit").select2()):"1st To 30th"!=$('#js-accrual-time-edit[value="none"]').text()&&($("#js-accrual-time-edit").html('\n                    <option value="none" selected="true">1st To 30th</option>\n                    <option value="start_of_period">1st To 15th</option>\n                    <option value="end_of_period">15th To 30th</option>\n                '),$("#js-accrual-time-edit").select2()),"custom"==$(this).val()?($(".jsCustomBoxAdd").show(0),$("#js-accrual-time-edit").prop("disabled",!0),$("#js-accrual-time-text-edit").show()):($(".jsCustomBoxAdd").hide(0),$("#js-accrual-time-edit").prop("disabled",!1),$("#js-accrual-time-text-edit").hide()),setAccrualText()})),$("#js-carryover-cap-check-edit").change((function(){$(".js-carryover-box-edit").find("input").val(0),"no"===$(this).val()?$(".js-carryover-box-edit").hide():$(".js-carryover-box-edit").show()})),$("#js-accrual-balance-edit").change((function(){$(".js-accrual-balance-edit").find("input").val(0),"no"===$(this).val()?$(".js-negative-box-edit").hide():$(".js-negative-box-edit").show()})),$(".js-hire-date-edit").on("change",(function(){"hireDate"==$(this).val()?($(".jsImplementDateBox-edit").hide(0),$("#js-custom-date-edit").val("")):$(".jsImplementDateBox-edit").show(0)})),$(".js-policy-reset-date-edit").on("change",(function(){"policyDate"==$(this).val()?($(".jsResetDateBox-edit").hide(0),$("#js-custom-reset-date-edit").val("")):$(".jsResetDateBox-edit").show(0)})),$(".js-plan-btn-edit,.js-plan-btn-reset").click((function(e){e.preventDefault(),loadAccrualPlans($(this).data("type"))})),$(document).on("click",".js-plan-remove-btn",(function(e){e.preventDefault(),""!=$(this).parent().find(".js-pt").val().trim()||""!=$(this).parent().find(".js-py").val().trim()?alertify.confirm("Do you really want to delete this accrual plan?",(()=>{$(this).parent().remove()})).set("labels",{ok:"Yes",cancel:"No"}):$(this).parent().remove()})),$('[data-hint="js-hint"]').click((function(e){e.preventDefault(),$(`.js-hint-${$(this).data("target")}`).toggle()})),$(document).on("select2:selecting","#js-plans-select-edit",(function(e){makePlanRow(e.params.args.data.id,"edit")})),$(document).on("select2:unselecting","#js-plans-select-edit",(function(e){removePlan(e.params.args.data.id,"edit")})),$(document).on("click",".js-remove-plan-edit",(function(e){removePlan($(this).closest("li").data("id"),"edit"),$("#js-plans-select-edit").select2("val",newValues($("#js-plans-select-edit").val(),$(this).closest("li").data("id")))})),$("#js-unlimited-policy-check-edit").click((function(){!0===$(this).prop("checked")?$("#js-plan-box-edit").hide():$("#js-plan-box-edit").show()})),$("#js-accrual-time-edit").change(setAccrualText),$("#js-accrual-rate-type-edit").change(setAccrualText),$("#js-accrual-rate-edit").keyup((function(){""==$(this).val().trim()?($("#js-accrual-time-edit").prop("disabled",!0),$("#js-accrual-time-text-edit").show()):null!=$(this).val().match(/[a-zA-Z]/)||$(this).val()<0?($(this).val(0),$("#js-accrual-time-edit").prop("disabled",!0),$("#js-accrual-time-text-edit").show()):($("#js-accrual-time-edit").prop("disabled",!1),$("#js-accrual-time-text-edit").hide()),0==$(this).val()?$(".js-plan-btn-edit").prop("disabled",!0):$(".js-plan-btn-edit").prop("disabled",!1),setAccrualText()})),$("#js-accrual-frequency-val-edit").keyup((function(){$(this).val().trim()<=0?$(this).val(1):$(this).val().trim()>12&&$(this).val(12),setAccrualText()})),$("#js-category-reset").on("change",(function(){null!==$('#js-category-reset option[value="'+$(this).val()+'"]').text().toLowerCase().trim().match(/(fmla)/g)?$(".js-fmla-range-wrap-reset").show():($(".js-fmla-range-wrap-reset").hide(0),$(".js-fmla-range-reset").prop("checked",!1),$('.js-fmla-range-reset[value="standard_year"]').prop("checked",!0))})),$("#js-accrual-method-reset").change(setAccrualText),$("#js-accrual-frequency-reset").on("change",(function(){"none"==$(this).val()?"Jan To Dec"!=$('#js-accrual-time-reset[value="none"]').text()&&($("#js-accrual-time-reset").html('\n                <option value="none" selected="true">Jan To Dec</option>\n                <option value="start_of_period">Jan to Jun</option>\n                <option value="end_of_period">Jul to Dec</option>\n                '),$("#js-accrual-time-reset").select2()):"1st To 30th"!=$('#js-accrual-time-reset[value="none"]').text()&&($("#js-accrual-time-reset").html('\n                    <option value="none" selected="true">1st To 30th</option>\n                    <option value="start_of_period">1st To 15th</option>\n                    <option value="end_of_period">15th To 30th</option>\n                '),$("#js-accrual-time-reset").select2()),"custom"==$(this).val()?($(".jsCustomBoxAdd").show(0),$("#js-accrual-time-reset").prop("disabled",!0),$("#js-accrual-time-text-reset").show()):($(".jsCustomBoxAdd").hide(0),$("#js-accrual-time-reset").prop("disabled",!1),$("#js-accrual-time-text-reset").hide()),setAccrualText()})),$("#js-carryover-cap-check-reset").change((function(){$(".js-carryover-box-reset").find("input").val(0),"no"===$(this).val()?$(".js-carryover-box-reset").hide():$(".js-carryover-box-reset").show()})),$("#js-accrual-balance-reset").change((function(){$(".js-accrual-balance-reset").find("input").val(0),"no"===$(this).val()?$(".js-negative-box-reset").hide():$(".js-negative-box-reset").show()})),$(".js-hire-date-reset").on("change",(function(){"hireDate"==$(this).val()?($(".jsImplementDateBox-reset").hide(0),$("#js-custom-date-reset").val("")):$(".jsImplementDateBox-reset").show(0)})),$(".js-policy-reset-date-reset").on("change",(function(){"policyDate"==$(this).val()?($(".jsResetDateBox-reset").hide(0),$("#js-custom-reset-date-reset").val("")):$(".jsResetDateBox-reset").show(0)})),$(document).on("click",".js-plan-remove-btn",(function(e){e.preventDefault(),""!=$(this).parent().find(".js-pt").val().trim()||""!=$(this).parent().find(".js-py").val().trim()?alertify.confirm("Do you really want to delete this accrual plan?",(()=>{$(this).parent().remove()})).set("labels",{ok:"Yes",cancel:"No"}):$(this).parent().remove()})),$('[data-hint="js-hint"]').click((function(e){e.preventDefault(),$(`.js-hint-${$(this).data("target")}`).toggle()})),$(document).on("select2:selecting","#js-plans-select-reset",(function(e){makePlanRow(e.params.args.data.id,"reset")})),$(document).on("select2:unselecting","#js-plans-select-reset",(function(e){removePlan(e.params.args.data.id,"reset")})),$(document).on("click",".js-remove-plan-reset",(function(e){removePlan($(this).closest("li").data("id"),"reset"),$("#js-plans-select-reset").select2("val",newValues($("#js-plans-select-reset").val(),$(this).closest("li").data("id")))})),$("#js-unlimited-policy-check-reset").click((function(){!0===$(this).prop("checked")?$("#js-plan-box-reset").hide():$("#js-plan-box-reset").show()})),$("#js-accrual-time-reset").change(setAccrualText),$("#js-accrual-rate-type-reset").change(setAccrualText),$("#js-accrual-rate-reset").keyup((function(){$(this).val()<=0?($(this).val(0),$("#js-accrual-time-reset").prop("disabled",!0),$("#js-accrual-time-text-reset").show()):($("#js-accrual-time-reset").prop("disabled",!1),$("#js-accrual-time-text-reset").hide()),0==$(this).val()?$(".js-plan-btn-reset").prop("disabled",!0):$(".js-plan-btn-reset").prop("disabled",!1),setAccrualText()})),$("#js-accrual-frequency-val-reset").keyup((function(){$(this).val().trim()<=0?$(this).val(1):$(this).val().trim()>12&&$(this).val(12),setAccrualText()})),$(document).on("click",".js-edit-row-btn",(function(t){t.preventDefault(),e=Object.assign(r),a=$(this).closest(".jsBox").data("id"),l={},ml(!0,"policy"),loadEditPage()})),$("#js-policy-title-edit").keyup((function(){$("#jsPolicyTitleEdit").text(" - "+$(this).val())})),$("#js-accrue-new-hire-edit").keyup(setNewHireAccrual),$("#js-newhire-prorate-edit").keyup(setNewHireAccrual),$("#js-accrual-new-hire-time-type-edit").change(setNewHireAccrual),$("#js-accrue-new-hire-reset").keyup(setNewHireAccrual),$("#js-newhire-prorate-reset").keyup(setNewHireAccrual),$("#js-accrual-new-hire-time-type-reset").change(setNewHireAccrual),$(".jsStepSave").click((e=>{e.preventDefault(),c(1)&&c(2)&&c(3)&&c(4)&&c(5)&&c(6)&&c(7)&&(redirectPage=!1,s(JSON.parse(localStorage.getItem("editPolicy"))))})),$(".jsStepSaveReset").click((e=>{e.preventDefault(),o(1)&&o(2)&&o(3)&&o(4)&&o(5)&&o(6)&&o(7)&&(redirectPage=!1,p(JSON.parse(localStorage.getItem("resetPolicy"))))}))}));