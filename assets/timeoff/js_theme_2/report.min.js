$((function(){let selectedEmployees=[];function setReportView(){ml(!0,"report"),selectedEmployees=[];let individualEmployees=$("#jsIndividualEmployees").val()||[],departments=$("#jsDepartments").val()||[],teams=$("#jsTeams").val()||[],jobs=$("#jsJobTitles").val()||[],types=$("#jsEmploymentTypes").val()||[],newHires=$("#jsNewHires").val()||[],finalEmployeeList=[];finalEmployeeList=_.concat(finalEmployeeList,individualEmployees),employeeList.map((function(emp){_.intersection(emp.DepartmentIds,departments).length>0&&finalEmployeeList.push(emp.sid),_.intersection(emp.TeamIds,teams).length>0&&finalEmployeeList.push(emp.sid);let job=""!=emp.job_title&&null!=emp.job_title?emp.job_title.replace(/[^a-zA-Z]/g,"").trim().toLowerCase():"",joinedAt;-1!==$.inArray(job,jobs)&&finalEmployeeList.push(emp.sid),-1!==$.inArray(emp.employee_type,types)&&finalEmployeeList.push(emp.sid),""!=emp.joined_at&&null!=emp.joined_at?joinedAt=moment(emp.joined_at,"YYYY-MM-DD"):""!=emp.registration_date&&null!=emp.registration_date&&(joinedAt=moment(emp.joined_at,"YYYY-MM-DD H:m:s")),(30==newHires&&moment().diff(joinedAt,"days")<=30||60==newHires&&moment().diff(joinedAt,"days")<=60||90==newHires&&moment().diff(joinedAt,"days")<=90)&&finalEmployeeList.push(emp.sid)})),finalEmployeeList=_.uniq(finalEmployeeList),finalEmployeeList.length>0?(selectedEmployees=finalEmployeeList,$(".jsReportEmployeeRow").hide(),finalEmployeeList.map((function(id){$('.jsReportEmployeeRow[data-id="'+id+'"]').show()}))):$(".jsReportEmployeeRow").show(),ml(!1,"report")}$("#jsIndividualEmployees").select2({closeOnSelect:!1}),$("#jsDepartments").select2({closeOnSelect:!1}),$("#jsTeams").select2({closeOnSelect:!1}),$("#jsJobTitles").select2({closeOnSelect:!1}),$("#jsEmploymentTypes").select2({closeOnSelect:!1}),$("#jsNewHires").select2({closeOnSelect:!1}),$("#jsReportStartDate").datepicker({format:"m/d/y",changeMonth:!0,changeYear:!0,onSelect:function(e){$("#jsReportEndDate").datepicker("option","minDate",e)}}),$("#jsReportEndDate").datepicker({format:"m/d/y",changeMonth:!0,changeYear:!0}),$("#jsIndividualEmployees, #jsDepartments, #jsTeams, #jsJobTitles, #jsEmploymentTypes, #jsNewHires").change(setReportView),$("#jsReportClearFilter").click((function(event){event.preventDefault(),$("#jsIndividualEmployees").select2("val",null),$("#jsDepartments").select2("val",null),$("#jsTeams").select2("val",null),$("#jsJobTitles").select2("val",null),$("#jsEmploymentTypes").select2("val",null),$("#jsNewHires").select2("val",0),$(".jsReportEmployeeRow").show()})),$(".jsReportLink").click((function(event){event.preventDefault();let startDate=$("#jsReportStartDate").val()||"all",endDate=$("#jsReportEndDate").val()||"all";window.open($(this).prop("href")+"?start="+startDate+"&end="+endDate)})),$(".jsReportLinkBulk").click((function(event){event.preventDefault();let startDate=$("#jsReportStartDate").val()||"all",endDate=$("#jsReportEndDate").val()||"all";window.open($(this).prop("href")+"/"+(0==selectedEmployees.length||selectedEmployees.length==employeeList.length?"all":selectedEmployees.join(","))+"?start="+startDate+"&end="+endDate)}))}));