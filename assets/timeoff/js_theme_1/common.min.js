var policyOffDays=void 0;function getImageURL(img){return""==img||null==img?`${baseURL}assets/images/img-applicant.jpg`:`${awsURL}${img}`}function getEmployeeId(i,n){return""==n||null==n?i:n}function ucwords(str){return(str+"").replace(/^([a-z])|\s+([a-z])/g,(function($1){return $1.toUpperCase()}))}function remakeEmployeeName(o,d){let r="";return void 0===d&&(r+=o.first_name+" "+o.last_name),""!=o.job_title&&null!=o.job_title&&(r+=" ("+o.job_title+")"),r+=" [",void 0!==typeof o.is_executive_admin&&0!=o.is_executive_admin&&(r+="Executive "),1==o.access_level_plus&&1==o.pay_plan_flag?r+=o.access_level+" Plus / Payroll":1==o.access_level_plus?r+=o.access_level+" Plus":1==o.pay_plan_flag?r+=o.access_level+" Payroll":r+=o.access_level,r+="]",r}function getArrayFromMinutes(minutes,defaultTimeFrame,slug){var r={};return r.timeFrame=defaultTimeFrame,r.originalMinutes=minutes,r["D:H:M"]={},r["D:H:M"].days=parseInt(minutes/(60*defaultTimeFrame)),r["D:H:M"].hours=parseInt(minutes%(60*defaultTimeFrame)/60),r["D:H:M"].minutes=parseInt(minutes%(60*defaultTimeFrame)%60),r["H:M"]={},r["H:M"].hours=parseInt(minutes/60),r["H:M"].minutes=parseInt(minutes%60),r.D={},r.D.days=(minutes/(60*defaultTimeFrame)).toFixed(2),r.M={},r.M.minutes=minutes,r.H={},r.H.hours=(minutes/60).toFixed(2),r.active=r[slug],r.text="",void 0!==r[slug].days&&(r.text+=r[slug].days+" day"+(r[slug].days>1?"s":"")+", "),void 0!==r[slug].hours&&(r.text+=r[slug].hours+" hour"+(r[slug].hours>1?"s":"")+", "),void 0!==r[slug].minutes&&(r.text+=r[slug].minutes+" minute"+(r[slug].minutes>1?"s":"")+", "),r.text=r.text.substring(0,r.text.length-2),r}function getAccrualPlans(type,same){var r=[],is_error=!1;return 0===$(".js-plan-row-"+type).length?r:($(".js-plan-row-"+type).map((function(i){if(!is_error){var l={accrualRate:$(this).find(".js-pt").val().trim(),accrualType:$(this).find(".js-py").val().trim(),accrualTypeM:$(this).find(".js-pyt").val()};(0!=l.accrualType&&""!=l.accrualType||0!=l.accrualRate&&""!=l.accrualRate||0!=l.accrualTypeM&&""!=l.accrualTypeM)&&(0!=l.accrualType&&""!=l.accrualType||(is_error=!0),0!=l.accrualRate&&""!=l.accrualRate||(is_error=!0),0!=l.accrualTypeM&&""!=l.accrualTypeM||(is_error=!0),is_error?alertify.alert("WARNING!","Accrual fields are mendatory for "+ ++i+" plan."):r.push("edit-reset"==type||void 0!==same?{plan_title:l.accrualType,accrual_rate:l.accrualRate,accrual_type_m:l.accrualTypeM}:l))}})),is_error||r)}function ml(doShow,p){p=void 0===p?".jsIPLoader":`.jsIPLoader[data-page="${p}"]`,void 0===doShow||!1===doShow?$(p).hide():$(p).show()}function getField(f){let field=$(f).val();return field&&0!=field&&null!=field?field:0}function Modal(options,cb){let html=`\n    \x3c!-- Custom Modal --\x3e\n    <div class="csModal" id="${options.Id}">\n        <div class="container-fluid">\n            <div class="csModalHeader">\n                <h3 class="csModalHeaderTitle">\n                    <span>\n                    ${options.Title}\n                    </span>\n                    <span class="csToRight">\n                    ${void 0!==options.Buttons&&0!==options.Buttons.length?options.Buttons.join(""):""}\n                        <button class="btn btn-black jsModalCancel" ${void 0===options.Ask?"":'data-ask="no"'} title="Close this window">Cancel</button>\n                    </span>\n                    <div class="clearfix"></div>\n                </h3>\n            </div>\n            <div class="csModalBody">\n                <div class="csIPLoader jsIPLoader" data-page="${options.Loader}"><i class="fa fa-circle-o-notch fa-spin"></i></div>\n                ${options.Body}\n            </div>\n            <div class="clearfix"></div>\n        </div>\n    </div>\n    `;$(`#${options.Id}`).remove(),$("body").append(html),$(`#${options.Id}`).fadeIn(300),$("body").css("overflow-y","hidden"),$(`#${options.Id} .csModalBody`).css("top",$(`#${options.Id} .csModalHeader`).height()+50),cb()}function load_pagination(limit,list_size,target_ref,page_type){var obj=window.timeoff.PaginationOBJ[page_type];limit=parseInt(limit),obj.page=parseInt(obj.page);var page_array=paginate(obj.count,obj.Main.page,limit,list_size),rows="";rows+='<div class="row">',rows+='<div class="col-lg-12">',rows+='   <div class="row pto-pagination">',rows+='       <div class="col-xs-12 col-lg-3">',rows+='           <div class="pagination-left-content js-showing-target">',rows+='               <div class="js-show-record"></div>',rows+="           </div>",rows+="       </div>",rows+='       <div class="col-xs-12 col-lg-9">',rows+='           <nav aria-label="Pagination">',rows+='               <ul class="pagination cs-pagination js-pagination"></ul>',rows+="           </nav>",rows+="       </div>",rows+="   </div>",rows+="</div>",rows+="</div>",target_ref.html(rows);var target=target_ref.find(".js-pagination"),targetShowing=target_ref.find(".js-showing-target"),total_records=page_array.total_pages;if(obj.count>=limit){var rows="";rows+='<li class="page-item"><a href="javascript:void(0)" data-page-type="'+page_type+'" class="'+(1==obj.Main.page?"":"js-pagination-first")+'">First</a></li>',rows+='<li class="page-item"><a href="javascript:void(0)" data-page-type="'+page_type+'" class="'+(1==obj.Main.page?"":"js-pagination-prev")+'">&laquo;</a></li>',$.each(page_array.pages,(function(index,val){rows+='<li class="'+(val==obj.Main.page?"active page-item":"")+'"><a href="javascript:void(0)" data-page-type="'+page_type+'" data-page="'+val+'" class="'+(obj.Main.page!=val?"js-pagination-shift":"")+'">'+val+"</a></li>"})),rows+='<li class="page-item"><a href="javascript:void(0)" data-page-type="'+page_type+'" class="'+(obj.Main.page==page_array.total_pages?"":"js-pagination-next")+'">&raquo;</a></li>',rows+='<li class="page-item"><a href="javascript:void(0)" data-page-type="'+page_type+'" class="'+(obj.Main.page==page_array.total_pages?"":"js-pagination-last")+'">Last</a></li>',target.html(rows)}targetShowing.html("<p>Showing "+(page_array.start_index+1)+" - "+(-1!=page_array.end_index?page_array.end_index+1:1)+" of "+obj.count+"</p>")}function paginate(total_items,current_page,page_size,max_pages){var total_pages=Math.ceil(total_items/page_size),start_page,end_page;if(current_page<1?current_page=1:current_page>total_pages&&(current_page=total_pages),total_pages<=max_pages)start_page=1,end_page=total_pages;else{var max_pagesBeforecurrent_page=Math.floor(max_pages/2),max_pagesAftercurrent_page=Math.ceil(max_pages/2)-1;current_page<=max_pagesBeforecurrent_page?(start_page=1,end_page=max_pages):current_page+max_pagesAftercurrent_page>=total_pages?(start_page=total_pages-max_pages+1,end_page=total_pages):(start_page=current_page-max_pagesBeforecurrent_page,end_page=current_page+max_pagesAftercurrent_page)}var start_index=(current_page-1)*page_size,end_index=Math.min(start_index+page_size-1,total_items-1),pages=Array.from(Array(end_page+1-start_page).keys()).map(i=>start_page+i);return{total_items:total_items,total_pages:total_pages,start_page:start_page,end_page:end_page,start_index:start_index,end_index:end_index,pages:pages}}function pagination_event(){var i=$(this).data("page-type");!0===$(this).hasClass("js-pagination-next")?(window.timeoff.PaginationOBJ[i].Main.page=window.timeoff.PaginationOBJ[i].Main.page+1,window.timeoff.PaginationOBJ[i].cb($(this))):!0===$(this).hasClass("js-pagination-prev")?(window.timeoff.PaginationOBJ[i].Main.page=window.timeoff.PaginationOBJ[i].Main.page-1,window.timeoff.PaginationOBJ[i].cb($(this))):!0===$(this).hasClass("js-pagination-first")?(window.timeoff.PaginationOBJ[i].Main.page=1,window.timeoff.PaginationOBJ[i].cb($(this))):!0===$(this).hasClass("js-pagination-last")?(window.timeoff.PaginationOBJ[i].Main.page=window.timeoff.PaginationOBJ[i].pages,window.timeoff.PaginationOBJ[i].cb($(this))):!0===$(this).hasClass("js-pagination-shift")&&(window.timeoff.PaginationOBJ[i].Main.page=parseInt($(this).data("page")),window.timeoff.PaginationOBJ[i].cb($(this)))}window.timeoff={PaginationOBJ:{}},holidayDatesArray=[],holidayDates.length>0&&holidayDates.map(hld=>{holidayDatesArray.push(hld.from_date)}),$(".btn-apply-filter").click((function(){$(this).parent().next(".filter-content").toggle()})),$(".csMobile span i").click((function(e){$(".csVertical").toggle()})),$(".jsCalendarView").click((function(e){e.preventDefault(),Modal({Id:"calendarModal",Title:"Calendar",Body:`<iframe src="${baseURL}calendar/my_events/iframe${null!==window.location.pathname.match(/(lms)|(employee_management_system)|(dashboard)/gi)?"/ems":""}" width="100%" height="${$(window).height()-90}"></iframe>`,Loader:"jsCalendarLoader"},()=>{ml(!1,"jsCalendarLoader")})})),$(document).on("keyup",".js-number",(function(){$(this).val($(this).val().replace(/[^0-9]/,""))})),$(".jsToggle").click((function(e){e.preventDefault(),$(this).find("i").hasClass("fa-minus-circle")?($(this).find("i").removeClass("fa-minus-circle").addClass("fa-plus-circle"),$(`div[data-target="${$(this).data("target")}"]`).hide()):($(this).find("i").removeClass("fa-plus-circle").addClass("fa-minus-circle"),$(`div[data-target="${$(this).data("target")}"]`).show())})),$(document).on("click",".jsModalCancel",e=>{e.preventDefault(),null!=$(e.target).data("ask")?alertify.confirm("Any unsaved changes will be lost.",()=>{$(e.target).closest(".csModal").fadeOut(300),$("body").css("overflow-y","auto"),$("#ui-datepicker-div").remove()}).set("labels",{ok:"LEAVE",cancel:"NO, i WILL STAY"}).set("title","Notice!"):($(e.target).closest(".csModal").fadeOut(300),$("body").css("overflow-y","auto"),$("#ui-datepicker-div").remove())}),$(document).on("click",".js-pagination-prev",pagination_event),$(document).on("click",".js-pagination-first",pagination_event),$(document).on("click",".js-pagination-last",pagination_event),$(document).on("click",".js-pagination-next",pagination_event),$(document).on("click",".js-pagination-shift",pagination_event);let inObject=function(val,searchIn){for(obj in searchIn)if(searchIn[obj].diff>=2){if(searchIn[obj].from_date<=val&&searchIn[obj].to_date>=val)return searchIn[obj]}else if(searchIn[obj].from_date==val)return searchIn[obj];return-1};function remakeRangeRows(t1,t2,target,slug){let startDate=$(t1).val(),endDate=$(t2).val();if($(target).hide(),$(`${target} tbody tr`).remove(),""==startDate||""==endDate)return;startDate=moment(startDate),endDate=moment(endDate);let diff=endDate.diff(startDate,"days");slug=void 0===slug?"":"-"+slug;var policyDayOffs=void 0===policyOffDays?timeOffDays:policyOffDays;let rows="",i=0,il=diff;for(;i<=il;i++){let sd=moment(startDate).add(i,"days");-1===$.inArray(sd.format("MM-DD-YYYY"),holidayDates)&&-1===$.inArray(sd.format("dddd").toString().toLowerCase(),policyDayOffs)&&(rows+='<tr data-id="'+i+'" data-date="'+sd.format("MM-DD-YYYY")+'">',rows+='    <th style="vertical-align: middle">'+sd.format("MMMM Do, YYYY")+"</th>",rows+='    <th style="vertical-align: middle">',rows+="        <div>",rows+='            <label class="control control--radio">',rows+="                Full Day",rows+='                <input type="radio" name="'+i+"_day_type"+slug.replace(/-/g,"_")+'" checked="true" value="fullday" />',rows+='                <span class="control__indicator"></span>',rows+="            </label> <br />",rows+='            <label class="control control--radio">',rows+="                Partial Day",rows+='                <input type="radio" name="'+i+"_day_type"+slug.replace(/-/g,"_")+'" value="partialday" />',rows+='                <span class="control__indicator"></span>',rows+="            </label>",rows+="        </div>",rows+="    </th>",rows+="    <th>",rows+='        <div class="rowd" id="row_'+i+'">',rows+=setTimeView("#row_"+i,"-el"+slug+i,sd.format("MMDDYYYY"),0),rows+="        </div>",rows+="    </th>",rows+="</tr>")}$(`${target} tbody`).html(rows),$(target).show()}function remakeRangeRowsEdit(d1,d2,target,data){let startDate=$(d1).val(),endDate=$(d2).val(),d={};if("object"==typeof data&&data.days.map((function(v,i){d[v.date]=v,void 0===v.partial&&(d[v.date].partial="fullday")})),$(`${target}`).hide(),$(`${target} tbody tr`).remove(),""==startDate||""==endDate)return;startDate=moment(startDate),endDate=moment(endDate);let diff,rows="",i=0,il=endDate.diff(startDate,"days");for(;i<=il;i++){let sd=moment(startDate).add(i,"days"),ld=d[sd.format("MM-DD-YYYY")];-1===$.inArray(sd.format("MM-DD-YYYY"),holidayDates)&&-1===$.inArray(sd.format("dddd").toString().toLowerCase(),timeOffDays)&&(console.log(ld),rows+='<tr data-id="'+i+'" data-date="'+sd.format("MM-DD-YYYY")+'">',rows+='    <th style="vertical-align: middle">'+sd.format("MMMM Do, YYYY")+"</th>",rows+='    <th style="vertical-align: middle">',rows+="        <div>",rows+='            <label class="control control--radio">',rows+="                Full Day",rows+='                <input type="radio" name="'+i+'_day_type_edit" value="fullday" '+(void 0!==ld&&"fullday"==ld.partial?'checked="true"':null==ld?'checked="true"':"")+" />",rows+='                <span class="control__indicator"></span>',rows+="            </label>",rows+='            <label class="control control--radio">',rows+="                Partial Day",rows+='                <input type="radio" name="'+i+'_day_type_edit" value="partialday" '+(void 0!==ld&&"fullday"!=ld.partial?'checked="true"':"")+" />",rows+='                <span class="control__indicator"></span>',rows+="            </label>",rows+="        </div>",rows+="    </th>",rows+="    <th>",rows+='        <div class="rowd" id="row_'+i+'_edit">',rows+=setTimeView("#row_"+i,"-el-edit"+i,ld),rows+="        </div>",rows+="    </th>",rows+="</tr>")}""!=rows&&($(`${target} tbody`).html(rows),$(`${target}`).show())}function setTimeView(target,prefix,position){let row="";"object"==typeof position&&(position=position.date.replace(/-/gi,""));let slug=window.timeoff.cPolicies[0].Settings.Slug;if("D:H:M"==slug?(row+='<div class="col-sm-4">',row+='    <div class="form-group">',row+="        <label>Days </label>",row+='        <input type="text" data-ids="'+position+'" data-page="'+(null!==prefix.match(/edit/gi)?"edit":"add")+'" data-type="hour" class="form-control js-number" id="js-request-days'+(void 0===prefix?"":prefix)+'"  />',row+="    </div>",row+="</div>",row+='<div class="col-sm-4">',row+='    <div class="form-group">',row+="        <label>Hours </label>",row+='        <input type="text" data-ids="'+position+'" data-page="'+(null!==prefix.match(/edit/gi)?"edit":"add")+'" data-type="hour" class="form-control js-number" id="js-request-hours'+(void 0===prefix?"":prefix)+'" value="'+getTime(position,"hour",prefix)+'" />',row+="    </div>",row+="</div>",row+='<div class="col-sm-4">',row+='    <div class="form-group">',row+="        <label>Minutes </label>",row+='        <input type="text" data-ids="'+position+'" data-page="'+(null!==prefix.match(/edit/gi)?"edit":"add")+'" data-type="minute" class="form-control js-number" id="js-request-minutes'+(void 0===prefix?"":prefix)+'" value="'+getTime(position,"minute",prefix)+'" />',row+="    </div>",row+="</div>"):"D:H"==slug?(row+='<div class="col-sm-6">',row+='    <div class="form-group">',row+="        <label>Days </label>",row+='        <input type="text" data-ids="'+position+'" data-page="'+(null!==prefix.match(/edit/gi)?"edit":"add")+'" data-type="day" class="form-control js-number" id="js-request-days'+(void 0===prefix?"":prefix)+'" value="'+getTime(position,"day",prefix)+'" />',row+="    </div>",row+="</div>",row+='<div class="col-sm-6">',row+='    <div class="form-group">',row+="        <label>Hours </label>",row+='        <input type="text" data-ids="'+position+'" data-page="'+(null!==prefix.match(/edit/gi)?"edit":"add")+'" data-type="hour" class="form-control js-number" id="js-request-hours'+(void 0===prefix?"":prefix)+'" value="'+getTime(position,"hour",prefix)+'" />',row+="    </div>",row+="</div>"):"H:M"==slug?(row+='<div class="col-sm-6">',row+='    <div class="form-group">',row+="        <label>Hours </label>",row+='        <input type="text" data-ids="'+position+'" data-page="'+(null!==prefix.match(/edit/gi)?"edit":"add")+'" data-type="hour" class="form-control js-number" id="js-request-hours'+(void 0===prefix?"":prefix)+'" value="'+getTime(position,"hour",prefix)+'" />',row+="    </div>",row+="</div>",row+='<div class="col-sm-6">',row+='    <div class="form-group">',row+="        <label>Minutes </label>",row+='        <input type="text" data-ids="'+position+'" data-page="'+(null!==prefix.match(/edit/gi)?"edit":"add")+'" data-type="minute" class="form-control js-number" id="js-request-minutes'+(void 0===prefix?"":prefix)+'" value="'+getTime(position,"minute",prefix)+'" />',row+="    </div>",row+="</div>"):"H"==slug?(row+='<div class="col-sm-12">',row+='    <div class="form-group">',row+="        <label>Hours </label>",row+='        <input type="text" data-ids="'+position+'" data-page="'+(null!==prefix.match(/edit/gi)?"edit":"add")+'" data-type="hour" class="form-control js-number" id="js-request-hours'+(void 0===prefix?"":prefix)+'" value="'+getTime(position,"hour",prefix)+'" />',row+="    </div>",row+="</div>"):(row+='<div class="col-sm-12">',row+='    <div class="form-group">',row+="        <label>Minutes </label>",row+='        <input type="text" data-ids="'+position+'" data-page="'+(null!==prefix.match(/edit/gi)?"edit":"add")+'" data-type="minute" class="form-control js-number" id="js-request-minutes'+(void 0===prefix?"":prefix)+'" value="'+getTime(position,"minute",prefix)+'" />',row+="    </div>",row+="</div>"),void 0!==prefix)return row;$(target).html(row)}let timeRowsOBJ={},timeRowsOBJEdit={};function getTime(ind,indd,prefix){return void 0===ind?"":null!==prefix.match(/edit/gi)?(timeRowsOBJEdit.hasOwnProperty(ind)||(timeRowsOBJEdit[ind]={},timeRowsOBJEdit[ind].hour=window.timeoff.cPolicies[0].Settings.ShiftHours,timeRowsOBJEdit[ind].minute=window.timeoff.cPolicies[0].Settings.ShiftMinutes),timeRowsOBJEdit[ind][indd]):(timeRowsOBJ.hasOwnProperty(ind)||(timeRowsOBJ[ind]={},timeRowsOBJ[ind].hour=window.timeoff.cPolicies[0].Settings.ShiftHours,timeRowsOBJ[ind].minute=window.timeoff.cPolicies[0].Settings.ShiftMinutes),timeRowsOBJ[ind][indd])}function getRequestedDays(target,slug){let totalTime=0,err=!1,arr=[];return slug=void 0===slug?"":"-"+slug,$(`${target} tbody tr`).map((function(i,v){if(!err){var time=getTimeInMinutes(`el${slug}${$(this).data("id")}`);time.requestedMinutes<=0?(err=!0,alertify.alert("WARNING!","Please, add request time for date <b>"+$(this).data("date")+"</b>.",(function(){}))):time.requestedMinutes>time.defaultTimeslotMinutes&&(err=!0,alertify.alert("WARNING!","Requested time off can not be greater than shift time.",(function(){}))),arr.push({date:$(this).data("date"),partial:$(this).find('input[name="'+i+"_day_type_"+slug.replace(/-/,"")+'"]:checked').val(),time:time.requestedMinutes}),totalTime=parseInt(totalTime)+parseInt(time.requestedMinutes)}})),{totalTime:totalTime,days:arr,error:err}}function getTimeInMinutes(typo){typo=void 0===typo?"":"-"+typo;var days=0,hours=0,minutes=0,format="",inText="";return 0!==$("#js-request-days"+typo).length&&(format+="D,",days=isNaN(parseInt($("#js-request-days"+typo).val().trim()))?0:parseInt($("#js-request-days"+typo).val().trim())),0!==$("#js-request-hours"+typo).length&&(format+="H,",hours=isNaN(parseInt($("#js-request-hours"+typo).val().trim()))?0:parseInt($("#js-request-hours"+typo).val().trim())),0!==$("#js-request-minutes"+typo).length&&(format+="M,",minutes=isNaN(parseInt($("#js-request-minutes"+typo).val().trim()))?0:parseInt($("#js-request-minutes"+typo).val().trim())),inText="D:H:M"==format?days+" day"+(days>1?"s":"")+", "+hours+" hour"+(hours>1?"s":"")+", and "+minutes+" minute"+(minutes>1?"s":""):"D"==format?days+" day"+(days>1?"s":""):"H"==format?hours+" day"+(hours>1?"s":""):"M"==format?minutes+" minute"+(minutes>1?"s":""):hours+" hour"+(hours>1?"s":"")+", and "+minutes+" minute"+(minutes>1?"s":""),{days:days,hours:hours,minutes:minutes,defaultTimeslot:window.timeoff.cPolicies[0].Settings.Shift,defaultTimeslotMinutes:60*window.timeoff.cPolicies[0].Settings.Shift,format:format.replace(/,$/,""),formated:inText,requestedMinutes:days*window.timeoff.cPolicies[0].Settings.Shift*60+60*hours+minutes}}function getPolicy(policyId,policyList){let i=0,il=policyList.length;for(;i<il;i++)if(policyList[i].PolicyId==policyId)return policyList[i];return{}}function getUserById(userId,users,ind){let r=[];return ind=void 0===ind?user_id:ind,$.each(users,(index,user)=>{user[ind]==userId&&(r=user)}),r}function timeConvert(n){let num,hours=n/60,rhours=Math.floor(hours),minutes=60*(hours-rhours),rminutes;return{hours:rhours,minutes:Math.round(minutes)}}function loadTitles(){$('[title][placement="left"]').tooltip({placement:"left"}),$('[title][placement="right"]').tooltip({placement:"right"}),$('[title][placement="top"]').tooltip({placement:"top"}),$("[title]").tooltip({placement:"bottom"})}function get_array_from_minutes(fromMinutes,employeeShiftTime,format){let returnArray={};return returnArray.timeFrame=employeeShiftTime,returnArray.originalMinutes=fromMinutes,returnArray["D:H:M"]={},returnArray["D:H:M"].days=parseInt(fromMinutes/(60*employeeShiftTime)),returnArray["D:H:M"].hours=parseInt(fromMinutes%(60*employeeShiftTime)/60),returnArray["D:H:M"].minutes=parseInt(fromMinutes%(60*employeeShiftTime)%60),returnArray["H:M"]={},returnArray["H:M"].hours=parseInt(fromMinutes/60),returnArray["H:M"].minutes=parseInt(fromMinutes%60),returnArray.D={},returnArray.D.days=(fromMinutes/(60*employeeShiftTime)).toFixed(2),returnArray.M={},returnArray.M.minutes=fromMinutes,returnArray.H={},returnArray.H.hours=(fromMinutes/60).toFixed(2),returnArray.active=returnArray[format],returnArray.text="",void 0!==returnArray[format].days&&(returnArray.text+=returnArray[format].days+" day"+(returnArray[format].days>1||0==returnArray[format].days?"s":"")+" & "),void 0!==returnArray[format].hours&&(returnArray.text+=returnArray[format].hours+" hour"+(returnArray[format].hours>1||0==returnArray[format].hours?"s":"")+" & "),void 0!==returnArray[format].minutes&&(returnArray.text+=returnArray[format].minutes+" minute"+(returnArray[format].minutes>1||0==returnArray[format].minutes?"s":"")+" & "),returnArray.text=returnArray.text.replace(/&$/,""),returnArray}async function whoIsOnOffToday(){const employeesOnOffToday=await fetchTodaysOffEmployees();if(0===employeesOnOffToday.Data.length)return;let rows="",m_rows="";employeesOnOffToday.Data.map(emp=>{rows+=`\n        <li>\n            <a \n                href="${baseURL}employee_profile/${emp.userId}" \n                target="_blank"\n                class="jsOffEmployees"\n                data-content="<span>${emp.first_name} ${emp.last_name}<br /><span>${remakeEmployeeName(emp,!1)}</span></span>"\n            >\n                <img src="${getImageURL(emp.image)}" />\n            </a>\n        </li>\n        `,m_rows+=`\n            <li>\n                <a  href="${baseURL}employee_profile/${emp.userId}" style="width: auto; height: auto;" >\n                    <div class="employee-info">\n                        <figure>\n                            <img src="${getImageURL(emp.image)}" class="img-circle emp-image" />\n                        </figure>\n                        <div class="text">\n                            <h4>${emp.first_name} ${emp.last_name} </h4>\n                            <p>${remakeEmployeeName(emp,!1)}</p>\n                        </div>\n                    </div>\n                </a>\n            </li>\n        `}),$(".csTopNavOutMobile").html(`\n        <ul style="margin-top: 5px;">\n        ${m_rows}\n        </ul>\n    `),$(".csTopNavOut").html(` \n        <div class="container-fluid">\n            <div class="row">\n                <div class="col-sm-12">\n                    <h3>Who is off today?</h3>\n                </div>\n            </div>\n            <div class="row">\n                <div class="col-sm-12">\n                    <ul style="margin-top: 5px;">\n                    ${rows}\n                    </ul>\n                </div>\n            </div>\n        </div>`),$(".jsOffEmployees").popover({placement:"top",trigger:"hover",html:!0})}function fetchTodaysOffEmployees(){return new Promise(res=>{$.post(handlerURL,{action:"get_today_off_employees",companyId:companyId,employerId:employerId,employeeId:employeeId},resp=>{res(resp)})})}function getParams(index){if(""==window.location.search)return void 0!==index?"all":{};var t={};return window.location.search.replace("?","").split("&").map((function(b){var l=b.split("=");t[l[0]]=l[1]})),void 0!==index?void 0===t[index]?"all":t[index]:t}function getText(o){var r="";return void 0!==o.minutes?void 0!==o.hours?(o.minutes/60>=1&&(o.hours+=(o.minutes/60).split(".")[0],o.minutes+=Math.floor((o.minutes/60).split(".")[1])),r=o.hours+" hours & "+o.minutes+" minutes"):r=o.minutes+" minutes":void 0!==o.hours&&(r=o.hours+" hours"),r.replace(/&$/,"").trim()}function setUpcomingTimeOffs(employeeId){$.post(handlerURL,{action:"get_employee_upcoming_timeoffs",companyId:companyId,employerId:employerId,employeeId:employeeId}).done((function(resp){if(0!==resp.Data.length){var rows="";rows+="<ul>",resp.Data.map((function(to){var startDate=moment(to.request_from_date,"YYYY-MM-DD").format(timeoffDateFormat),endDate=moment(to.request_to_date,"YYYY-MM-DD").format(timeoffDateFormat),diff=moment(to.request_to_date,"YYYY-MM-DD").diff(moment(to.request_from_date,"YYYY-MM-DD"),"days")+1;rows+='    <li style="display: block;">',rows+="        <p>",rows+="            <strong>"+to.title+' <span class="pull-right text-'+("approved"==to.status?"success":"warning")+'">',rows+="                <strong>"+ucwords(to.status)+"</strong>",rows+="            </span></strong> <br/>",rows+="            <span>"+startDate+(startDate==endDate?"":" - "+endDate)+"</span><br/>",rows+="            <span>"+diff+" Day"+(diff<=1?"":"s")+"</span>",rows+="            ",rows+="        </p>",rows+="    </li>"})),rows+="</ul>",$(".jsTimeOffUpComing").html(rows)}else $(".jsTimeOffUpComing").html('<p class="alert alert-info text-center">Currently, there are no upcoming time-offs.</p>')}))}$(document).on("keyup",".js-number",(function(){"add"==$(this).data("page")?timeRowsOBJ[$(this).data("ids")][$(this).data("type")]=$(this).val():timeRowsOBJEdit[$(this).data("ids")][$(this).data("type")]=$(this).val()})),loadTitles(),whoIsOnOffToday();