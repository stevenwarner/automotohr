let cmnOBJ={CompanyYears:{Main:{action:"get_company_holiday_years",companyId:companyId,employerId:employerId,employeeId:employeeId,public:0}}};function fetchCompanyYears(){$.post(handlerURL,cmnOBJ.CompanyYears.Main,resp=>{if(!0===resp.Redirect)return void alertify.alert("WARNING!","Your session expired. Please, re-login to continue.",()=>{window.location.reload()});let rows="";return!1===resp.Status?($("#js-filter-year").html('<option value="2020">2020</option>').select2(),$("#js-filter-year").select2("val",moment().format("YYYY")),rows='<option value="-1">Please Select a Year</option><option value="2020">2020</option>',$("#js-year-add").html(rows),void $("#js-year-edit").html(rows)):(window.timeoff.companyYears=resp.Data,0===window.timeoff.companyYears.length?($("#js-filter-year").html('<option value="2020">2020</option>').select2(),$("#js-filter-year").select2("val",moment().format("YYYY")),rows='<option value="-1">Please Select a Year</option><option value="2020">2020</option>',$("#js-year-add").html(rows),void $("#js-year-edit").html(rows)):(window.timeoff.companyYears.map((function(v){rows+='<option value="'+v+'">'+v+"</option>"})),$("#js-filter-year").html(rows).select2(),$("#js-filter-year").select2("val",moment().format("YYYY")),rows='<option value="-1">Please Select a Year</option>'+rows,$("#js-year-add").html(rows),void $("#js-year-edit").html(rows)))})}function getYearRange(type,single){type=void 0===type?"add":type;var selection=$("#js-year-"+type).val();return null==selection||"-1"==selection?void 0!==single?moment().format("YYYY"):moment().format("YYYY")+":"+moment().format("YYYY"):void 0!==single?selection:`${selection}:${selection}`}function getIconList(){let i=1,il=28,iconList=[];for(;i<=28;i++){let n=i+".png";iconList.push(n)}return iconList}function getIconBody(type){let html="";return getIconList().map(icon=>{html+=`\n        <div class="col-sm-2">\n            <div class="cs-icon-box js-icon-select">\n                <img src="${baseURL}assets/images/holidays/${icon}" data-id="${icon}" data-type="${type}" alt="${icon}" />                        \n            </div>\n        </div>\n        `}),html}function loadAddPage(){page="add",ml(!0,"holiday"),$(".js-page").fadeOut(0),$("#js-page-add").fadeIn(500),void 0!==window.timeoff.companyYears?($("#js-year-add").select2(),$("#js-year-add").select2("val","-1"),$("#js-frequency-add").select2(),$("#js-frequency-add").select2("val","yearly"),$("#js-holiday-add").val(""),$("#js-sort-order-add").val(1),$("#js-from-date-add").val(""),$("#js-to-date-add").val(""),$("#js-archive-check-add").prop("checked",!1),$("#js-icon-plc-add").prop("src",!1),$("#js-icon-plc-box-add").addClass("hidden"),$("#js-holiday-icon-add").val(""),$("#js-from-date-add").datepicker({dateFormat:"mm-dd-yy",changeMonth:!0,yearRange:getYearRange("add"),onSelect:function(v){$("#js-to-date-add").datepicker("option","minDate",v),$("#js-to-date-add").val(v)}}),$("#js-to-date-add").datepicker({dateFormat:"mm-dd-yy",yearRange:getYearRange("add"),changeMonth:!0}).datepicker("option","minDate",$("#js-from-date-add").val()),ml(!1,"holiday")):setTimeout(loadAddPage,2e3)}function loadViewPage(){page="view",ml(!0,"holiday"),$(".js-page").fadeOut(0),$("#js-page-view").fadeIn(500),void 0!==window.timeoff.companyYears?window.timeoff.fetchCompanyHolidays():setTimeout(loadViewPage,2e3)}function loadEditPage(holidayId){page="edit",ml(!0,"holiday"),$(".js-page").fadeOut(0),$("#js-page-edit").fadeIn(500),void 0!==window.timeoff.companyYears?($("#js-year-edit").select2(),$("#js-year-edit").select2("val","-1"),$("#js-frequency-edit").select2(),$("#js-frequency-edit").select2("val","yearly"),$("#js-holiday-edit").val(""),$("#js-sort-order-edit").val(1),$("#js-from-date-edit").val(""),$("#js-to-date-edit").val(""),$("#js-archive-check-edit").prop("checked",!1),$("#js-icon-plc-edit").prop("src",!1),$("#js-icon-plc-box-edit").addClass("hidden"),$("#js-holiday-icon-edit").val(""),$("#js-from-date-edit").datepicker({dateFormat:"mm-dd-yy",changeMonth:!0,yearRange:getYearRange("edit"),onSelect:function(v){$("#js-to-date-edit").datepicker("option","minDate",v),$("#js-to-date-edit").val(v)}}),$("#js-to-date-edit").datepicker({dateFormat:"mm-dd-yy",yearRange:getYearRange("edit"),changeMonth:!0}).datepicker("option","minDate",$("#js-from-date-edit").val()),window.timeoff.startEditProcess(holidayId)):setTimeout(loadEditPage,2e3)}fetchCompanyYears(),"add"==page&&loadAddPage(),$(".jsViewPoliciesBtn").click(loadViewPage),$("#js-add-holiday-btn").click(e=>{e.preventDefault(),loadAddPage()}),$(".js-view-holiday-btn").click((function(e){e.preventDefault(),alertify.confirm("WARNING!","Any unsaved changes will be lost.",loadViewPage,()=>{}).set("labels",{ok:"Leave",cancel:"No, I will stay"})})),$(document).on("click",".js-edit-row-btn",e=>{e.preventDefault(),loadEditPage($(e.target).closest("tr").data("id"))}),$(document).on("click",".js-icon-select",(function(){$(".js-icon-select").removeClass("active"),$(this).addClass("active")}));