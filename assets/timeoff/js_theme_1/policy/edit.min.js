$(function(){async function e(){const e=await t(o);if(!0===e.Redirect)return void alertify.alert("WARNING!","Your session expired. Please, re-login to continue.",()=>{window.location.reload()});if(!1===e.Status)return void alertify.alert("WARNING!",e.Response,()=>{});let a=JSON.parse(e.Data.accruals);c.type=e.Data.type_sid,c.title=e.Data.title,c.order=e.Data.sort_order,c.entitledEmployees=null!==e.Data.assigned_employees?e.Data.assigned_employees.split(","):null,c.approver=parseInt(e.Data.for_admin),c.deactivate=e.Data.is_archived,c.include=e.Data.is_included,c.method=a.method,c.time=a.time,c.frequency=a.frequency,c.frequencyVal=a.frequencyVal,c.rate=a.rate,c.rateType=a.rateType,c.applicableTime=a.applicableTime,c.applicableTimeType=a.applicableTimeType,c.carryOverCheck=a.carryOverCheck,c.carryOverType=a.carryOverType,c.carryOverVal=parseInt(a.carryOverVal),c.carryOverCycle=parseInt(a.carryOverCycle),c.negativeBalanceCheck=a.negativeBalanceCheck,c.negativeBalanceVal=a.negativeBalanceVal,c.negativeBalanceType=a.negativeBalanceType,c.applicableDateType=a.applicableDateType,c.applicableDate=a.applicableDate,c.resetDateType=a.resetDateType,c.resetDate=0==a.resetDate?0:a.resetDate,c.newHireTime=a.newHireTime,c.newHireTimeType=a.newHireTimeType,c.newHireRate=a.newHireRate,c.employeeTypes=a.employeeTypes,c.offDays=null!==e.Data.off_days?e.Data.off_days.split(","):null,c.plans=a.plans,c.policyCategory=e.Data.policy_category_type,c.approverList=e.Data.allowed_approvers,c.accuralDefaultFlow=a.defaultFlow,c.approverList&&(c.approverList=c.approverList.split(",")),p=Object.assign({},c),$("#jsPolicyTitleEdit").text(" - "+c.title),$("#js-policy-type-edit").select2("val",c.policyCategory),$("#js-category-edit").select2("val",c.type),$("#js-policy-title-edit").val(c.title),$("#js-sort-order-edit").val(c.order),$("#js-employee-edit").select2("val",c.entitledEmployees),$("#js-employee-type-edit").select2("val",c.employeeTypes),$("#js-off-days-edit").select2({closeOnSelect:!1}),$("#js-off-days-edit").select2("val",c.offDays),$("#js-approver-check-edit").prop("checked",1==c.approver),$("#js-approvers-list-edit").select2("val",c.approverList),$("#js-archive-check-edit").prop("checked",1==c.deactivate),$("#js-include-check-edit").prop("checked",1==c.include),$("#js-accrual-time-edit").select2("val",c.time),$("#js-accrual-time-edit").trigger("change"),$("#js-accrual-frequency-edit").select2("val",c.frequency),$("#js-accrual-frequency-edit").trigger("change"),$("#js-accrual-frequency-val-edit").val(c.frequencyVal),$("#js-accrual-rate-edit").val(c.rate),$(`#js-accrual-rate-type-edit option[value="${c.rateType}"]`).prop("selected",!0),$("#js-minimum-applicable-hours-edit").val(c.applicableTime),$(`.js-minimum-applicable-time-edit[value="${c.applicableTimeType}"]`).prop("checked",!0).trigger("click"),$("#js-carryover-cap-check-edit").select2("val",c.carryOverCheck),$("#js-carryover-cap-check-edit").trigger("change"),$("#js-carryover-cap-edit").val(c.carryOverVal),$("#js-carryover-cycle-edit").val(c.carryOverCycle),$("#js-accrual-balance-edit").select2("val",c.negativeBalanceCheck),$("#js-accrual-balance-edit").trigger("change"),$("#js-maximum-balance-edit").val(c.negativeBalanceVal),$(`.js-hire-date-edit[value="${c.applicableDateType}"]`).prop("checked",!0),$(`.js-hire-date-edit[value="${c.applicableDateType}"]`).trigger("change"),$(`.js-policy-reset-date-edit[value="${c.resetDateType}"]`).prop("checked",!0).trigger("change"),$("#js-accrue-new-hire-edit").val(c.newHireTime),$("#js-newhire-prorate-edit").val(c.newHireRate),$("#js-accrual-new-hire-time-type-edit").val(c.newHireTimeType),$("#js-custom-date-edit").val(c.applicableDate),$("#js-custom-reset-date-edit").val(c.resetDate),$("#js-step-bar-edit").show(),$("#js-accrual-default-flow-edit").prop("checked",1==c.accuralDefaultFlow),1==e.Data.is_entitled_employee?($("#EntitledEmployees").prop("checked",!0),$("#NonEntitledEmployees").prop("checked",!1)):($("#NonEntitledEmployees").prop("checked",!0),$("#EntitledEmployees").prop("checked",!1)),loadAccrualPlans("edit",c.plans);let l=JSON.parse(e.Data.reset_policy);s.type=e.Data.type_sid,s.title=e.Data.title,s.order=e.Data.sort_order,s.entitledEmployees=null!==e.Data.assigned_employees?e.Data.assigned_employees.split(","):null,s.approver=parseInt(e.Data.for_admin),s.deactivate=e.Data.is_archived,s.include=e.Data.is_included,s.method=l.method,s.time=l.time,s.frequency=l.frequency,s.frequencyVal=parseInt(l.frequencyVal),s.rate=l.rate,s.rateType=l.rateType,s.applicableTime=l.applicableTime,s.applicableTimeType=l.applicableTimeType,s.carryOverCheck=l.carryOverCheck,s.carryOverType=l.carryOverType,s.carryOverVal=l.carryOverVal,s.carryOverCycle=l.carryOverCycle,s.negativeBalanceCheck=l.negativeBalanceCheck,s.negativeBalanceVal=l.negativeBalanceVal,s.negativeBalanceType=l.negativeBalanceType,s.applicableDateType=l.applicableDateType,s.applicableDate=l.applicableDate,s.resetDateType=l.resetDateType,s.resetDate=0==l.resetDate?0:l.resetDate,s.newHireTime=l.newHireTime,s.newHireTimeType=l.newHireTimeType,s.newHireRate=l.newHireRate,s.employeeTypes=l.employeeTypes,s.offDays=null!==e.Data.off_days?e.Data.off_days.split(","):null,s.plans=l.plans,$("#js-step-bar-reset").show(),$("#js-category-reset").select2("val",c.type),$("#js-category-reset").select2("val",s.employeeTypes),$("#js-policy-title-reset").val(c.title),$("#js-sort-order-reset").val(c.order),$("#js-employee-reset").select2("val",c.entitledEmployees),$("#js-employee-type-reset").select2("val",c.employeeTypes),$("#js-off-days-edit").select2("val",c.offDays),$("#js-approver-check-reset").prop("checked",1==c.approver),$("#js-archive-check-reset").prop("checked",1==c.deactivate),$("#js-include-check-reset").prop("checked",1==c.include),$("#js-accrual-time-reset").select2("val",l.time),$("#js-accrual-time-reset").trigger("change"),$("#js-accrual-frequency-reset").select2("val",l.frequency),$("#js-accrual-frequency-reset").trigger("change"),$("#js-accrual-frequency-val-reset").val(l.frequencyVal),$("#js-accrual-rate-reset").val(l.rate),$(`#js-accrual-rate-type-reset option[value="${l.rateType}"]`).prop("selected",!0),$("#js-minimum-applicable-hours-reset").val(l.applicableTime),$(`.js-minimum-applicable-time-reset[value="${l.applicableTimeType}"]`).prop("checked",!0).trigger("click"),$("#js-carryover-cap-check-reset").select2("val",l.carryOverCheck),$("#js-carryover-cap-check-reset").trigger("change"),$("#js-carryover-cap-reset").val(l.carryOverVal),$("#js-carryover-cycle-reset").val(l.carryOverCycle),$("#js-accrual-balance-reset").select2("val",l.negativeBalanceCheck),$("#js-accrual-balance-reset").trigger("change"),$("#js-maximum-balance-reset").val(l.negativeBalanceVal),$(`.js-hire-date-reset[value="${l.applicableDateType}"]`).prop("checked",!0),$(`.js-hire-date-reset[value="${l.applicableDateType}"]`).trigger("change"),$(`.js-policy-reset-date-reset[value="${l.resetDateType}"]`).prop("checked",!0).trigger("change"),$("#js-accrue-new-hire-reset").val(l.newHireTime),$("#js-newhire-prorate-reset").val(l.newHireRate),$("#js-accrual-new-hire-time-type-reset").val(l.newHireTimeType),$("#js-custom-date-reset").val(l.applicableDate),$("#js-custom-reset-date-reset").val(l.resetDate),$("#js-step-bar-reset").show(),loadAccrualPlans("reset",l.plans),setNewHireAccrual("edit"),setNewHireAccrual("reset"),ml(!1,"policy")}function t(e){return new Promise((t,a)=>{$.post(handlerURL,Object.assign(d.Policies.Main,{policyId:e}),e=>{t(e)})})}function a(e){return 1===e?(n.policy_category_type=getField("#js-policy-type-edit"),n.type=getField("#js-category-edit"),0==n.type?(alertify.alert("WARNING!","Please, select the policy type.",()=>{}),!1):(n.title=getField("#js-policy-title-edit"),0==n.title?(alertify.alert("WARNING!","Please, add the policy title.",()=>{}),!1):(n.order=getField("#js-sort-order-edit"),n.entitledEmployees=getField("#js-employee-edit"),n.isEntitledEmployees=$(".jsIsEntitledEmployee:checked").val(),n.employeeTypes=getField("#js-employee-type-edit"),n.offDays=getField("#js-off-days-edit"),n.approver=!0===$("#js-approver-check-edit").prop("checked")?1:0,n.approverList=[],1==n.approver&&(n.approverList=getField("#js-approvers-list-edit")||[]),n.deactivate=!0===$("#js-archive-check-edit").prop("checked")?1:0,n.include=1==$("#js-include-check-edit").prop("checked")?1:0,saveStep(n),!0))):2===e?(n.method=getField("#js-accrual-method-edit"),n.time=getField("#js-accrual-time-edit"),n.frequency=getField("#js-accrual-frequency-edit"),n.frequencyVal=getField("#js-accrual-frequency-val-edit"),n.rate=getField("#js-accrual-rate-edit"),n.rateType=getField("#js-accrual-rate-type-edit option:selected"),n.applicableTimeType=getField(".js-minimum-applicable-time-edit:checked"),n.applicableTime=getField("#js-minimum-applicable-hours-edit"),n.plans=getAccrualPlans("edit"),n.accuralDefaultFlow=!0===$("#js-accrual-default-flow-edit").prop("checked")?1:0,!0===n.plans?(alertify.alert("WARNING!","Please, add the proper plans.",()=>{}),!1):(saveStep(n),!0)):3===e?(n.carryOverCheck=getField("#js-carryover-cap-check-edit"),n.carryOverVal=getField("#js-carryover-cap-edit"),n.carryOverType=getField("#js-accrual-carryover-type-edit option:selected"),n.carryOverCycle=getField("#js-carryover-cycle-edit"),saveStep(n),!0):4===e?(n.negativeBalanceCheck=getField("#js-accrual-balance-edit"),n.negativeBalanceVal=getField("#js-maximum-balance-edit"),n.negativeBalanceType=getField("#js-accrual-negative-balance-type-edit option:selected"),saveStep(n),!0):5===e?(n.applicableDateType=getField(".js-hire-date-edit:checked"),n.applicableDate=getField("#js-custom-date-edit"),"hiredate"!=n.applicableDateType.toLowerCase()&&0==n.applicableDate?(alertify.alert("WARNING!","Please, select a policy applicable date.",()=>{}),!1):(saveStep(n),!0)):6===e?(n.resetDateType=getField(".js-policy-reset-date-edit:checked"),n.resetDate=getField("#js-custom-reset-date-edit"),"policydate"!=n.resetDateType.toLowerCase()&&0==n.resetDate?(alertify.alert("WARNING!","Please, select a policy reset date.",()=>{}),!1):(saveStep(n),!0)):7===e?(n.newHireTime=getField("#js-accrue-new-hire-edit"),n.newHireTimeType=getField("#js-accrual-new-hire-time-type-edit option:selected"),n.newHireRate=getField("#js-newhire-prorate-edit"),saveStep(n),!0):8===e&&(n.plans=getAccrualPlans("edit"),saveStep(n),!0)}function l(e){alertify.confirm("This action will effect the employees balance. Are you sure you want to continue?",()=>{ml(!0,"policy");let t=Object.assign({},e,{action:"update_policy",companyId:companyId,employeeId:employeeId,employerId:employerId,public:0,policyId:o});$.post(handlerURL,t,e=>{ml(!1,"policy"),!0!==e.Redirect?!1!==e.Status?alertify.alert("SUCCESS!",e.Response,()=>{redirectPage&&loadViewPage()}):alertify.alert("WARNING!",e.Response,()=>{}):alertify.alert("WARNING!","Your session expired. Please, re-login to continue.",()=>{window.location.reload()})})},()=>{ml(!1,"policy")}).set("labels",{ok:"Yes",cancel:"No"}).setHeader("CONFIRM!")}function r(e){return 2===e?(s.method=getField("#js-accrual-method-reset"),s.time=getField("#js-accrual-time-reset"),s.frequency=getField("#js-accrual-frequency-reset"),s.frequencyVal=getField("#js-accrual-frequency-val-reset"),s.rate=getField("#js-accrual-rate-reset"),s.rateType=getField("#js-accrual-rate-type-reset option:selected"),s.applicableTimeType=getField(".js-minimum-applicable-time-reset:checked"),s.applicableTime=getField("#js-minimum-applicable-hours-reset"),s.plans=getAccrualPlans("reset"),!0===s.plans?(alertify.alert("WARNING!","Please, add the proper plans.",()=>{}),!1):(saveStep(s),!0)):3===e?(s.carryOverCheck=getField("#js-carryover-cap-check-reset"),s.carryOverVal=getField("#js-carryover-cap-reset"),s.carryOverType=getField("#js-accrual-carryover-type option:selected"),n.carryOverCycle=getField("#js-carryover-cycle-edit"),saveStep(s),!0):4===e?(s.negativeBalanceCheck=getField("#js-accrual-balance-reset"),s.negativeBalanceVal=getField("#js-maximum-balance-reset"),s.negativeBalanceType=getField("#js-accrual-negative-balance-type-reset option:selected"),saveStep(s),!0):5===e?(s.applicableDateType=getField(".js-hire-date-reset:checked"),s.applicableDate=getField("#js-custom-date-reset"),"hiredate"!=s.applicableDateType.toLowerCase()&&0==s.applicableDate?(alertify.alert("WARNING!","Please, select a policy applicable date.",()=>{}),!1):(saveStep(s),!0)):6===e?(s.resetDateType=getField(".js-policy-reset-date-reset:checked"),s.resetDate=getField("#js-custom-reset-date-reset"),"policydate"!=s.resetDateType.toLowerCase()&&0==s.resetDate?(alertify.alert("WARNING!","Please, select a policy reset date.",()=>{}),!1):(saveStep(s),!0)):7!==e||(s.newHireTime=getField("#js-accrue-new-hire-reset"),s.newHireTimeType=getField("#js-accrual-new-hire-time-type-reset option:selected"),s.newHireRate=getField("#js-newhire-prorate-reset"),saveStep(s),!0)}function i(e){ml(!0,"policy");let t=Object.assign({},e,{action:"update_reset_policy",companyId:companyId,employeeId:employeeId,employerId:employerId,public:0,policyId:o});$.post(handlerURL,t,e=>{ml(!1,"policy"),!0!==e.Redirect?!1!==e.Status?alertify.alert("SUCCESS!",e.Response,()=>{redirectPage&&loadViewPage()}):alertify.alert("WARNING!",e.Response,()=>{}):alertify.alert("WARNING!","Your session expired. Please, re-login to continue.",()=>{window.location.reload()})})}let c={},s={},o=0,p={},n={type:0,title:0,order:1,policy_category_type:0,entitledEmployees:[],isEntitledEmployees:0,employeeTypes:[],offDays:[],approver:0,approverList:[],deactivate:0,include:1,method:"yearly",time:"none",frequency:"none",frequencyVal:0,rate:0,rateType:"days",applicableTime:0,applicableTimeType:"hours",carryOverCheck:"no",carryOverType:"days",carryOverVal:0,carryOverCycle:1,negativeBalanceCheck:"no",negativeBalanceVal:0,negativeBalanceType:"days",applicableDateType:"hireDate",applicableDate:0,resetDateType:"policyDateCustom",resetDate:0,newHireTime:0,newHireTimeType:0,newHireRate:0,plans:[]},d={Policies:{Main:{action:"get_single_policy_by_id",companyId:companyId,employerId:employerId,employeeId:employeeId,public:0}}};window.timeoff.startPolicyEditProcess=e,window.timeoff.stepCompletedEdit=a,window.timeoff.finalStepCompletedEdit=l,window.timeoff.stepCompletedReset=r,window.timeoff.finalStepCompletedReset=i,$(".jsEditResetCheckbox").click(function(){$(".jsEditResetCheckbox").removeClass("btn-success"),$(".jsEditResetCheckbox").addClass("btn-default"),$(this).addClass("btn-success"),"rp"===$(this).data("type")?($("#jsEditPage").fadeOut(),$("#jsResetPage").fadeIn(300),$(".jsEditResetText").text("The policy for next year."),page="reset"):($("#jsResetPage").fadeOut(),$("#jsEditPage").fadeIn(300),$(".jsEditResetText").text("The policy for current year."),page="edit")}),$("#js-employee-edit").on("select2:select",function(e){if("All"!=e.params.data.text){let e=$(this).val().filter(function(e){return"all"!=e});$("#js-employee-edit").val(e)}else $("#js-employee-edit").val("all");$("#js-employee-edit").trigger("change.select2")}),$("#js-approvers-list-edit").on("select2:select",function(e){if("All"!=e.params.data.text){let e=$(this).val().filter(function(e){return"all"!=e});$("#js-approvers-list-edit").val(e)}else $("#js-approvers-list-edit").val("all");$("#js-approvers-list-edit").trigger("change.select2")}),$("#js-category-edit").on("change",function(){var e=$('#js-category-edit option[value="'+$(this).val()+'"]').text().toLowerCase().trim();null!==e.match(/(fmla)/g)?$(".js-fmla-range-wrap-edit").show():($(".js-fmla-range-wrap-edit").hide(0),$(".js-fmla-range-edit").prop("checked",!1),$('.js-fmla-range-edit[value="standard_year"]').prop("checked",!0))}),$("#js-accrual-method-edit").change(setAccrualText),$("#js-accrual-frequency-edit").on("change",function(){"none"==$(this).val()?"Jan To Dec"!=$('#js-accrual-time-edit[value="none"]').text()&&($("#js-accrual-time-edit").html('\n                <option value="none" selected="true">Jan To Dec</option>\n                <option value="start_of_period">Jan to Jun</option>\n                <option value="end_of_period">Jul to Dec</option>\n                '),$("#js-accrual-time-edit").select2()):"1st To 30th"!=$('#js-accrual-time-edit[value="none"]').text()&&($("#js-accrual-time-edit").html('\n                    <option value="none" selected="true">1st To 30th</option>\n                    <option value="start_of_period">1st To 15th</option>\n                    <option value="end_of_period">15th To 30th</option>\n                '),$("#js-accrual-time-edit").select2()),"custom"==$(this).val()?($(".jsCustomBoxAdd").show(0),$("#js-accrual-time-edit").prop("disabled",!0),$("#js-accrual-time-text-edit").show()):($(".jsCustomBoxAdd").hide(0),$("#js-accrual-time-edit").prop("disabled",!1),$("#js-accrual-time-text-edit").hide()),setAccrualText()}),$("#js-carryover-cap-check-edit").change(function(){$(".js-carryover-box-edit").find("input").val(0),"no"===$(this).val()?$(".js-carryover-box-edit").hide():$(".js-carryover-box-edit").show()}),$("#js-accrual-balance-edit").change(function(){$(".js-accrual-balance-edit").find("input").val(0),"no"===$(this).val()?$(".js-negative-box-edit").hide():$(".js-negative-box-edit").show()}),$(".js-hire-date-edit").on("change",function(){"hireDate"==$(this).val()?($(".jsImplementDateBox-edit").hide(0),$("#js-custom-date-edit").val("")):$(".jsImplementDateBox-edit").show(0)}),$(".js-policy-reset-date-edit").on("change",function(){"policyDate"==$(this).val()?($(".jsResetDateBox-edit").hide(0),$("#js-custom-reset-date-edit").val("")):$(".jsResetDateBox-edit").show(0)}),$(".js-plan-btn-edit,.js-plan-btn-reset").click(function(e){e.preventDefault(),loadAccrualPlans($(this).data("type"))}),$(document).on("click",".js-plan-remove-btn",function(e){e.preventDefault(),""!=$(this).parent().find(".js-pt").val().trim()||""!=$(this).parent().find(".js-py").val().trim()?alertify.confirm("Do you really want to delete this accrual plan?",()=>{$(this).parent().remove()}).set("labels",{ok:"Yes",cancel:"No"}):$(this).parent().remove()}),$('[data-hint="js-hint"]').click(function(e){e.preventDefault(),$(`.js-hint-${$(this).data("target")}`).toggle()}),$(document).on("select2:selecting","#js-plans-select-edit",function(e){makePlanRow(e.params.args.data.id,"edit")}),$(document).on("select2:unselecting","#js-plans-select-edit",function(e){removePlan(e.params.args.data.id,"edit")}),$(document).on("click",".js-remove-plan-edit",function(e){removePlan($(this).closest("li").data("id"),"edit"),$("#js-plans-select-edit").select2("val",newValues($("#js-plans-select-edit").val(),$(this).closest("li").data("id")))}),$("#js-unlimited-policy-check-edit").click(function(){!0===$(this).prop("checked")?$("#js-plan-box-edit").hide():$("#js-plan-box-edit").show()}),$("#js-accrual-time-edit").change(setAccrualText),$("#js-accrual-rate-type-edit").change(setAccrualText),$("#js-accrual-rate-edit").keyup(function(){""==$(this).val().trim()?($("#js-accrual-time-edit").prop("disabled",!0),$("#js-accrual-time-text-edit").show()):null!=$(this).val().match(/[a-zA-Z]/)?($(this).val(0),$("#js-accrual-time-edit").prop("disabled",!0),$("#js-accrual-time-text-edit").show()):$(this).val()<0?($(this).val(0),$("#js-accrual-time-edit").prop("disabled",!0),$("#js-accrual-time-text-edit").show()):($("#js-accrual-time-edit").prop("disabled",!1),$("#js-accrual-time-text-edit").hide()),0==$(this).val()?$(".js-plan-btn-edit").prop("disabled",!0):$(".js-plan-btn-edit").prop("disabled",!1),setAccrualText()}),$("#js-accrual-frequency-val-edit").keyup(function(){$(this).val().trim()<=0?$(this).val(1):$(this).val().trim()>12&&$(this).val(12),setAccrualText()}),$("#js-category-reset").on("change",function(){var e=$('#js-category-reset option[value="'+$(this).val()+'"]').text().toLowerCase().trim();null!==e.match(/(fmla)/g)?$(".js-fmla-range-wrap-reset").show():($(".js-fmla-range-wrap-reset").hide(0),$(".js-fmla-range-reset").prop("checked",!1),$('.js-fmla-range-reset[value="standard_year"]').prop("checked",!0))}),$("#js-accrual-method-reset").change(setAccrualText),$("#js-accrual-frequency-reset").on("change",function(){"none"==$(this).val()?"Jan To Dec"!=$('#js-accrual-time-reset[value="none"]').text()&&($("#js-accrual-time-reset").html('\n                <option value="none" selected="true">Jan To Dec</option>\n                <option value="start_of_period">Jan to Jun</option>\n                <option value="end_of_period">Jul to Dec</option>\n                '),$("#js-accrual-time-reset").select2()):"1st To 30th"!=$('#js-accrual-time-reset[value="none"]').text()&&($("#js-accrual-time-reset").html('\n                    <option value="none" selected="true">1st To 30th</option>\n                    <option value="start_of_period">1st To 15th</option>\n                    <option value="end_of_period">15th To 30th</option>\n                '),$("#js-accrual-time-reset").select2()),"custom"==$(this).val()?($(".jsCustomBoxAdd").show(0),$("#js-accrual-time-reset").prop("disabled",!0),$("#js-accrual-time-text-reset").show()):($(".jsCustomBoxAdd").hide(0),$("#js-accrual-time-reset").prop("disabled",!1),$("#js-accrual-time-text-reset").hide()),setAccrualText()}),$("#js-carryover-cap-check-reset").change(function(){$(".js-carryover-box-reset").find("input").val(0),"no"===$(this).val()?$(".js-carryover-box-reset").hide():$(".js-carryover-box-reset").show()}),$("#js-accrual-balance-reset").change(function(){$(".js-accrual-balance-reset").find("input").val(0),"no"===$(this).val()?$(".js-negative-box-reset").hide():$(".js-negative-box-reset").show()}),$(".js-hire-date-reset").on("change",function(){"hireDate"==$(this).val()?($(".jsImplementDateBox-reset").hide(0),$("#js-custom-date-reset").val("")):$(".jsImplementDateBox-reset").show(0)}),$(".js-policy-reset-date-reset").on("change",function(){"policyDate"==$(this).val()?($(".jsResetDateBox-reset").hide(0),$("#js-custom-reset-date-reset").val("")):$(".jsResetDateBox-reset").show(0)}),$(document).on("click",".js-plan-remove-btn",function(e){e.preventDefault(),""!=$(this).parent().find(".js-pt").val().trim()||""!=$(this).parent().find(".js-py").val().trim()?alertify.confirm("Do you really want to delete this accrual plan?",()=>{$(this).parent().remove()}).set("labels",{ok:"Yes",cancel:"No"}):$(this).parent().remove()}),$('[data-hint="js-hint"]').click(function(e){e.preventDefault(),$(`.js-hint-${$(this).data("target")}`).toggle()}),$(document).on("select2:selecting","#js-plans-select-reset",function(e){makePlanRow(e.params.args.data.id,"reset")}),$(document).on("select2:unselecting","#js-plans-select-reset",function(e){removePlan(e.params.args.data.id,"reset")}),$(document).on("click",".js-remove-plan-reset",function(e){removePlan($(this).closest("li").data("id"),"reset"),$("#js-plans-select-reset").select2("val",newValues($("#js-plans-select-reset").val(),$(this).closest("li").data("id")))}),$("#js-unlimited-policy-check-reset").click(function(){!0===$(this).prop("checked")?$("#js-plan-box-reset").hide():$("#js-plan-box-reset").show()}),$("#js-accrual-time-reset").change(setAccrualText),$("#js-accrual-rate-type-reset").change(setAccrualText),$("#js-accrual-rate-reset").keyup(function(){$(this).val()<=0?($(this).val(0),$("#js-accrual-time-reset").prop("disabled",!0),$("#js-accrual-time-text-reset").show()):($("#js-accrual-time-reset").prop("disabled",!1),$("#js-accrual-time-text-reset").hide()),0==$(this).val()?$(".js-plan-btn-reset").prop("disabled",!0):$(".js-plan-btn-reset").prop("disabled",!1),setAccrualText()}),$("#js-accrual-frequency-val-reset").keyup(function(){$(this).val().trim()<=0?$(this).val(1):$(this).val().trim()>12&&$(this).val(12),setAccrualText()}),$(document).on("click",".js-edit-row-btn",function(e){e.preventDefault(),c=Object.assign(n),o=$(this).closest("tr").data("id"),p={},ml(!0,"policy"),loadEditPage()}),$("#js-policy-title-edit").keyup(function(){$("#jsPolicyTitleEdit").text(" - "+$(this).val())}),$("#js-accrue-new-hire-edit").keyup(setNewHireAccrual),$("#js-newhire-prorate-edit").keyup(setNewHireAccrual),$("#js-accrual-new-hire-time-type-edit").change(setNewHireAccrual),$("#js-accrue-new-hire-reset").keyup(setNewHireAccrual),$("#js-newhire-prorate-reset").keyup(setNewHireAccrual),$("#js-accrual-new-hire-time-type-reset").change(setNewHireAccrual),$(".jsStepSave").click(e=>{e.preventDefault(),a(1)&&a(2)&&a(3)&&a(4)&&a(5)&&a(6)&&a(7)&&(redirectPage=!1,l(JSON.parse(localStorage.getItem("editPolicy"))))}),$(".jsStepSaveReset").click(e=>{e.preventDefault(),r(1)&&r(2)&&r(3)&&r(4)&&r(5)&&r(6)&&r(7)&&(redirectPage=!1,i(JSON.parse(localStorage.getItem("resetPolicy"))))})});