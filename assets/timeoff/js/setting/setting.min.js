$((function(){let callOBJ={Settings:{Main:{action:"get_settings_by_company",companyId:companyId,employerId:employerId,employeeId:employeeId,public:0},Update:{action:"edit_settings",companyId:companyId,employerId:employerId,employeeId:employeeId,public:0}}},settingOBJ={defaultTimeslot:0,format:0,offDays:0,approvalCheck:0,forAllEmployees:0,emailSendCheck:0,emailCheck:0};function fetchTimeOffSettings(){$.post(handlerURL,callOBJ.Settings.Main,resp=>{if(!0!==resp.Redirect){if(0!=resp.Data.Formats.length){var rows="";$.each(resp.Data.Formats,(function(i,v){rows+='<option value="'+v.format_id+'">'+v.title.replace(/:/g," ")+"</option>"})),$("#js-formats").html(rows),$("#js-formats").select2()}null!=resp.Data.Settings&&0!=resp.Data.Settings.length&&($("#js-default-time-slot-hours").val(resp.Data.Settings.default_timeslot),$("#js-approval-check").prop("checked","1"==resp.Data.Settings.approval_check),$("#js-send-email-check").prop("checked","1"==resp.Data.Settings.send_email_to_supervisor),$("#js-formats").select2("val",resp.Data.Settings.timeoff_format_sid),$("#js-off-days").select2("val",resp.Data.Settings.off_days.split(","))),ml(!1,"setting")}else alertify.alert("WARNING!","Your session expired. Please, re-login to continue.",()=>{window.location.reload()})})}fetchTimeOffSettings(),$(".js-accural-date").datepicker({dateFormat:"mm-dd-yy"}),$("#js-off-days").select2({closeOnSelect:!1}),$("#js-save-btn").on("click",(function(){ml(!0,"setting"),settingOBJ.defaultTimeslot=$("#js-default-time-slot-hours").val().trim(),settingOBJ.format=$("#js-formats").val(),settingOBJ.offDays=$("#js-off-days").val(),settingOBJ.forAllEmployees=Number($(".js-for-all-employees").prop("checked")),settingOBJ.emailSendCheck=Number($("#js-send-email-check").prop("checked")),settingOBJ.emailCheck=Number($("#js-email-check").prop("checked")),$.post(handlerURL,Object.assign(callOBJ.Settings.Update,settingOBJ),(function(resp){if(!0!==resp.Redirect){if(!1===resp.Status)return ml(!1,"setting"),void alertify.alert("WARNING!",resp.Response);alertify.alert("SUCCESS!",resp.Response),ml(!1,"setting")}else alertify.alert("WARNING!","Your session expired. Please, re-login to continue.",()=>{window.location.reload()})}))})),$('[data-toggle="popovers"]').popover({trigger:"hover"})}));