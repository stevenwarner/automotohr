$((function(){let obj={employee:0,type:"1",selectedEmployees:[],canApprove:0,deactivate:0},callOBJ={Approver:{Main:{action:"get_single_approver",companyId:companyId,employerId:employerId,employeeId:employeeId,public:0}}},approverId=0;function updateApprover(type){ml(!0,"approver");let post=Object.assign({},type,{action:"update_approver",companyId:companyId,employeeId:employeeId,employerId:employerId,public:0,approverId:approverId});$.post(handlerURL,post,resp=>{ml(!1,"approver"),!0!==resp.Redirect?!1!==resp.Status?alertify.alert("SUCCESS!",resp.Response,()=>{loadViewPage()}):alertify.alert("WARNING!",resp.Response,()=>{}):alertify.alert("WARNING!","Your session expired. Please, re-login to continue.",()=>{window.location.reload()})})}function startEditprocess(id){approverId=id,$.post(handlerURL,Object.assign(callOBJ.Approver.Main,{approverId:approverId}),resp=>{if(!0!==resp.Redirect){if(!1===resp.Status)return ml(!1,"approver"),void alertify.alert("WARNING!",resp.Response,()=>{});obj.employee=resp.Data.employee_sid,obj.type=resp.Data.is_department,obj.selectedEmployees=resp.Data.department_sid.split(","),obj.canApprove=resp.Data.approver_percentage,obj.deactivate=resp.Data.is_archived,$("#js-employee-edit").select2("val",obj.employee),$(`.js-is-department-edit[value="${obj.type}"]`).prop("checked",!0),1==obj.type?$("#js-departments-edit").select2("val",obj.selectedEmployees):$("#js-teams-edit").select2("val",obj.selectedEmployees),$(`.js-${1==obj.type?"department":"team"}-row-edit`).show(),$("#js-approve-100-percent-edit").prop("checked",1==obj.canApprove),$("#js-archived-edit").prop("checked",1===obj.deactivate),ml(!1,"approver")}else alertify.alert("WARNING!","Your session expired. Please, re-login to continue.",()=>{window.location.reload()})})}window.timeoff.startEditprocess=startEditprocess,$('input[name="js-is-department-edit"]').click((function(){1==$(this).val()?($(".js-team-row-edit").hide(),$(".js-department-row-edit").show()):($(".js-department-row-edit").hide(),$(".js-team-row-edit").show())})),$("#js-save-edit-btn").click((function(e){return e.preventDefault(),obj.employee=getField("#js-employee-edit"),obj.type=getField(".js-is-department-edit:checked"),1==obj.type?obj.selectedEmployees=getField("#js-departments-edit"):obj.selectedEmployees=getField("#js-teams-edit"),obj.canApprove=!0===$("#js-approve-100-percent-edit").prop("checked")?1:0,obj.deactivate=!0===$("#js-archive-check-edit").prop("checked")?1:0,0==obj.employee?(alertify.alert("WARNING!","Please select an employee.",()=>{}),!1):0==obj.selectedEmployees?(alertify.alert("WARNING!","Please select departments/teams.",()=>{}),!1):void updateApprover(obj)}))}));