let cmnOBJ={Employees:{Main:{action:"get_company_employees",companyId:companyId,employerId:employerId,employeeId:employeeId,public:0}},Policies:{Main:{action:"get_policy_list_by_company",companyId:companyId,employerId:employerId,employeeId:employeeId,public:0}}};function fetchEmployees(){$.post(handlerURL,cmnOBJ.Employees.Main,(function(resp){if(!0===resp.Redirect)return void alertify.alert("WARNING!","Your session expired. Please, re-login to continue.",()=>{window.location.reload()});if(!1===resp.Status)return void console.log("Failed to load employees.");window.timeoff.employees=resp.Data;let rows="";rows+='<option value="all">All</option>',window.timeoff.employees.map((function(v){rows+='<option value="'+v.user_id+'">'+remakeEmployeeName(v)+"</option>"})),$("#js-employee-add").html(rows),$("#js-employee-add").select2(),$("#js-employee-add").select2MultiCheckboxes({templateSelection:function(selected,total){return total--,"Selected "+(-1!==$.inArray("all",$("#js-employee-add").val())?total:selected.length)+" of "+total}}),$("#js-employee-edit").html(rows),$("#js-employee-reset").html(rows),$("#js-filter-employee").html(rows),$("#js-filter-employee").select2()}))}function fetchPolicies(){$.post(handlerURL,cmnOBJ.Policies.Main,(function(resp){if(!0===resp.Redirect)return void alertify.alert("WARNING!","Your session expired. Please, re-login to continue.",()=>{window.location.reload()});if(!1===resp.Status)return void console.log("Failed to load policies.");let rows="";rows+='<option value="all">All</option>',resp.Data.map((function(v){rows+=`<option value="${v.policy_id}">${v.policy_title}</option>`})),$("#js-filter-policies").html(rows),$("#js-filter-policies").select2()}))}function fetchHolidays(){$.post(handlerURL,{action:"get_company_all_holidays",companyId:companyId,employerId:employerId,employeeId:employeeId},(function(resp){!1!==resp.Status?window.timeoff.holidays=resp.Data:console.log(resp.Response)}))}function getUserById(userId,users){let r=[];return $.each(users,(index,user)=>{user.user_id==userId&&(r=user)}),r}function getHolidayText(v){var b=moment(v.from_date,"YYYY-MM-DD"),a,c;return moment(v.to_date,"YYYY-MM-DD").diff(b,"days")>=2?moment(v.from_date,"YYYY-MM-DD").format("MMMM, D")+" - "+moment(v.to_date,"YYYY-MM-DD").format("MMMM, D"):moment(v.from_date,"YYYY-MM-DD").format("MMMM, D")}function getApproverLisiting(history){if(0==history.length)return"";let rows="",arr=[];return history.map(his=>{if("create"==his.action)return"";if("{}"==his.note)return"";let action=JSON.parse(his.note);if(null==action.canApprove)return"";let msg=`${remakeEmployeeName(his)}`,il="";return"pending"==action.status?"":("approved"==action.status?(msg+=` has approved the time-off at ${moment(his.created_at).format(timeoffDateFormatWithTime)}`,il='<i class="fa fa-check-circle text-success"></i>'):"rejected"==action.status&&(msg+=` has rejected the time-off at ${moment(his.created_at).format(timeoffDateFormatWithTime)}`,il='<i class="fa fa-times-circle text-danger"></i>'),-1!==$.inArray(his.userId,arr)?"":(arr.push(his.userId),void(rows+=`\n            <div class="csApproverBox" title="Approver" data-content="${msg}">\n                <img src="${null==his.image||""==his.image?awsURL+"test_file_01.png":awsURL+his.image}" style="width: 40px; height: 40px;" />\n                ${il}\n            </div>\n        `)))}),rows}function getApproverComments(history){if(0==history.length)return"";let rows="";return history.map(his=>{if("create"==his.action)return"";if("{}"==his.note)return"";let action=JSON.parse(his.note);if(null==action.canApprove)return"";let msg="";if("pending"==action.status)return"";msg+='        <div class="employee-info" style="padding: 7px">',msg+="            <figure>",msg+=`                <img src="${getImageURL(his.image)}" class="img-circle emp-image" />`,msg+="            </figure>",msg+='            <div class="text">',msg+=`            <p>\n                                <span>${action.comment}</span><br />\n                                <span style="font-size: 11px;">${moment(his.created_at).format(timeoffDateFormatWithTime)}</span></p>`,msg+="            </div>",msg+="        </div>",msg+='      </div><div class="csSeprator"></div>',rows+=msg}),rows}fetchEmployees(),fetchPolicies(),fetchHolidays();