$((function(){let holidayOBJ={year:0,holiday:0,icon:0,startDate:0,endDate:0,workOnHoliday:0,deactivate:0};function addHoliday(type){ml(!0,"holiday");let post=Object.assign({},holidayOBJ,{action:"create_holiday",companyId:companyId,employeeId:employeeId,employerId:employerId,public:0});$.post(handlerURL,post,resp=>{ml(!1,"holiday"),!0!==resp.Redirect?!1!==resp.Status?alertify.alert("SUCCESS!",resp.Response,()=>{loadViewPage()}):alertify.alert("WARNING!",resp.Response,()=>{}):alertify.alert("WARNING!","Your session expired. Please, re-login to continue.",()=>{window.location.reload()})})}$("#js-year-add").change((function(e){$("#js-from-date-add").val(""),$("#js-from-date-add").datepicker("option","yearRange",getYearRange()),$("#js-from-date-add").datepicker("option","defaultDate",moment().format("MM-DD-")+getYearRange("add",!0)),$("#js-to-date-add").val(""),$("#js-to-date-add").datepicker("option","yearRange",getYearRange()),$("#js-to-date-add").datepicker("option","minDate",moment().format("MM-DD-")+getYearRange("add",!0))})),$("#js-icon-add").click((function(e){e.preventDefault(),$("#js-holiday-icon-type").val("add"),Modal({Id:"jsModal1",Title:"Holiday Icons",Body:getIconBody("add"),Buttons:['<button class="btn btn-success jsSaveIcon" data-type="add">Save Icon</button>'],Loader:"jsModalAddIconLoader"},()=>{ml(!1,"jsModalAddIconLoader")})})),$(document).on("click",'.jsSaveIcon[data-type="add"]',(function(e){if(e.preventDefault(),holidayOBJ.icon="",$("#js-icon-plc-add").prop("src",""),$("#js-icon-plc-box-add").addClass("hidden"),$("#js-holiday-icon-add").val(0),0!=$(".js-icon-select.active").length){let type=$("#js-holiday-icon-type").val();$("#js-icon-plc-add").prop("src",$(".js-icon-select.active").find("img").prop("src")),$("#js-icon-plc-box-add").removeClass("hidden"),$("#js-holiday-icon-add").val($(".js-icon-select.active").find("img").data("id")),holidayOBJ.icon=$(".js-icon-select.active").find("img").data("id")}$("#jsModal1").fadeOut(300).remove(),$("body").css("overflow-y","auto")})),$("#js-icon-remove-add").click((function(){$("#js-icon-plc-add").prop("src",!1),$("#js-icon-plc-box-add").addClass("hidden"),$("#js-holiday-icon-add").val(""),holidayOBJ.icon=""})),$("#js-save-add-btn").click((function(e){return e.preventDefault(),holidayOBJ.year=getField("#js-year-add"),holidayOBJ.holiday=getField("#js-holiday-add"),holidayOBJ.startDate=getField("#js-from-date-add"),holidayOBJ.endDate=getField("#js-to-date-add"),holidayOBJ.workOnHoliday=getField(".js-to-date-add:checked"),holidayOBJ.deactivate=!0===$("#js-archive-check-add").prop("checked")?1:0,0==holidayOBJ.year||-1==holidayOBJ.year?(alertify.alert("WARNING!","Please, select the year.",()=>{}),!1):0==holidayOBJ.holiday?(alertify.alert("WARNING!","Holiday is required.",()=>{}),!1):0==holidayOBJ.startDate?(alertify.alert("WARNING!","Please, select the holiday start date.",()=>{}),!1):0==holidayOBJ.endDate?(alertify.alert("WARNING!","Please, select the holiday end date.",()=>{}),!1):void addHoliday(holidayOBJ)}))}));