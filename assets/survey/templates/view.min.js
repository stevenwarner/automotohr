$((function () { let t; async function e() { $("#jsTemplatesArea").html('\n           <tr>\n                <td colspan="4">\n                    <div class="alert text-center">\n                        <i class="fa fa-spinner fa-spin text-large"></i>\n                    </div>\n                </td>\n            </tr>\n        '); const t = await makeSecureCallToApiServer(`surveys/templates?keyword=${$(".jsFilterKeyword").val().trim()}`, { method: "GET" }); if (0 === t.data.length) return $("#jsTemplatesArea").html('\n            <tr>\n                <td colspan="4">\n                    <p class="alert alert-info text-center">\n                        No templates found.\n                    </p>\n                </td>\n            </tr>\n        '); !function (t) { let e = ""; t.map((function (t) { e += `<tr class="jsSurveyTemplateRow" data-id="${t.template_sid}">`, e += ' <td class="vam">', e += t.title, e += " </td>", e += ' <td class="vam">', e += '     <button type="button" class="btn btn-link jsPreviewSurveyTemplate">', e += `         ${t.number_of_questions} Questions`, e += "     </button>", e += " </td>", e += ' <td class="vam">', t.is_recurring ? e += `Every ${t.recur_number} ${t.recur_type}` : e += "-", e += " </td>", e += ' <td class="vam text-right">', e += '     <button type="button" class="btn btn-orange jsPreviewSurveyTemplate">', e += '         <i class="fa fa-eye"></i>', e += "         Preview", e += "     </button>", e += '     <button type="button" class="btn btn-warning jsEditSurveyTemplate">', e += '         <i class="fa fa-edit"></i>', e += "         Edit", e += "     </button>", e += '     <button type="button" class="btn btn-danger jsDeleteSurveyTemplate">', e += '         <i class="fa fa-trash"></i>', e += "         Delete", e += "     </button>", e += " </td>", e += "</tr>" })), $("#jsTemplatesArea").html(e) }(t.data) } $(".jsFilterSearchBtn").click((function (t) { t.preventDefault(), e() })), $(".jsFilterClearBtn").click((function (t) { t.preventDefault(), $(".jsFilterKeyword").val(""), e() })), $(".jsAddSurveyTemplateBtn").click((function (t) { t.preventDefault(), startTemplateAddProcess() })), $(document).on("click", ".jsPreviewSurveyTemplate", (function () { !async function (e) { void 0 !== t && t.closeModal(); t = $.msSiteModal(), t.setContent("").open(), t.loader(!0); try { !function (e) { let n = ""; e.questions.map((function (t) { n += generateQuestionPreviewView(t, "", "preview") })); let s = ""; s += `\n            <table class="table table-bordered">\n                <tr>\n                    <th class="text-small">Title</th>\n                    <td class="text-medium">${e.title}</td>\n                </tr>\n                <tr>\n                    <th class="text-small">Description</th>\n                    <td class="text-medium">${e.description || "-"}</td>\n                </tr>\n                <tr>\n                    <th class="text-small">Recur</th>\n                    <td class="text-medium">${e.is_recurring ? `Every ${e.recur_number} ${e.recur_type}` : "-"}</td>\n                </tr>\n            </table>\n            <hr />\n            ${n}\n        `, t.setContent(s), t.loader(!1) }((await makeSecureCallToApiServer(`surveys/templates/${e}`, { method: "GET" })).data) } catch (e) { return t.closeModal(), handleErrorResponse(e) } }($(this).closest(".jsSurveyTemplateRow").data("id")) })), $(document).on("click", ".jsDeleteSurveyTemplate", (function () { const t = $(this).closest(".jsSurveyTemplateRow").data("id"); _confirm("Do you want to delete this template?", (async function () { try { const n = await makeSecureCallToApiServer(`surveys/templates/${t}`, { method: "DELETE" }); _success(n.message, (function () { e() })) } catch (t) { handleErrorResponse(t) } })) })), $(document).on("click", ".jsEditSurveyTemplate", (function () { const t = $(this).closest(".jsSurveyTemplateRow").data("id"); startTemplateEditProcess(t) })), window.getTemplates = e, e() }));